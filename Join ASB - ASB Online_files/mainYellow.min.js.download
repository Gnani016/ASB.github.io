!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./dist/",n(n.s=517)}([function(e,t,n){var r=n(2),i=n(18),o=n(11),a=n(12),s=n(19),c=function(e,t,n){var u,p,l,d,f=e&c.F,h=e&c.G,E=e&c.S,g=e&c.P,A=e&c.B,v=h?r:E?r[t]||(r[t]={}):(r[t]||{}).prototype,_=h?i:i[t]||(i[t]={}),I=_.prototype||(_.prototype={});for(u in h&&(n=t),n)l=((p=!f&&v&&void 0!==v[u])?v:n)[u],d=A&&p?s(l,r):g&&"function"==typeof l?s(Function.call,l):l,v&&a(v,u,l,e&c.U),_[u]!=l&&o(_,u,d),g&&I[u]!=l&&(I[u]=l)};r.core=i,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t,n){var r=n(4);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(47)("wks"),i=n(33),o=n(2).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t,n){var r=n(21),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){e.exports=!n(3)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(1),i=n(98),o=n(23),a=Object.defineProperty;t.f=n(7)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(24);e.exports=function(e){return Object(r(e))}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(8),i=n(32);e.exports=n(7)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(2),i=n(11),o=n(14),a=n(33)("src"),s=n(148),c=(""+s).split("toString");n(18).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var u="function"==typeof n;u&&(o(n,"name")||i(n,"name",t)),e[t]!==n&&(u&&(o(n,a)||i(n,a,e[t]?""+e[t]:c.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||s.call(this)}))},function(e,t,n){var r=n(0),i=n(3),o=n(24),a=/"/g,s=function(e,t,n,r){var i=String(o(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+i+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(s),r(r.P+r.F*i((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",n)}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(48),i=n(24);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(49),i=n(32),o=n(15),a=n(23),s=n(14),c=n(98),u=Object.getOwnPropertyDescriptor;t.f=n(7)?u:function(e,t){if(e=o(e),t=a(t,!0),c)try{return u(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){var r=n(14),i=n(9),o=n(72)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t){var n=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(10);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){"use strict";var r=n(3);e.exports=function(e,t){return!!e&&r((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},function(e,t,n){var r=n(4);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(0),i=n(18),o=n(3);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o((function(){n(1)})),"Object",a)}},function(e,t,n){var r=n(19),i=n(48),o=n(9),a=n(6),s=n(88);e.exports=function(e,t){var n=1==e,c=2==e,u=3==e,p=4==e,l=6==e,d=5==e||l,f=t||s;return function(t,s,h){for(var E,g,A=o(t),v=i(A),_=r(s,h,3),I=a(v.length),S=0,O=n?f(t,I):c?f(t,0):void 0;I>S;S++)if((d||S in v)&&(g=_(E=v[S],S,A),e))if(n)O[S]=g;else if(g)switch(e){case 3:return!0;case 5:return E;case 6:return S;case 2:O.push(E)}else if(p)return!1;return l?-1:u||p?p:O}}},function(e,t,n){"use strict";if(n(7)){var r=n(29),i=n(2),o=n(3),a=n(0),s=n(63),c=n(96),u=n(19),p=n(39),l=n(32),d=n(11),f=n(41),h=n(21),E=n(6),g=n(126),A=n(35),v=n(23),_=n(14),I=n(44),S=n(4),O=n(9),y=n(85),m=n(36),C=n(17),T=n(37).f,P=n(87),N=n(33),R=n(5),b=n(26),M=n(53),x=n(51),w=n(90),L=n(46),D=n(58),H=n(38),F=n(89),U=n(115),V=n(8),k=n(16),G=V.f,j=k.f,B=i.RangeError,q=i.TypeError,W=i.Uint8Array,K=Array.prototype,Y=c.ArrayBuffer,X=c.DataView,J=b(0),Q=b(2),z=b(3),$=b(4),Z=b(5),ee=b(6),te=M(!0),ne=M(!1),re=w.values,ie=w.keys,oe=w.entries,ae=K.lastIndexOf,se=K.reduce,ce=K.reduceRight,ue=K.join,pe=K.sort,le=K.slice,de=K.toString,fe=K.toLocaleString,he=R("iterator"),Ee=R("toStringTag"),ge=N("typed_constructor"),Ae=N("def_constructor"),ve=s.CONSTR,_e=s.TYPED,Ie=s.VIEW,Se=b(1,(function(e,t){return Te(x(e,e[Ae]),t)})),Oe=o((function(){return 1===new W(new Uint16Array([1]).buffer)[0]})),ye=!!W&&!!W.prototype.set&&o((function(){new W(1).set({})})),me=function(e,t){var n=h(e);if(n<0||n%t)throw B("Wrong offset!");return n},Ce=function(e){if(S(e)&&_e in e)return e;throw q(e+" is not a typed array!")},Te=function(e,t){if(!S(e)||!(ge in e))throw q("It is not a typed array constructor!");return new e(t)},Pe=function(e,t){return Ne(x(e,e[Ae]),t)},Ne=function(e,t){for(var n=0,r=t.length,i=Te(e,r);r>n;)i[n]=t[n++];return i},Re=function(e,t,n){G(e,t,{get:function(){return this._d[n]}})},be=function(e){var t,n,r,i,o,a,s=O(e),c=arguments.length,p=c>1?arguments[1]:void 0,l=void 0!==p,d=P(s);if(null!=d&&!y(d)){for(a=d.call(s),r=[],t=0;!(o=a.next()).done;t++)r.push(o.value);s=r}for(l&&c>2&&(p=u(p,arguments[2],2)),t=0,n=E(s.length),i=Te(this,n);n>t;t++)i[t]=l?p(s[t],t):s[t];return i},Me=function(){for(var e=0,t=arguments.length,n=Te(this,t);t>e;)n[e]=arguments[e++];return n},xe=!!W&&o((function(){fe.call(new W(1))})),we=function(){return fe.apply(xe?le.call(Ce(this)):Ce(this),arguments)},Le={copyWithin:function(e,t){return U.call(Ce(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return $(Ce(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return F.apply(Ce(this),arguments)},filter:function(e){return Pe(this,Q(Ce(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return Z(Ce(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ee(Ce(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){J(Ce(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ne(Ce(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return te(Ce(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return ue.apply(Ce(this),arguments)},lastIndexOf:function(e){return ae.apply(Ce(this),arguments)},map:function(e){return Se(Ce(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return se.apply(Ce(this),arguments)},reduceRight:function(e){return ce.apply(Ce(this),arguments)},reverse:function(){for(var e,t=Ce(this).length,n=Math.floor(t/2),r=0;r<n;)e=this[r],this[r++]=this[--t],this[t]=e;return this},some:function(e){return z(Ce(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return pe.call(Ce(this),e)},subarray:function(e,t){var n=Ce(this),r=n.length,i=A(e,r);return new(x(n,n[Ae]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,E((void 0===t?r:A(t,r))-i))}},De=function(e,t){return Pe(this,le.call(Ce(this),e,t))},He=function(e){Ce(this);var t=me(arguments[1],1),n=this.length,r=O(e),i=E(r.length),o=0;if(i+t>n)throw B("Wrong length!");for(;o<i;)this[t+o]=r[o++]},Fe={entries:function(){return oe.call(Ce(this))},keys:function(){return ie.call(Ce(this))},values:function(){return re.call(Ce(this))}},Ue=function(e,t){return S(e)&&e[_e]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Ve=function(e,t){return Ue(e,t=v(t,!0))?l(2,e[t]):j(e,t)},ke=function(e,t,n){return!(Ue(e,t=v(t,!0))&&S(n)&&_(n,"value"))||_(n,"get")||_(n,"set")||n.configurable||_(n,"writable")&&!n.writable||_(n,"enumerable")&&!n.enumerable?G(e,t,n):(e[t]=n.value,e)};ve||(k.f=Ve,V.f=ke),a(a.S+a.F*!ve,"Object",{getOwnPropertyDescriptor:Ve,defineProperty:ke}),o((function(){de.call({})}))&&(de=fe=function(){return ue.call(this)});var Ge=f({},Le);f(Ge,Fe),d(Ge,he,Fe.values),f(Ge,{slice:De,set:He,constructor:function(){},toString:de,toLocaleString:we}),Re(Ge,"buffer","b"),Re(Ge,"byteOffset","o"),Re(Ge,"byteLength","l"),Re(Ge,"length","e"),G(Ge,Ee,{get:function(){return this[_e]}}),e.exports=function(e,t,n,c){var u=e+((c=!!c)?"Clamped":"")+"Array",l="get"+e,f="set"+e,h=i[u],A=h||{},v=h&&C(h),_=!h||!s.ABV,O={},y=h&&h.prototype,P=function(e,n){G(e,n,{get:function(){return function(e,n){var r=e._d;return r.v[l](n*t+r.o,Oe)}(this,n)},set:function(e){return function(e,n,r){var i=e._d;c&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[f](n*t+i.o,r,Oe)}(this,n,e)},enumerable:!0})};_?(h=n((function(e,n,r,i){p(e,h,u,"_d");var o,a,s,c,l=0,f=0;if(S(n)){if(!(n instanceof Y||"ArrayBuffer"==(c=I(n))||"SharedArrayBuffer"==c))return _e in n?Ne(h,n):be.call(h,n);o=n,f=me(r,t);var A=n.byteLength;if(void 0===i){if(A%t)throw B("Wrong length!");if((a=A-f)<0)throw B("Wrong length!")}else if((a=E(i)*t)+f>A)throw B("Wrong length!");s=a/t}else s=g(n),o=new Y(a=s*t);for(d(e,"_d",{b:o,o:f,l:a,e:s,v:new X(o)});l<s;)P(e,l++)})),y=h.prototype=m(Ge),d(y,"constructor",h)):o((function(){h(1)}))&&o((function(){new h(-1)}))&&D((function(e){new h,new h(null),new h(1.5),new h(e)}),!0)||(h=n((function(e,n,r,i){var o;return p(e,h,u),S(n)?n instanceof Y||"ArrayBuffer"==(o=I(n))||"SharedArrayBuffer"==o?void 0!==i?new A(n,me(r,t),i):void 0!==r?new A(n,me(r,t)):new A(n):_e in n?Ne(h,n):be.call(h,n):new A(g(n))})),J(v!==Function.prototype?T(A).concat(T(v)):T(A),(function(e){e in h||d(h,e,A[e])})),h.prototype=y,r||(y.constructor=h));var N=y[he],R=!!N&&("values"==N.name||null==N.name),b=Fe.values;d(h,ge,!0),d(y,_e,u),d(y,Ie,!0),d(y,Ae,h),(c?new h(1)[Ee]==u:Ee in y)||G(y,Ee,{get:function(){return u}}),O[u]=h,a(a.G+a.W+a.F*(h!=A),O),a(a.S,u,{BYTES_PER_ELEMENT:t}),a(a.S+a.F*o((function(){A.of.call(h,1)})),u,{from:be,of:Me}),"BYTES_PER_ELEMENT"in y||d(y,"BYTES_PER_ELEMENT",t),a(a.P,u,Le),H(u),a(a.P+a.F*ye,u,{set:He}),a(a.P+a.F*!R,u,Fe),r||y.toString==de||(y.toString=de),a(a.P+a.F*o((function(){new h(1).slice()})),u,{slice:De}),a(a.P+a.F*(o((function(){return[1,2].toLocaleString()!=new h([1,2]).toLocaleString()}))||!o((function(){y.toLocaleString.call([1,2])}))),u,{toLocaleString:we}),L[u]=R?N:b,r||R||d(y,he,b)}}else e.exports=function(){}},function(e,t,n){var r=n(121),i=n(0),o=n(47)("metadata"),a=o.store||(o.store=new(n(124))),s=function(e,t,n){var i=a.get(e);if(!i){if(!n)return;a.set(e,i=new r)}var o=i.get(t);if(!o){if(!n)return;i.set(t,o=new r)}return o};e.exports={store:a,map:s,has:function(e,t,n){var r=s(t,n,!1);return void 0!==r&&r.has(e)},get:function(e,t,n){var r=s(t,n,!1);return void 0===r?void 0:r.get(e)},set:function(e,t,n,r){s(n,r,!0).set(e,t)},keys:function(e,t){var n=s(e,t,!1),r=[];return n&&n.forEach((function(e,t){r.push(t)})),r},key:function(e){return void 0===e||"symbol"==typeof e?e:String(e)},exp:function(e){i(i.S,"Reflect",e)}}},function(e,t){e.exports=!1},function(e,t,n){var r=n(33)("meta"),i=n(4),o=n(14),a=n(8).f,s=0,c=Object.isExtensible||function(){return!0},u=!n(3)((function(){return c(Object.preventExtensions({}))})),p=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},l=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!c(e))return"F";if(!t)return"E";p(e)}return e[r].i},getWeak:function(e,t){if(!o(e,r)){if(!c(e))return!0;if(!t)return!1;p(e)}return e[r].w},onFreeze:function(e){return u&&l.NEED&&c(e)&&!o(e,r)&&p(e),e}}},function(e,t,n){var r=n(5)("unscopables"),i=Array.prototype;null==i[r]&&n(11)(i,r,{}),e.exports=function(e){i[r][e]=!0}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(100),i=n(73);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(21),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(1),i=n(101),o=n(73),a=n(72)("IE_PROTO"),s=function(){},c=function(){var e,t=n(70)("iframe"),r=o.length;for(t.style.display="none",n(74).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;r--;)delete c.prototype[o[r]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=c(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(100),i=n(73).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){"use strict";var r=n(2),i=n(8),o=n(7),a=n(5)("species");e.exports=function(e){var t=r[e];o&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(19),i=n(113),o=n(85),a=n(1),s=n(6),c=n(87),u={},p={};(t=e.exports=function(e,t,n,l,d){var f,h,E,g,A=d?function(){return e}:c(e),v=r(n,l,t?2:1),_=0;if("function"!=typeof A)throw TypeError(e+" is not iterable!");if(o(A)){for(f=s(e.length);f>_;_++)if((g=t?v(a(h=e[_])[0],h[1]):v(e[_]))===u||g===p)return g}else for(E=A.call(e);!(h=E.next()).done;)if((g=i(E,v,h.value,t))===u||g===p)return g}).BREAK=u,t.RETURN=p},function(e,t,n){var r=n(12);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t,n){var r=n(4);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){var r=n(8).f,i=n(14),o=n(5)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(20),i=n(5)("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:o?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,n){var r=n(0),i=n(24),o=n(3),a=n(76),s="["+a+"]",c=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),p=function(e,t,n){var i={},s=o((function(){return!!a[e]()||"​"!="​"[e]()})),c=i[e]=s?t(l):a[e];n&&(i[n]=c),r(r.P+r.F*s,"String",i)},l=p.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(u,"")),e};e.exports=p},function(e,t){e.exports={}},function(e,t,n){var r=n(18),i=n(2),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(29)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(20);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";var r=n(1);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){var r=n(1),i=n(10),o=n(5)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||null==(n=r(a)[o])?t:i(n)}},function(e,t,n){"use strict";e.exports={CONTEXT_ELEMENT_STATE:{REMOVED:-1,UPDATED:0,ADDED:1},PERMITTED_CONSUMER:{USER:{ANONYMOUS:"UserAnonymous",USER_AUTHENTICATED_ANY:"UserAuthenticatedAny",USER_AUTHENTICATED_SPECIFIC:"UserAuthenticatedSpecific"}},USER_TYPE:{NOT_SET:"",CUSTOMER:"customer",STAFF:"staff"},AUTHENTICATION_LEVEL:{CUSTOMER:{SIGN_IN:"default",ANONYMOUS:"urn:anonymous",PASSWORD:"urn:password",PIN_ANY:"urn:pin",PIQ:"urn:piq",CR_2FA:"urn:2fa.sms",RO_2FA:"urn:2fa"},CBA_STAFF:{SIGN_IN:"default",PASSWORD:"urn:cba.password",KERBEROS:"urn:cba.kerberos"},ANONYMOUS:"urn:anonymous"},ROUTES:{INSTRUMENT:"/security-core/ping?instrumentation-flush"},POST_AUTH_EVENT_ACTION:{RETURN:"Return",LAUNCH_OTHER:"LaunchOther",DELEGATE_TO_CONTAINER:"Delegate"},LAUNCH_TAGS:{CONTAINER_LAUNCH:"Launch",APP_LAUNCH:"ContainerLaunch"},CONTEXT_ELEMENT_ID:{APP:"app",CUSTOMER:"customer",ACCOUNT:"account"},REFRESH_REASON:{USER_INITIATED:"user",DATA_INVALIDATED:"datainvalidated"},DROPPED:{TOPIC:{FROM_CONTAINER:{INVOKE_CONTAINER_ACTION_RESPONSE:"helix.container.invokecontaineraction.response"},FROM_APP:{INVOKE_CONTAINER_ACTION:"helix.app.container.invokecontaineraction"}},MESSAGE_HANDLERS:{REQUEST_APP_TOKEN:"REQUEST_APP_TOKEN"}},DEPRECATED:{TOPIC:{FROM_APP:{APP_LAUNCH:"helix.app.launch"},FROM_CONTAINER:{APP_CLOSE_RESPONSE:"helix.container.appclose.response"}}},TOPIC:{FROM_CONTAINER:{LAUNCH_DATA_SET:"helix.container.launchdata.set",CONTEXT_SET:"helix.container.context.set",CONTEXT_FRAGMENT_SET:"helix.container.context.fragment.set",APP_SERVICE_REQUEST:"helix.container.appservice.request",APP_SERVICE_RESPONSE:"helix.container.appservice.response",CONTAINER_SERVICE_RESPONSE:"helix.container.containerservice.response",CONTAINER_MESSAGE_RESPONSE:"helix.container.containermessage.response",REFRESH:"helix.container.command.refresh",WINDOW_STATE_CHANGED:"helix.container.windowstate.changed",SECURITY_REFRESH_APP_TOKEN_RECEIVED:"helix.container.appsessiontoken.received",SECURITY_REFRESH_APP_TOKEN_REQUEST:"helix.container.appsessiontoken.request",SECURITY_USER_CONTEXT_CHANGED:"helix.container.securityUserContext.changed",SECURITY_KEEP_ALIVE:"helix.container.security.keepAlive",APP_CLOSE:"helix.container.app.close",DEVICE_EVENT:"helix.container.event.device",DEVICE_EVENT_BUTTON:"helix.container.event.device.button",NOTIFICATION:"helix.container.notification.message",ERROR_FRAMEWORK:"helix.container.error.framework",ERROR_JAVASCRIPT:"helix.container.error.javascript",ERROR:"helix.container.command.error",ALL:"helix.container.**",EXPOSES_LOAD_INTERFACE_GROUP:"helix.container.exposes.load.interfacegroup",EXPOSES_NAVIGATE_RESPONSE:"helix.container.exposes.navigate.response",INVOKES_NAVIGATE_RESPONSE:"helix.container.invokes.navigate.response",NAVIGATING_REQUEST:"helix.container.navigating.request"},FROM_APP:{LAUNCH_DATA_GET:"helix.app.launchdata.get",CONTEXT_UPDATE:"helix.app.context.update",CONTEXT_FRAGMENT_UPDATE:"helix.app.context.fragment.update",INVALIDATE_APP_DATA:"helix.app.data.invalidate",SHOW_CONTAINER_MESSAGE:"helix.app.container.showmessage",CANCEL_CONTAINER_MESSAGE:"helix.app.container.cancelmessage",ERROR_FRAMEWORK:"helix.app.error.framework",ERROR_JAVASCRIPT:"helix.app.error.javascript",UPDATE_PAGE_INFO:"helix.app.container.updatepageinfo",SHOW_WAIT_INDICATOR:"helix.app.container.showwaitindicator",HIDE_WAIT_INDICATOR:"helix.app.container.hidewaitindicator",WINDOW_STATE_CHANGE:"helix.app.windowstate.change",BINDINGS_GET:"helix.app.bindings.get",APP_READY:"helix.app.ready",INVOKES_NAVIGATE_REQUEST:"helix.app.invokes.navigate.request",APP_SERVICE_RESPONSE:"helix.app.appservice.response",APP_SERVICE_REQUEST:"helix.app.appservice.request",CONTAINER_SERVICE_REQUEST:"helix.app.containerservice.request",RESIZE_REQUEST:"helix.app.resize.request",SECURITY_REFRESH_APP_TOKEN:"helix.app.appsessiontoken.refresh",SECURITY_REFRESH_CONTAINER_TOKEN:"helix.app.containersessiontoken.refresh",SECURITY_SET_NEW_TOKEN:"helix.app.newtoken.set",SECURITY_STEP_UP:"helix.app.stepup",SECURITY_REAUTH:"helix.app.reauth",SECURITY_SIGNOUT:"helix.app.signout",SECURITY_SESSION_TERMINATED:"helix.app.security.session.terminated",SECURITY_SESSION_FAILED:"helix.app.security.session.failed",SECURITY_KEEP_ALIVE:"helix.app.security.keepAlive",SECURITY_CANCEL_NEW_TOKEN:"helix.app.newtoken.cancel",APP_CLOSING:"helix.app.closing",APP_CLOSED:"helix.app.closed",ALL:"helix.app.**",EXPOSES_LOADED:"helix.app.exposes.loaded",EXPOSES_NAVIGATE_REQUEST:"helix.app.exposes.navigate.request",NAVIGATING_RESPONSE:"helix.app.navigating.response"}},LAUNCH_DATA:{GET:"helix.launchdata.get",GET_WEB:"helix.launchdata.get.web",POST:"helix.launchdata.post"},SCHEMA:{MESSAGE_FROM_APP:"helix.message.fromApp",MESSAGE_FROM_APP_SERVICE_REQUEST:"helix.message.fromApp.serviceRequest",MESSAGE_FROM_CONTAINER:"helix.message.fromContainer",MESSAGE_FROM_CONTAINER_SERVICE_RESPONSE:"helix.message.fromContainer.serviceResponse",CONTEXT:"helix.schema.context",CONTEXT_ELEMENT:"helix.schema.contextElement",PROVIDES:"helix.schema.provides",PROVIDES_CONTEXT:"helix.schema.providesContext",UI_BINDING:"helix.schema.uiBinding",DATA_BINDING:"helix.schema.dataBinding",APP_BINDING:"helix.schema.appBinding",CONTAINER_SERVICE_BINDING:"helix.schema.containerServiceBinding",LAUNCH_INTERFACE:"helix.schema.launchInterface",LAUNCH_DATA_SERVICES:"helix.schema.launchDataServices",CONTAINER_MESSAGE:"helix.schema.containerMessage",CONTAINER_MESSAGE_BUTTON:"helix.schema.containerMessageButton",APP_DESCRIPTOR:"helix.schema.appDescriptor",ENVIRONMENT_MAP:"helix.schema.environmentMap",PAIRED_MESSAGE_ERROR:"helix.schema.pairedMessage.error",PAIRED_MESSAGE_FROM_APP:"helix.schema.pairedMessage.fromApp",PAIRED_MESSAGE_FROM_APP_REQUEST:"helix.schema.pairedMessage.fromApp.request",PAIRED_MESSAGE_FROM_APP_RESPONSE:"helix.schema.pairedMessage.fromApp.response",PAIRED_MESSAGE_FROM_CONTAINER:"helix.schema.pairedMessage.fromContainer",PAIRED_MESSAGE_FROM_CONTAINER_REQUEST:"helix.schema.pairedMessage.fromContainer.request",PAIRED_MESSAGE_FROM_CONTAINER_RESPONSE:"helix.schema.pairedMessage.fromContainer.response",FEATURES:{APP_EXPOSES_LOADED:"app_exposes_loaded",APP_EXPOSES_NAVIGATE:"app_exposes_navigate",APP_INVOKES_CLOSEANDREPLACE:"app_invokes_closeandreplace",APP_INVOKES_HIDECURRENT:"app_invokes_hidecurrent",APP_INVOKES_MODAL:"app_invokes_modal",APP_RESIZE:"app_resize",APP_SERVICE:"app_service",CONTAINER_MESSAGE:"container_message",DEVICE_BACK:"device_back",EXPOSES_LOADINTERFACE:"exposes_loadinterface",PUSH_NOTIFICATION:"push_notification",WAIT_BLOCKING:"wait_blocking",WAIT_NONBLOCKING:"wait_nonblocking",WINDOWSTATE_MAXIMISE:"windowstate_maximise",WINDOWSTATE_MINIMISE:"windowstate_minimise",WINDOWSTATE_RESTORE:"windowstate_restore"},NAVIGATE:{ERROR:{AUTHENTICATION_CANCELLED:"authentication-cancelled",AUTHENTICATION_FAILED:"authentication-failed",GENERAL_ERROR:"general-error",INTERFACE_NOT_FOUND:"interface-not-found",NAVIGATE_CANCELLED:"navigate-cancelled"}},WAIT_TYPE:{BACKGROUND:"background",MODAL:"modal"}},APP_SERVICE:{ERROR:{GENERAL:"general",INVALID_PARAMS:"invalid-params",INVALID_OPERATION:"invalid-operation",SERVICE_ERROR:"service-error",SERVICE_NOT_FOUND:"service-not-found",UNHANDLED:"unhandled"}},CONTAINER_SERVICE:{APP_LAUNCH:"AppLaunch",AUTH_APP_LAUNCH:"AuthAppLaunch",ERROR:{AUTHENTICATION_CANCELLED:"authentication-cancelled",AUTHENTICATOR_NOT_FOUND:"authenticator-not-found",HANDLER_NOT_FOUND:"handler-not-found",SERVICE_ERROR:"service-error",SERVICE_NOT_FOUND:"service-not-found"},GET_APP_CERTIFICATES:"GetAppCertificates",GET_GRANTABLE_CERTIFICATES:"GetGrantableCertificates",GRANT_APP_CERTIFICATE:"GrantAppCertificate",REVOKE_APP_CERTIFICATE:"RevokeAppCertificate"},BROADCAST:"*",NUM_VERSION_PARTS:4,LAUNCH_MODE:{MODAL:"modal",CLOSE_AND_REPLACE:"closeAndReplace",HIDE_CURRENT:"hideCurrent"},ERROR:{JAVASCRIPT:"JAVASCRIPT",FRAMEWORK:"FRAMEWORK"},SESSION_FAILED_REASON:{UNAUTHORIZED:"Unauthorized",EXPIRED:"SessionExpired",TAMPERED:"SessionTampered",GENERIC:"Generic"},AJAX_TIMEOUT_MS:9e4,BINDINGS:{APPEND:"append",PREPEND:"prepend",REPLACE:"replace"},DEVICE_EVENT:{BUTTON:{BACK:"back"}},AJAX:{CHARSET:"Charset",CORRELATION_ID:"correlationid",HELIX_CPV:"hxcpv",ENVIRONMENT_ID:"hxenv",DATA_SERVICE_ENDPOINTS:"dataserviceendpoints",ENVIRONMENT_MAPS:"hxmap",INSTRUMENTATION:"instrumentation",MESSAGES:"messages",HELIX_TOKEN:"hxtok",TIMEOUT:403,OK:200,READY_STATE_COMPLETE:4,ERROR:{NO_TOKEN:"nodata",NOT_OK:"notok",OPEN:"open",RESPONSE_PARSE:"responseparse",SECURITY_FAULT:"securityfault",SEND:"send",TIMEOUT:"timeout"}},TRANSPORT:{NONE:"none",PAGEBUS:"pagebus",NATIVE_IFRAME:"native_iframe",NATIVE_OBJECT:"native_object",NATIVE_POST_MESSAGE:"native_post_message",EVENTS:{ON_CONFIGURE_IFRAME:"onConfigureIframe",ON_CONNECT:"onConnect",ON_DISCONNECT:"onDisconnect",ON_ERROR:"onError",ON_MESSAGE_RECEIVED:"onMessageReceived",ON_WARNING:"onWarning"}},WINDOW_STATE:{MAXIMISE:"maximise",MINIMISE:"minimise",RESTORE:"restore"},PAIRED_MESSAGE:{ERROR:{GENERAL:"general",REQUEST_NOT_FOUND:"request-not-found",TIMEOUT:"timeout",REQUEST_NOT_PUBLISHED:"request-not-published"}},CONSUMER_PROTOCOL:{META_MEMBER_KEY_NAME:"__meta",ENVIRONMENT_MAPS_ENDPOINT_INDEX_SEPARATOR:"*",ENVIRONMENT_MAPS_ENDPOINT_GROUP_SEPARATOR:"!",TRANSFORM:{ERROR:{NOT_SUPPORTED:"transform-not-supported"}}},NAVIGATE:{ERROR:{AUTHENTICATION_CANCELLED:"authentication-cancelled",AUTHENTICATION_FAILED:"authentication-failed",AUTHENTICATOR_NOT_FOUND:"authenticator-not-found",GENERAL_ERROR:"general-error",INTERFACE_NOT_FOUND:"interface-not-found",NAVIGATE_CANCELLED:"navigate-cancelled",RETURN_VALUE_UNAVAILABLE:"return-value-unavailable"}},APP_CREATE:{ERROR:{LAUNCH_URL_NOT_FOUND:"launch-url-not-found",MANIFEST_NOT_FOUND:"manifest-not-found"}},NAVIGATE_TYPE:{APP_LAUNCH:"app-launch",EXPOSES_LOADED:"exposes-loaded"},VIEW_PORT:{APP_SERVICES_ID:"hx_viewport_app_services",MAIN_ID:"hx_viewport_main",MODAL_ID:"hx_viewport_modal",MODAL_CONTAINER_ID:"hx_viewport_modal_inner"},PROCESSORS:{AJAX_CORE_HEADERS:"ajax.core.headers",AJAX_CORE_SANITATION:"ajax.core.sanitation",APP_SESSION:"app.session",CONTAINER_SESSION:"container.session",INSTRUMENTATION:"instrumentation",INSTRUMENTATION_TIMER:"instrumentation.timer"}}},function(e,t,n){var r=n(15),i=n(6),o=n(35);e.exports=function(e){return function(t,n,a){var s,c=r(t),u=i(c.length),p=o(a,u);if(e&&n!=n){for(;u>p;)if((s=c[p++])!=s)return!0}else for(;u>p;p++)if((e||p in c)&&c[p]===n)return e||p||0;return!e&&-1}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(20);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(21),i=n(24);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),c=r(n),u=s.length;return c<0||c>=u?e?"":void 0:(o=s.charCodeAt(c))<55296||o>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):o:e?s.slice(c,c+2):a-56320+(o-55296<<10)+65536}}},function(e,t,n){var r=n(4),i=n(20),o=n(5)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},function(e,t,n){var r=n(5)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(44),i=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var o=n.call(e,t);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},function(e,t,n){"use strict";n(117);var r=n(12),i=n(11),o=n(3),a=n(24),s=n(5),c=n(91),u=s("species"),p=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),l=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var d=s(e),f=!o((function(){var t={};return t[d]=function(){return 7},7!=""[e](t)})),h=f?!o((function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[u]=function(){return n}),n[d](""),!t})):void 0;if(!f||!h||"replace"===e&&!p||"split"===e&&!l){var E=/./[d],g=n(a,d,""[e],(function(e,t,n,r,i){return t.exec===c?f&&!i?{done:!0,value:E.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}})),A=g[0],v=g[1];r(String.prototype,e,A),i(RegExp.prototype,d,2==t?function(e,t){return v.call(e,this,t)}:function(e){return v.call(e,this)})}}},function(e,t,n){var r=n(2).navigator;e.exports=r&&r.userAgent||""},function(e,t,n){"use strict";var r=n(2),i=n(0),o=n(12),a=n(41),s=n(30),c=n(40),u=n(39),p=n(4),l=n(3),d=n(58),f=n(43),h=n(77);e.exports=function(e,t,n,E,g,A){var v=r[e],_=v,I=g?"set":"add",S=_&&_.prototype,O={},y=function(e){var t=S[e];o(S,e,"delete"==e||"has"==e?function(e){return!(A&&!p(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return A&&!p(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof _&&(A||S.forEach&&!l((function(){(new _).entries().next()})))){var m=new _,C=m[I](A?{}:-0,1)!=m,T=l((function(){m.has(1)})),P=d((function(e){new _(e)})),N=!A&&l((function(){for(var e=new _,t=5;t--;)e[I](t,t);return!e.has(-0)}));P||((_=t((function(t,n){u(t,_,e);var r=h(new v,t,_);return null!=n&&c(n,g,r[I],r),r}))).prototype=S,S.constructor=_),(T||N)&&(y("delete"),y("has"),g&&y("get")),(N||C)&&y(I),A&&S.clear&&delete S.clear}else _=E.getConstructor(t,e,g,I),a(_.prototype,n),s.NEED=!0;return f(_,e),O[e]=_,i(i.G+i.W+i.F*(_!=v),O),A||E.setStrong(_,e,g),_}},function(e,t,n){for(var r,i=n(2),o=n(11),a=n(33),s=a("typed_array"),c=a("view"),u=!(!i.ArrayBuffer||!i.DataView),p=u,l=0,d="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<9;)(r=i[d[l++]])?(o(r.prototype,s,!0),o(r.prototype,c,!0)):p=!1;e.exports={ABV:u,CONSTR:p,TYPED:s,VIEW:c}},function(e,t,n){"use strict";e.exports=n(29)||!n(3)((function(){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete n(2)[e]}))},function(e,t,n){"use strict";var r=n(0);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){"use strict";var r=n(0),i=n(10),o=n(19),a=n(40);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,s,c=arguments[1];return i(this),(t=void 0!==c)&&i(c),null==e?new this:(n=[],t?(r=0,s=o(c,arguments[2],2),a(e,!1,(function(e){n.push(s(e,r++))}))):a(e,!1,n.push,n),new this(n))}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.modalIsBackgroundCloseable=t.getOpenModals=t.closeModalsByAppId=t.closeModalById=t.closeModal=t.openModal=t.getModalParentElement=t.initWidgetModal=void 0;var r=0,i=void 0;function o(e,t){if(e.removeChild(t),!a(e).length)if(e.classList.remove("open"),i&&i.activeAppInstances){var n=i.activeAppInstances.filter((function(e){return e.viewPort.isModal}));Array.isArray(n)&&0===n.length&&(document.body.style.overflow="")}else document.body.style.overflow="";return t.id}function a(e){return Array.from(e.querySelectorAll("iframe"))}t.initWidgetModal=function(e){i=e},t.getModalParentElement=function(){return document.getElementById("modal-dialog-stack")},t.openModal=function(e,t,n,i){var o=document.createElement("iframe");return o.id="widget-modal-"+r++,o.classList.add("modal"),o.setAttribute("data-app-id",t),o.setAttribute("data-background-closeable",""+(i||!1)),o.setAttribute("style","height:100%; width:100%; max-width:unset; max-height: unset;"),o.setAttribute("frameborder","0"),n&&(o.src=n),e.appendChild(o),e.classList.add("open"),document.body.style.overflow="hidden",o.id},t.closeModal=o,t.closeModalById=function(e,t){var n=e.querySelector("iframe#"+t);return n?o(e,n):null},t.closeModalsByAppId=function(e,t){for(var n=0,r=a(e).filter((function(e){return e.getAttribute("data-app-id")===t}));n<r.length;n++){o(e,r[n])}},t.getOpenModals=a,t.modalIsBackgroundCloseable=function(e){return"true"===e.getAttribute("data-background-closeable")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,n){this.publisherId=e,this.appId=t,this.appVersion=n||"*",this.versionIndependentId=this.publisherId+"."+this.appId;var r=this.appVersion&&"*"!==this.appVersion?".v"+this.appVersion:"";this.fqId=""+this.versionIndependentId+r}return e.prototype.isValid=function(){return!!this.publisherId&&!!this.appId&&!!this.appVersion},e.prototype.toString=function(){return this.fqId},e.versionsMatch=function(e,t){var n=!1,r=/^(v)/i,i=e||"*",o=t||"*";if(i=i.replace(r,""),o=o.replace(r,""),"*"===i||"*"===o)n=!0;else if(i===o)n=!0;else{var a=i.split("."),s=o.split("."),c=Math.max(a.length,s.length);if(a.length<c)for(var u=a.length;u<c;u++)a[u]="0";if(s.length<c)for(var p=s.length;p<c;p++)s[p]="0";for(var l=0,d=0;d<c&&!n;d++)if("*"===a[d]||"*"===s[d])n=!0;else{if(a[d]!==s[d])break;l++}l===c&&(n=!0)}return n},e}();t.AppDescriptor=r},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(4),i=n(2).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(2),i=n(18),o=n(29),a=n(99),s=n(8).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){var r=n(47)("keys"),i=n(33);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(2).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(4),i=n(1),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(19)(Function.call,n(16).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,n){var r=n(4),i=n(75).set;e.exports=function(e,t,n){var o,a=t.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(e,o),e}},function(e,t,n){"use strict";var r=n(21),i=n(24);e.exports=function(e){var t=String(i(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},function(e,t,n){"use strict";var r=n(29),i=n(0),o=n(12),a=n(11),s=n(46),c=n(82),u=n(43),p=n(17),l=n(5)("iterator"),d=!([].keys&&"next"in[].keys()),f=function(){return this};e.exports=function(e,t,n,h,E,g,A){c(n,t,h);var v,_,I,S=function(e){if(!d&&e in C)return C[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},O=t+" Iterator",y="values"==E,m=!1,C=e.prototype,T=C[l]||C["@@iterator"]||E&&C[E],P=T||S(E),N=E?y?S("entries"):P:void 0,R="Array"==t&&C.entries||T;if(R&&(I=p(R.call(new e)))!==Object.prototype&&I.next&&(u(I,O,!0),r||"function"==typeof I[l]||a(I,l,f)),y&&T&&"values"!==T.name&&(m=!0,P=function(){return T.call(this)}),r&&!A||!d&&!m&&C[l]||a(C,l,P),s[t]=P,s[O]=f,E)if(v={values:y?P:S("values"),keys:g?P:S("keys"),entries:N},A)for(_ in v)_ in C||o(C,_,v[_]);else i(i.P+i.F*(d||m),t,v);return v}},function(e,t,n){"use strict";var r=n(36),i=n(32),o=n(43),a={};n(11)(a,n(5)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(57),i=n(24);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(e))}},function(e,t,n){var r=n(5)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){var r=n(46),i=n(5)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){"use strict";var r=n(8),i=n(32);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){var r=n(44),i=n(5)("iterator"),o=n(46);e.exports=n(18).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(237);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){"use strict";var r=n(9),i=n(35),o=n(6);e.exports=function(e){for(var t=r(this),n=o(t.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,u=void 0===c?n:i(c,n);u>s;)t[s++]=e;return t}},function(e,t,n){"use strict";var r=n(31),i=n(116),o=n(46),a=n(15);e.exports=n(81)(Array,"Array",(function(e,t){this._t=a(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t,n){"use strict";var r,i,o=n(50),a=RegExp.prototype.exec,s=String.prototype.replace,c=a,u=(r=/a/,i=/b*/g,a.call(r,"a"),a.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),p=void 0!==/()??/.exec("")[1];(u||p)&&(c=function(e){var t,n,r,i,c=this;return p&&(n=new RegExp("^"+c.source+"$(?!\\s)",o.call(c))),u&&(t=c.lastIndex),r=a.call(c,e),u&&r&&(c.lastIndex=c.global?r.index+r[0].length:t),p&&r&&r.length>1&&s.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),e.exports=c},function(e,t,n){"use strict";var r=n(56)(!0);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){var r,i,o,a=n(19),s=n(106),c=n(74),u=n(70),p=n(2),l=p.process,d=p.setImmediate,f=p.clearImmediate,h=p.MessageChannel,E=p.Dispatch,g=0,A={},v=function(){var e=+this;if(A.hasOwnProperty(e)){var t=A[e];delete A[e],t()}},_=function(e){v.call(e.data)};d&&f||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return A[++g]=function(){s("function"==typeof e?e:Function(e),t)},r(g),g},f=function(e){delete A[e]},"process"==n(20)(l)?r=function(e){l.nextTick(a(v,e,1))}:E&&E.now?r=function(e){E.now(a(v,e,1))}:h?(o=(i=new h).port2,i.port1.onmessage=_,r=a(o.postMessage,o,1)):p.addEventListener&&"function"==typeof postMessage&&!p.importScripts?(r=function(e){p.postMessage(e+"","*")},p.addEventListener("message",_,!1)):r="onreadystatechange"in u("script")?function(e){c.appendChild(u("script")).onreadystatechange=function(){c.removeChild(this),v.call(e)}}:function(e){setTimeout(a(v,e,1),0)}),e.exports={set:d,clear:f}},function(e,t,n){var r=n(2),i=n(93).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,c="process"==n(20)(a);e.exports=function(){var e,t,n,u=function(){var r,i;for(c&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(c)n=function(){a.nextTick(u)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var p=s.resolve(void 0);n=function(){p.then(u)}}else n=function(){i.call(r,u)};else{var l=!0,d=document.createTextNode("");new o(u).observe(d,{characterData:!0}),n=function(){d.data=l=!l}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){"use strict";var r=n(10);function i(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new i(e)}},function(e,t,n){"use strict";var r=n(2),i=n(7),o=n(29),a=n(63),s=n(11),c=n(41),u=n(3),p=n(39),l=n(21),d=n(6),f=n(126),h=n(37).f,E=n(8).f,g=n(89),A=n(43),v=r.ArrayBuffer,_=r.DataView,I=r.Math,S=r.RangeError,O=r.Infinity,y=v,m=I.abs,C=I.pow,T=I.floor,P=I.log,N=I.LN2,R=i?"_b":"buffer",b=i?"_l":"byteLength",M=i?"_o":"byteOffset";function x(e,t,n){var r,i,o,a=new Array(n),s=8*n-t-1,c=(1<<s)-1,u=c>>1,p=23===t?C(2,-24)-C(2,-77):0,l=0,d=e<0||0===e&&1/e<0?1:0;for((e=m(e))!=e||e===O?(i=e!=e?1:0,r=c):(r=T(P(e)/N),e*(o=C(2,-r))<1&&(r--,o*=2),(e+=r+u>=1?p/o:p*C(2,1-u))*o>=2&&(r++,o/=2),r+u>=c?(i=0,r=c):r+u>=1?(i=(e*o-1)*C(2,t),r+=u):(i=e*C(2,u-1)*C(2,t),r=0));t>=8;a[l++]=255&i,i/=256,t-=8);for(r=r<<t|i,s+=t;s>0;a[l++]=255&r,r/=256,s-=8);return a[--l]|=128*d,a}function w(e,t,n){var r,i=8*n-t-1,o=(1<<i)-1,a=o>>1,s=i-7,c=n-1,u=e[c--],p=127&u;for(u>>=7;s>0;p=256*p+e[c],c--,s-=8);for(r=p&(1<<-s)-1,p>>=-s,s+=t;s>0;r=256*r+e[c],c--,s-=8);if(0===p)p=1-a;else{if(p===o)return r?NaN:u?-O:O;r+=C(2,t),p-=a}return(u?-1:1)*r*C(2,p-t)}function L(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function D(e){return[255&e]}function H(e){return[255&e,e>>8&255]}function F(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function U(e){return x(e,52,8)}function V(e){return x(e,23,4)}function k(e,t,n){E(e.prototype,t,{get:function(){return this[n]}})}function G(e,t,n,r){var i=f(+n);if(i+t>e[b])throw S("Wrong index!");var o=e[R]._b,a=i+e[M],s=o.slice(a,a+t);return r?s:s.reverse()}function j(e,t,n,r,i,o){var a=f(+n);if(a+t>e[b])throw S("Wrong index!");for(var s=e[R]._b,c=a+e[M],u=r(+i),p=0;p<t;p++)s[c+p]=u[o?p:t-p-1]}if(a.ABV){if(!u((function(){v(1)}))||!u((function(){new v(-1)}))||u((function(){return new v,new v(1.5),new v(NaN),"ArrayBuffer"!=v.name}))){for(var B,q=(v=function(e){return p(this,v),new y(f(e))}).prototype=y.prototype,W=h(y),K=0;W.length>K;)(B=W[K++])in v||s(v,B,y[B]);o||(q.constructor=v)}var Y=new _(new v(2)),X=_.prototype.setInt8;Y.setInt8(0,2147483648),Y.setInt8(1,2147483649),!Y.getInt8(0)&&Y.getInt8(1)||c(_.prototype,{setInt8:function(e,t){X.call(this,e,t<<24>>24)},setUint8:function(e,t){X.call(this,e,t<<24>>24)}},!0)}else v=function(e){p(this,v,"ArrayBuffer");var t=f(e);this._b=g.call(new Array(t),0),this[b]=t},_=function(e,t,n){p(this,_,"DataView"),p(e,v,"DataView");var r=e[b],i=l(t);if(i<0||i>r)throw S("Wrong offset!");if(i+(n=void 0===n?r-i:d(n))>r)throw S("Wrong length!");this[R]=e,this[M]=i,this[b]=n},i&&(k(v,"byteLength","_l"),k(_,"buffer","_b"),k(_,"byteLength","_l"),k(_,"byteOffset","_o")),c(_.prototype,{getInt8:function(e){return G(this,1,e)[0]<<24>>24},getUint8:function(e){return G(this,1,e)[0]},getInt16:function(e){var t=G(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=G(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return L(G(this,4,e,arguments[1]))},getUint32:function(e){return L(G(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return w(G(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return w(G(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){j(this,1,e,D,t)},setUint8:function(e,t){j(this,1,e,D,t)},setInt16:function(e,t){j(this,2,e,H,t,arguments[2])},setUint16:function(e,t){j(this,2,e,H,t,arguments[2])},setInt32:function(e,t){j(this,4,e,F,t,arguments[2])},setUint32:function(e,t){j(this,4,e,F,t,arguments[2])},setFloat32:function(e,t){j(this,4,e,V,t,arguments[2])},setFloat64:function(e,t){j(this,8,e,U,t,arguments[2])}});A(v,"ArrayBuffer"),A(_,"DataView"),s(_.prototype,a.VIEW,!0),t.ArrayBuffer=v,t.DataView=_},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.isDomainApiCall=1]="isDomainApiCall",e[e.isConsumerTokenRequest=2]="isConsumerTokenRequest",e[e.isIdentityTokenRequest=4]="isIdentityTokenRequest",e[e.usesConsumerToken=8]="usesConsumerToken"}(r=t.ProcessorFlagType||(t.ProcessorFlagType={}));var i=function(){function e(){}return e.hasFlag=function(e,t){return(e&t)===t},e.hasDomainApiCall=function(t){return e.hasFlag(t,r.isDomainApiCall)},e.hasConsumerTokenRequest=function(t){return e.hasFlag(t,r.isConsumerTokenRequest)},e.hasIdentityTokenRequest=function(t){return e.hasFlag(t,r.isIdentityTokenRequest)},e.usesConsumerToken=function(t){return e.hasFlag(t,r.usesConsumerToken)},e}();t.ProcessorFlag=i;var o=function(e,t){this.baseUrl=e,this.payload=t};t.MACSettings=o;var a=function(){function e(e,t,n,r,i,o,a,s,c,u){this.Log=e,this.TokenManager=t,this.MacService=n,this.State=r,this.SecurityOptions=i,this.Instrumentation=o,this.EncryptionParams=a,this.Uri=s,this.CommonUtils=c,this.HttpUtils=u,this.EncryptionParamsHeader="EncyptionParams",this.DATA_TOKEN_QS_PARAM_NAME="dtk",this.CONTAINER_TYPE_ID="ContainerTypeId",this.CORRELATION_ID="correlationid",this.ContainerLaunchDataToken="ContainerLaunchDataToken",this._log=e.register("hx.ajax.processors.asb.api"),this.requestProcessorAsbAjaxApi=this.requestProcessorAsbAjaxApi.bind(this),this.requestProcessorFilterAsbAjaxApi=this.requestProcessorFilterAsbAjaxApi.bind(this),this.requestProcessorAsbAjaxMacHeader=this.requestProcessorAsbAjaxMacHeader.bind(this),this.requestProcessorFilterAsbAjaxMacHeader=this.requestProcessorFilterAsbAjaxMacHeader.bind(this),this.requestProcessorFilterAsbConfiguration1=this.requestProcessorFilterAsbConfiguration1.bind(this),this.requestProcessorFilterAsbConfiguration2=this.requestProcessorFilterAsbConfiguration2.bind(this),this.requestProcessorAsbConfiguration=this.requestProcessorAsbConfiguration.bind(this),this.successProcessorFilterContainerSession=this.successProcessorFilterContainerSession.bind(this),this.requestProcessorAsbCorrelation=this.requestProcessorAsbCorrelation.bind(this),this.requestProcessorAsbCsrf=this.requestProcessorAsbCsrf.bind(this),this.requestProcessorFilterAsbCsrf=this.requestProcessorFilterAsbCsrf.bind(this),this.requestProcessorFilterAsbGetUrl=this.requestProcessorFilterAsbGetUrl.bind(this),this.requestProcessorAsbGetUrl=this.requestProcessorAsbGetUrl.bind(this),this.requestProcessorFilterAsbMacDebugAndService=this.requestProcessorFilterAsbMacDebugAndService.bind(this),this.requestProcessorAsbMacDebug=this.requestProcessorAsbMacDebug.bind(this),this.successProcessorFilterAsbMacService=this.successProcessorFilterAsbMacService.bind(this),this.requestProcessorAsbMacService=this.requestProcessorAsbMacService.bind(this),this.successProcessorAsbMacService=this.successProcessorAsbMacService.bind(this),this.requestProcessorFilterAsbInstrumentation=this.requestProcessorFilterAsbInstrumentation.bind(this),this.requestProcessorAsbInstrumentation=this.requestProcessorAsbInstrumentation.bind(this),this.requestProcessorFilterInstrumentation=this.requestProcessorFilterInstrumentation.bind(this)}return e.prototype.requestProcessorAsbAjaxApi=function(e){var t=e.getRequest();t.headers[Helix.Constants.AJAX.API_FEATURE]="",t.headers[Helix.Constants.AJAX.API_CONSUMER]="";var n=this.TokenManager.get(Helix.Container.TOKEN_TYPE.CONSUMER_TOKEN);if(t.meta.jwtfeatureid&&e.setHeader(Helix.Constants.AJAX.API_FEATURE,t.meta.jwtfeatureid),!n||!n.token)throw new Error("hx.ajax.processors.asb.api asbAjaxProcessorModuleAPI");e.setHeader(Helix.Constants.AJAX.API_CONSUMER,"Bearer "+n.token)},e.prototype.requestProcessorFilterAsbAjaxApi=function(e){var t=e.getRequest();return t.meta&&(i.hasDomainApiCall(t.meta.processorFlags)||i.usesConsumerToken(t.meta.processorFlags))},e.prototype.requestProcessorAsbAjaxMacHeader=function(e){var t=e.getRequest(),n=this.TokenManager.get(Helix.Container.TOKEN_TYPE.CONSUMER_TOKEN);if(!n||!n.token)throw new Error("hx.ajax.processors.asb.api asbAjaxProcessorModuleAPI");var r=this.MacService.generateMac(t.meta.macing.baseUrl,t.meta.macing.payload,n);r&&r.macHeader&&e.setHeader(Helix.Constants.AJAX.ASB_TOKEN,r.macHeader)},e.prototype.requestProcessorFilterAsbAjaxMacHeader=function(e){var t=e.getRequest();return t.meta&&i.hasDomainApiCall(t.meta.processorFlags)},e.prototype.requestProcessorFilterAsbConfiguration1=function(e){var t=e.getRequest();return!(t.meta&&i.hasIdentityTokenRequest(t.meta.processorFlags))},e.prototype.requestProcessorFilterAsbConfiguration2=function(e){var t=e.getRequest();return t.url.indexOf(this.SecurityOptions.ping)>=0||t.url.indexOf(this.SecurityOptions.getAuthTokens)>=0||t.url.endsWith(this.SecurityOptions.asbGetTokens)||t.url.endsWith(this.SecurityOptions.getAuthToken)},e.prototype.requestProcessorAsbConfiguration=function(e){var t=e.getRequest(),n=(new this.Uri).search[this.DATA_TOKEN_QS_PARAM_NAME]||"";n&&(t.headers[this.ContainerLaunchDataToken]=n),t.headers[this.CONTAINER_TYPE_ID]=Helix.Container.getContainerId()},e.prototype.successProcessorFilterContainerSession=function(e){var t=e.getUrl();return Helix.Container.getRelativeAjaxUrl(t)===this.SecurityOptions.asbGetTokens},e.prototype.requestProcessorAsbCorrelation=function(e){var t=Helix.Instrumentation.getCorrelationId();e.setHeader(Helix.Constants.AJAX.CORRELATION_ID,t),e.getRequest().url.endsWith(this.SecurityOptions.asbGetContainerSettings)||e.setHeader(Helix.Constants.AJAX.XCORRELATION_ID,t);var n=this.CommonUtils.getCookie(Helix.Constants.AJAX.PLATFORM_SESSION_ID);n&&e.setHeader(Helix.Constants.AJAX.USERSESSION_CORRELATIONID,n)},e.prototype.requestProcessorAsbCsrf=function(e){var t=this.CommonUtils.getCookie("CsrfToken");this._log("getcookie.CsrfToken.info",t),t&&e.setHeader(Helix.Constants.AJAX.CSRF_TOKEN,t)},e.prototype.requestProcessorFilterAsbCsrf=function(e){var t=e.getRequest();return t.meta&&!i.hasIdentityTokenRequest(t.meta.processorFlags)||t.url.endsWith(this.SecurityOptions.asbGetContainerSettings)},e.prototype.requestProcessorFilterAsbGetUrl=function(e){var t=e.getRequest();return!(t.url.startsWith(this.State.ajaxUrl)||i.hasIdentityTokenRequest(t.meta.processorFlags))},e.prototype.requestProcessorAsbGetUrl=function(e){var t=e.getRequest(),n=Helix.Container.getContainerAppBindings();n&&n.userDetail&&n.userDetail.tokenisedCif&&(t.url=t.url.replace(/\/cif\//,"/"+n.userDetail.tokenisedCif+"/").replace(/\/cif$/,"/"+n.userDetail.tokenisedCif+"/"))},e.prototype.requestProcessorFilterAsbMacDebugAndService=function(e){var t=e.getRequest();return t.url.endsWith(this.SecurityOptions.getAuthToken)||t.url.endsWith(this.SecurityOptions.asbGetTokens)||t.url.indexOf(this.SecurityOptions.ping)>=0||t.url.endsWith(this.SecurityOptions.getAuthTokens)||t.meta&&(i.hasConsumerTokenRequest(t.meta.processorFlags)||i.hasDomainApiCall(t.meta.processorFlags))},e.prototype.requestProcessorAsbMacDebug=function(e){(this.HttpUtils.isDev()||this.HttpUtils.isFST()||this.HttpUtils.isQA())&&this.MacService&&this.MacService.macingParameters&&e.setHeader(Helix.Constants.PROCESSORS.ASB_MAC_DEBUG,"macsecret "+this.MacService.macingParameters.macSecret+" jti "+this.MacService.macingParameters.jti)},e.prototype.successProcessorFilterAsbMacService=function(e){var t=e.getResponse().request;return t.meta&&i.hasDomainApiCall(t.meta.processorFlags)},e.prototype.requestProcessorAsbMacService=function(e){e.setHeader(this.EncryptionParamsHeader,this.EncryptionParams.encrypted)},e.prototype.successProcessorAsbMacService=function(e){var t=e.getResponse();t.request;if(!this.MacService.validateApiResponse(t).isValid)throw new Error("hx.ajax.processors.asb.api validateApiResponse")},e.prototype.requestProcessorFilterAsbInstrumentation=function(e){var t=e.getRequest();return-1!==t.url.indexOf(Helix.Constants.ROUTES.INSTRUMENT,t.url.length-Helix.Constants.ROUTES.INSTRUMENT.length)},e.prototype.requestProcessorAsbInstrumentation=function(e){var t=this.Instrumentation.getData();t&&t.length>0&&(e.getRequest().data=JSON.stringify(t))},e.prototype.requestProcessorFilterInstrumentation=function(e){var t=e.getRequest(),n=new this.Uri(t.url).baseUri;return n.startsWith(this.State.ajaxUrl)&&!n.endsWith(Helix.Constants.ROUTES.INSTRUMENT)&&!n.endsWith(Helix.Constants.ROUTES.TOKENS)&&!n.endsWith(this.SecurityOptions.getAuthTokens)},e}();t.AsbAjaxProcessorModule=a},function(e,t,n){e.exports=!n(7)&&!n(3)((function(){return 7!=Object.defineProperty(n(70)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){t.f=n(5)},function(e,t,n){var r=n(14),i=n(15),o=n(53)(!1),a=n(72)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),c=0,u=[];for(n in s)n!=a&&r(s,n)&&u.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~o(u,n)||u.push(n));return u}},function(e,t,n){var r=n(8),i=n(1),o=n(34);e.exports=n(7)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,c=0;s>c;)r.f(e,n=a[c++],t[n]);return e}},function(e,t,n){var r=n(15),i=n(37).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return a.slice()}}(e):i(r(e))}},function(e,t,n){"use strict";var r=n(7),i=n(34),o=n(54),a=n(49),s=n(9),c=n(48),u=Object.assign;e.exports=!u||n(3)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r}))?function(e,t){for(var n=s(e),u=arguments.length,p=1,l=o.f,d=a.f;u>p;)for(var f,h=c(arguments[p++]),E=l?i(h).concat(l(h)):i(h),g=E.length,A=0;g>A;)f=E[A++],r&&!d.call(h,f)||(n[f]=h[f]);return n}:u},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){"use strict";var r=n(10),i=n(4),o=n(106),a=[].slice,s={},c=function(e,t,n){if(!(t in s)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";s[t]=Function("F,a","return new F("+r.join(",")+")")}return s[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=a.call(arguments,1),s=function(){var r=n.concat(a.call(arguments));return this instanceof s?c(t,r.length,r):o(t,r,e)};return i(t.prototype)&&(s.prototype=t.prototype),s}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(2).parseInt,i=n(45).trim,o=n(76),a=/^[-+]?0[xX]/;e.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(e,t){var n=i(String(e),3);return r(n,t>>>0||(a.test(n)?16:10))}:r},function(e,t,n){var r=n(2).parseFloat,i=n(45).trim;e.exports=1/r(n(76)+"-0")!=-1/0?function(e){var t=i(String(e),3),n=r(t);return 0===n&&"-"==t.charAt(0)?-0:n}:r},function(e,t,n){var r=n(20);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(t);return+e}},function(e,t,n){var r=n(4),i=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&i(e)===e}},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,n){var r=n(79),i=Math.pow,o=i(2,-52),a=i(2,-23),s=i(2,127)*(2-a),c=i(2,-126);e.exports=Math.fround||function(e){var t,n,i=Math.abs(e),u=r(e);return i<c?u*(i/c/a+1/o-1/o)*c*a:(n=(t=(1+a/o)*i)-(t-i))>s||n!=n?u*(1/0):u*n}},function(e,t,n){var r=n(1);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(10),i=n(9),o=n(48),a=n(6);e.exports=function(e,t,n,s,c){r(t);var u=i(e),p=o(u),l=a(u.length),d=c?l-1:0,f=c?-1:1;if(n<2)for(;;){if(d in p){s=p[d],d+=f;break}if(d+=f,c?d<0:l<=d)throw TypeError("Reduce of empty array with no initial value")}for(;c?d>=0:l>d;d+=f)d in p&&(s=t(s,p[d],d,u));return s}},function(e,t,n){"use strict";var r=n(9),i=n(35),o=n(6);e.exports=[].copyWithin||function(e,t){var n=r(this),a=o(n.length),s=i(e,a),c=i(t,a),u=arguments.length>2?arguments[2]:void 0,p=Math.min((void 0===u?a:i(u,a))-c,a-s),l=1;for(c<s&&s<c+p&&(l=-1,c+=p-1,s+=p-1);p-- >0;)c in n?n[s]=n[c]:delete n[s],s+=l,c+=l;return n}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r=n(91);n(0)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(e,t,n){n(7)&&"g"!=/./g.flags&&n(8).f(RegExp.prototype,"flags",{configurable:!0,get:n(50)})},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(1),i=n(4),o=n(95);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r=n(122),i=n(42);e.exports=n(62)("Map",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=r.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(i(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,n){"use strict";var r=n(8).f,i=n(36),o=n(41),a=n(19),s=n(39),c=n(40),u=n(81),p=n(116),l=n(38),d=n(7),f=n(30).fastKey,h=n(42),E=d?"_s":"size",g=function(e,t){var n,r=f(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,u){var p=e((function(e,r){s(e,p,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[E]=0,null!=r&&c(r,n,e[u],e)}));return o(p.prototype,{clear:function(){for(var e=h(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[E]=0},delete:function(e){var n=h(this,t),r=g(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[E]--}return!!r},forEach:function(e){h(this,t);for(var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!g(h(this,t),e)}}),d&&r(p.prototype,"size",{get:function(){return h(this,t)[E]}}),p},def:function(e,t,n){var r,i,o=g(e,t);return o?o.v=n:(e._l=o={i:i=f(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[E]++,"F"!==i&&(e._i[i]=o)),e},getEntry:g,setStrong:function(e,t,n){u(e,t,(function(e,n){this._t=h(e,t),this._k=n,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?p(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,p(1))}),n?"entries":"values",!n,!0),l(t)}}},function(e,t,n){"use strict";var r=n(122),i=n(42);e.exports=n(62)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";var r,i=n(2),o=n(26)(0),a=n(12),s=n(30),c=n(103),u=n(125),p=n(4),l=n(42),d=n(42),f=!i.ActiveXObject&&"ActiveXObject"in i,h=s.getWeak,E=Object.isExtensible,g=u.ufstore,A=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},v={get:function(e){if(p(e)){var t=h(e);return!0===t?g(l(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return u.def(l(this,"WeakMap"),e,t)}},_=e.exports=n(62)("WeakMap",A,v,u,!0,!0);d&&f&&(c((r=u.getConstructor(A,"WeakMap")).prototype,v),s.NEED=!0,o(["delete","has","get","set"],(function(e){var t=_.prototype,n=t[e];a(t,e,(function(t,i){if(p(t)&&!E(t)){this._f||(this._f=new r);var o=this._f[e](t,i);return"set"==e?this:o}return n.call(this,t,i)}))})))},function(e,t,n){"use strict";var r=n(41),i=n(30).getWeak,o=n(1),a=n(4),s=n(39),c=n(40),u=n(26),p=n(14),l=n(42),d=u(5),f=u(6),h=0,E=function(e){return e._l||(e._l=new g)},g=function(){this.a=[]},A=function(e,t){return d(e.a,(function(e){return e[0]===t}))};g.prototype={get:function(e){var t=A(this,e);if(t)return t[1]},has:function(e){return!!A(this,e)},set:function(e,t){var n=A(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=f(this.a,(function(t){return t[0]===e}));return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,o){var u=e((function(e,r){s(e,u,t,"_i"),e._t=t,e._i=h++,e._l=void 0,null!=r&&c(r,n,e[o],e)}));return r(u.prototype,{delete:function(e){if(!a(e))return!1;var n=i(e);return!0===n?E(l(this,t)).delete(e):n&&p(n,this._i)&&delete n[this._i]},has:function(e){if(!a(e))return!1;var n=i(e);return!0===n?E(l(this,t)).has(e):n&&p(n,this._i)}}),u},def:function(e,t,n){var r=i(o(t),!0);return!0===r?E(e).set(t,n):r[e._i]=n,e},ufstore:E}},function(e,t,n){var r=n(21),i=n(6);e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=i(t);if(t!==n)throw RangeError("Wrong length!");return n}},function(e,t,n){var r=n(37),i=n(54),o=n(1),a=n(2).Reflect;e.exports=a&&a.ownKeys||function(e){var t=r.f(o(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t,n){"use strict";var r=n(55),i=n(4),o=n(6),a=n(19),s=n(5)("isConcatSpreadable");e.exports=function e(t,n,c,u,p,l,d,f){for(var h,E,g=p,A=0,v=!!d&&a(d,f,3);A<u;){if(A in c){if(h=v?v(c[A],A,n):c[A],E=!1,i(h)&&(E=void 0!==(E=h[s])?!!E:r(h)),E&&l>0)g=e(t,n,h,o(h.length),g,l-1)-1;else{if(g>=9007199254740991)throw TypeError();t[g]=h}g++}A++}return g}},function(e,t,n){var r=n(6),i=n(78),o=n(24);e.exports=function(e,t,n,a){var s=String(o(e)),c=s.length,u=void 0===n?" ":String(n),p=r(t);if(p<=c||""==u)return s;var l=p-c,d=i.call(u,Math.ceil(l/u.length));return d.length>l&&(d=d.slice(0,l)),a?d+s:s+d}},function(e,t,n){var r=n(7),i=n(34),o=n(15),a=n(49).f;e.exports=function(e){return function(t){for(var n,s=o(t),c=i(s),u=c.length,p=0,l=[];u>p;)n=c[p++],r&&!a.call(s,n)||l.push(e?[n,s[n]]:s[n]);return l}}},function(e,t,n){var r=n(44),i=n(132);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,n){var r=n(40);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t){e.exports=Math.scale||function(e,t,n,r,i){return 0===arguments.length||e!=e||t!=t||n!=n||r!=r||i!=i?NaN:e===1/0||e===-1/0?e:(e-t)*(i-r)/(n-t)+r}},function(e,t,n){"use strict";e.exports=function(){var e,t=/(\{\{[^}]+\}\}|\{[^}]+\})/g;function n(e){return/^[0-9]+$/.test(e)}function r(e){if(null===e)return"[null]";if(void 0===e)return"[undefined]";var t=e.toString();return 0===t.indexOf("[object ")?"["+t.substring(8,t.length-1)+"]":t}function i(e,t){if(null==e)return{found:!1,value:null};for(var n=t.split("."),i=null,o=!0,a=0;a<n.length;a++){var s=n[a];if(!e.hasOwnProperty(s)){o=!1;break}e=i=e[s]}return{found:o,value:o?r(i):null}}function o(e,t){var n=[],r=[];!function e(t,i){if("object"!=typeof t||null===t)return null;var o=function(e){for(var t=0;t<n.length;t++)if(e===n[t].o)return n[t];return null}(t);if(o&&!o.completed)return r.push({path:i,original:t}),"$ref:"+o.path;o||(o={o:t,completed:!1,path:i},n.push(o));for(var a=Object.keys(t),s=0;s<a.length;s++){var c=a[s],u=e(t[c],i?i+"."+c:c);u&&(t[c]=u)}return o.completed=!0,null}(e,"");var i=t(e);return r.forEach((function(t){var n=e,r=t.path.split("."),i=r.pop();r.forEach((function(e){return n=n[e]})),n[i]=t.original})),i}return{cleanString:function(e,t){for(var n="",r=0;r<e.length;r++)e.charCodeAt(r)<=127?n+=e.charAt(r):(n+="&#"+e.charCodeAt(r),t instanceof Array&&t.push(r));return n},extend:function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r,i,o,a,s,c,u=t[0]||{},p=1,l=t.length,d=!1;for("boolean"==typeof u&&(d=u,u=t[p]||{},p++),"object"!=typeof u&&"function"!=typeof u&&(u={}),p===l&&(u=this,p--);p<l;p++)if(null!=(r=t[p]))for(i in r)o=u[i],u!==(a=r[i])&&(d&&a&&("object"==typeof a&&!(a instanceof Array)||(s=a instanceof Array))?(s?(s=!1,c=o&&o instanceof Array?o:[]):c=!o||"object"!=typeof o||o instanceof Array?{}:o,u[i]=e(d,c,a)):void 0!==a&&(u[i]=a));return u},format:function(e){for(var o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];return e||""===e?e.replace(t,(function(e){if(0===e.indexOf("{{"))return e.substring(1,e.length-1);var t,a=e.substring(1,e.length-1),s=a.split(".");if(n(s[0])){var c=Number(s[0]);if(c>=o.length)return e;if(1===s.length)return r(o[c]);t=i(o[c],a.substr(a.indexOf(".")+1))}else t=i(o[0],a);return t.found?t.value:e})):null},getFunctionSignature:function(e){if("function"!=typeof e)return null===e?"null":typeof e;var t=e.toString().match(/function ([a-z0-9_]+)/i);return t?t[1]:"anonymous"},getLocationBasePath:function(t){return e||(e=function(){var e,t="",n=window.location,r=document.getElementsByTagName("base");if(r.length>0){var i=r[0].href;i&&(t=i.replace(/\/$/,""))}if(!t){var o=n.pathname.split("/");o.length>0&&o[o.length-1].match(/\.[a-z]{3,5}$/i)&&(o=o.slice(0,o.length-1)),o=o.length>1?o:[""],t=n.protocol+"//"+n.host+o.join("/")}return e=t.replace(n.protocol+"//"+n.host,""),{absolute:t,relative:e}}()),t?e.relative:e.absolute},isType:function(e,t){if(null===e)return!!t.match(/null/i);if(void 0===e)return!!t.match(/undefined/i);var n=new RegExp(t+"]$","i");return!!Object.prototype.toString.call(e).match(n)},noop:function(){},parseUrl:function(e){var t=document.createElement("a");t.href=e,t.href=t.href;var n=(t.pathname.match(/([^\/?#]+)$/i)||[null,""])[1],r=(n.match(/\.([^\.]+)$/)||[null,""])[1],i=t.pathname.replace(/^([^\/])/,"/$1"),o=t.pathname.replace(/^\//,"").split("/"),a=i.substr(0,i.length-n.length),s=t.port?t.port.toString():"";return{source:e,protocol:t.protocol.replace(":",""),host:t.hostname,port:"0"===s?"":s,query:t.search,params:function(){for(var e,n={},r=t.search.replace(/^\?/,"").split("&"),i=r.length,o=0;o<i;o++)r[o]&&(n[(e=r[o].split("="))[0]]||(n[e[0]]=decodeURIComponent(e[1].replace(/\+/g," "))));return n}(),file:n,extension:r,hash:t.hash.replace("#",""),path:i,relative:(t.href.match(/tps?:\/\/[^\/]+(.+)/)||[null,""])[1],segments:o,origin:t.protocol+"//"+t.hostname+(""!==s&&"80"!==s&&"443"!==s&&"0"!==s?":"+s:""),folder:a}},resolveURL:function(e,t){var n=document.implementation.createHTMLDocument(""),r=n.createElement("base");r.setAttribute("href",e);var i=n.createElement("a");return i.setAttribute("href",t),n.head.appendChild(r),n.body.appendChild(i),i.href},safeStringify:function(e,t,n){return o(e,(function(e){return JSON.stringify(e,t,n)}))},trim:function(e){return(""+e).replace(/^\s+|\s+$/,"")}}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){if(!t)throw new Error("ArrayMap must be instantiated with an itemPrimaryKey");this._array=e||[],this._itemPrimaryKey=t,this._hashAllItems()}return e.prototype.append=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach((function(t,n){e._assetItemOkToAdd(t),e._array.push(t),e._hashItem(t)}))},e.prototype.clear=function(){this._array.length=0,this._hash={}},e.prototype.count=function(){return this._array.length},e.prototype.filter=function(e){return this._array.filter(e)},e.prototype.firstItem=function(){return this._array[0]},e.prototype.find=function(e){return this.filter(e)[0]},e.prototype.forEach=function(e){for(var t=0;t<this._array.length;t++)if(!1===e(this._array[t],t))return},e.prototype.fromArray=function(e){this._array=e,this._hashAllItems()},e.prototype.getItemByKey=function(e){return this._hash[e]},e.prototype.getItemByIndex=function(e){return this._array[e]},e.prototype.hasItemWithKey=function(e){return!!this._hash[e]},e.prototype.indexOf=function(e){return this._array.indexOf(e)},e.prototype.insertAt=function(e,t){this._assetItemOkToAdd(e),this._array.splice(t,0,e),this._hashItem(e)},e.prototype.isEmpty=function(){return!this.count()},e.prototype.keys=function(){return Object.keys(this._hash)},e.prototype.lastItem=function(){return this._array[this._array.length-1]},e.prototype.map=function(e){return this._array.map(e)},e.prototype.peek=function(){return 0===this._array.length?void 0:this._array[this._array.length-1]},e.prototype.pop=function(){var e=this._array.pop();return e&&delete this._hash[e[this._itemPrimaryKey]],e},e.prototype.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.append.apply(this,e),this._array.length},e.prototype.remove=function(e){var t=this.indexOf(e);if(-1===t)throw new Error('ArrayMap item with primary key "'+e[this._itemPrimaryKey]+'" not found');this._array.splice(t,1),delete this._hash[e[this._itemPrimaryKey]]},e.prototype.toArray=function(){var e=[];return e.push.apply(e,this._array),e},e.prototype.toDictionary=function(){var e={};return this.forEach(function(t){e[t[this._itemPrimaryKey]]=t}.bind(this)),e},e.prototype._hashAllItems=function(){var e;this._hash={};for(var t=0;t<this._array.length;t++)e=this._array[t],this._hash[e[this._itemPrimaryKey]]=e},e.prototype._hashItem=function(e){this._hash[e[this._itemPrimaryKey]]=e},e.prototype._assetItemOkToAdd=function(e){if(!e.hasOwnProperty(this._itemPrimaryKey))throw new Error('Item does contain required primary key "'+this._itemPrimaryKey+'"');if(this.hasItemWithKey(e[this._itemPrimaryKey]))throw new Error('Item in ArrayMap already exists with same primary key "'+e[this._itemPrimaryKey]+'"')},e}();t.ArrayMap=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(134),i=function(){function e(e,t,n){this.ns=e,this.type=t,this.data=n}return e.prototype.clone=function(){return r.isType(this.data,"object")?new e(this.ns,this.type,r.extend(!0,{},this.data)):new e(this.ns,this.type,this.data)},e.prototype.getKey=function(){return e.getKey(this.ns,this.type)},e.prototype.toString=function(){return this.getKey()+"-"+JSON.stringify(this.data)},e.getKey=function(e,t){return e+"::"+t},e}();t.ContextElement=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.isLocalHost=function(e){return void 0===e&&(e=window.location.href),/^(http(s)?:\/\/)?(localhost)|(127.0.0.1)|(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})/.test(e)},e.isDev=function(t){return void 0===t&&(t=window.location.href),e.isLocalHost(t)},e.isFST=function(t){return void 0===t&&(t=window.location.href),/^https:\/\/webappisamdev/.test(t)||e.isVirtual(t)},e.isVirtual=function(e){return void 0===e&&(e=window.location.href),/^https:\/\/virtualonline/.test(e)},e.isQA=function(e){return void 0===e&&(e=window.location.href),/^https:\/\/qaonline.asb.co.nz/.test(e)},e.isProd=function(e){return void 0===e&&(e=window.location.href),/^https:\/\/online.asb.co.nz/.test(e)},e.fixedEncodeURIComponent=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16)}))},e.tryToGetParamLowerCase=function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&n.toLowerCase()===t.toLowerCase())return e[n]},e.patternMatchesUrl=function(e,t){var n=e.replace(/\*/g,"");return e.startsWith("*")?e.endsWith("*")?t.indexOf(n)>0&&!t.endsWith(n):t.endsWith(n):t.startsWith(n)},e.getQsParamsFrom=function(e){var t="";return Object.keys(e).map((function(n){var r=e[n];0===n.indexOf("_")&&(t.length>0&&(t+="&"),t+=n.replace("_","")+"="+r)})),t},e}();t.HttpUtils=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAppInstanceGlobalViewport=t.GlobalViewportHandler=void 0;var r=function(){function e(e,t,n){this.Constants=e,this.ViewPortManager=t,this.HelixContainer=n,e.VIEW_PORT.ASB_GLOBAL="hx_viewport_asb_global"}return e.prototype.onProvideAppViewPortId=function(e,t,n,r){e&&e.actionParams&&!0===e.actionParams.isGlobal?t(this.Constants.VIEW_PORT.ASB_GLOBAL):r()},e.prototype.onCreateViewports=function(e,t,n,r){if(!this.ViewPortManager.getElementById(this.Constants.VIEW_PORT.ASB_GLOBAL))throw new Error("viewport element with id #"+this.Constants.VIEW_PORT.ASB_GLOBAL+" not found, is required");this.HelixContainer.registerViewPort(this.Constants.VIEW_PORT.ASB_GLOBAL,{element:this.ViewPortManager.getElementById(this.Constants.VIEW_PORT.ASB_GLOBAL)}),r(t)},e}();t.GlobalViewportHandler=r,t.isAppInstanceGlobalViewport=function(e){return e&&e.viewPort&&"hx_viewport_asb_global"===e.viewPort.id}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCookie=function(e){var t=document.cookie.match(new RegExp("(^|\\s|;)"+e+"=([^;]+)"));return t?t[2]:""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setCookie=function(e,t,n,r){var i="";if(r)document.cookie=e+"="+t+";expires="+n+";domain=asb.co.nz;path=/";else{if(n){var o=new Date;o.setTime(o.getTime()+60*n*1e3),i="; expires="+o.toUTCString()+";"}document.cookie=e+"="+(t||"")+i+"; path=/"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getQueryParam=function(e,t){void 0===t&&(t=window.location.href);var n=decodeURI(t).replace(/%25/g,"%").replace(/[;<>]|(%3[BCE])/g,"").toLowerCase(),r=n.indexOf("?");if(-1!==r)return n.slice(r+1).split("&").filter((function(e){return-1!==e.indexOf("=")})).map((function(e){var t=e.trim().split("=");return{key:t[0],value:t[1]}})).filter((function(t){return t.key==e.toLowerCase()})).map((function(e){return e.value}))[0]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.guid=function(){return"".concat(this.s4(),this.s4(),"-",this.s4(),"-",this.s4(),"-",this.s4(),"-",this.s4(),this.s4(),this.s4())},e.getRandomInt=function(e,t,n){return Math.floor(Math.random()*(t-e+(n?1:0)))+e},e.s4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},e.psuedoRandomString=function(e,t,n){var r=Math.random().toString(e);return t&&n?r.substr(t,n):r.substr(t||0)},e.psuedoRandomString16=function(){return""+this.s4()+this.s4()+this.s4()+this.s4()},e.psuedoRandomString24=function(){return""+this.s4()+this.s4()+this.s4()+this.s4()+this.s4()+this.s4()},e}();t.RandomUtils=r},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(450),t),i(n(451),t),i(n(452),t),i(n(453),t),i(n(454),t),i(n(456),t),i(n(457),t),i(n(458),t)},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(459)),r(n(97)),r(n(460)),r(n(462)),r(n(466)),r(n(467)),r(n(468)),r(n(469))},function(e,t,n){"use strict";(function(e){if(n(146),n(343),n(344),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;function t(e,t,n){e[t]||Object.defineProperty(e,t,{writable:!0,configurable:!0,value:n})}t(String.prototype,"padLeft","".padStart),t(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach((function(e){[][e]&&t(Array,e,Function.call.bind([][e]))}))}).call(this,n(69))},function(e,t,n){n(147),n(150),n(151),n(152),n(153),n(154),n(155),n(156),n(157),n(158),n(159),n(160),n(161),n(162),n(163),n(164),n(165),n(166),n(167),n(168),n(169),n(170),n(171),n(172),n(173),n(174),n(175),n(176),n(177),n(178),n(179),n(180),n(181),n(182),n(183),n(184),n(185),n(186),n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(196),n(197),n(198),n(199),n(200),n(201),n(202),n(203),n(204),n(205),n(206),n(207),n(208),n(209),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(221),n(222),n(223),n(224),n(225),n(227),n(228),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(248),n(249),n(250),n(90),n(251),n(117),n(252),n(118),n(253),n(254),n(255),n(256),n(257),n(121),n(123),n(124),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(268),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(282),n(283),n(284),n(285),n(286),n(287),n(288),n(289),n(290),n(291),n(292),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(306),n(307),n(308),n(309),n(310),n(311),n(312),n(313),n(314),n(315),n(316),n(317),n(318),n(319),n(320),n(321),n(322),n(323),n(324),n(325),n(326),n(327),n(328),n(329),n(330),n(331),n(332),n(333),n(334),n(335),n(336),n(337),n(338),n(339),n(340),n(341),n(342),e.exports=n(18)},function(e,t,n){"use strict";var r=n(2),i=n(14),o=n(7),a=n(0),s=n(12),c=n(30).KEY,u=n(3),p=n(47),l=n(43),d=n(33),f=n(5),h=n(99),E=n(71),g=n(149),A=n(55),v=n(1),_=n(4),I=n(9),S=n(15),O=n(23),y=n(32),m=n(36),C=n(102),T=n(16),P=n(54),N=n(8),R=n(34),b=T.f,M=N.f,x=C.f,w=r.Symbol,L=r.JSON,D=L&&L.stringify,H=f("_hidden"),F=f("toPrimitive"),U={}.propertyIsEnumerable,V=p("symbol-registry"),k=p("symbols"),G=p("op-symbols"),j=Object.prototype,B="function"==typeof w&&!!P.f,q=r.QObject,W=!q||!q.prototype||!q.prototype.findChild,K=o&&u((function(){return 7!=m(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=b(j,t);r&&delete j[t],M(e,t,n),r&&e!==j&&M(j,t,r)}:M,Y=function(e){var t=k[e]=m(w.prototype);return t._k=e,t},X=B&&"symbol"==typeof w.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof w},J=function(e,t,n){return e===j&&J(G,t,n),v(e),t=O(t,!0),v(n),i(k,t)?(n.enumerable?(i(e,H)&&e[H][t]&&(e[H][t]=!1),n=m(n,{enumerable:y(0,!1)})):(i(e,H)||M(e,H,y(1,{})),e[H][t]=!0),K(e,t,n)):M(e,t,n)},Q=function(e,t){v(e);for(var n,r=g(t=S(t)),i=0,o=r.length;o>i;)J(e,n=r[i++],t[n]);return e},z=function(e){var t=U.call(this,e=O(e,!0));return!(this===j&&i(k,e)&&!i(G,e))&&(!(t||!i(this,e)||!i(k,e)||i(this,H)&&this[H][e])||t)},$=function(e,t){if(e=S(e),t=O(t,!0),e!==j||!i(k,t)||i(G,t)){var n=b(e,t);return!n||!i(k,t)||i(e,H)&&e[H][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=x(S(e)),r=[],o=0;n.length>o;)i(k,t=n[o++])||t==H||t==c||r.push(t);return r},ee=function(e){for(var t,n=e===j,r=x(n?G:S(e)),o=[],a=0;r.length>a;)!i(k,t=r[a++])||n&&!i(j,t)||o.push(k[t]);return o};B||(s((w=function(){if(this instanceof w)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===j&&t.call(G,n),i(this,H)&&i(this[H],e)&&(this[H][e]=!1),K(this,e,y(1,n))};return o&&W&&K(j,e,{configurable:!0,set:t}),Y(e)}).prototype,"toString",(function(){return this._k})),T.f=$,N.f=J,n(37).f=C.f=Z,n(49).f=z,P.f=ee,o&&!n(29)&&s(j,"propertyIsEnumerable",z,!0),h.f=function(e){return Y(f(e))}),a(a.G+a.W+a.F*!B,{Symbol:w});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)f(te[ne++]);for(var re=R(f.store),ie=0;re.length>ie;)E(re[ie++]);a(a.S+a.F*!B,"Symbol",{for:function(e){return i(V,e+="")?V[e]:V[e]=w(e)},keyFor:function(e){if(!X(e))throw TypeError(e+" is not a symbol!");for(var t in V)if(V[t]===e)return t},useSetter:function(){W=!0},useSimple:function(){W=!1}}),a(a.S+a.F*!B,"Object",{create:function(e,t){return void 0===t?m(e):Q(m(e),t)},defineProperty:J,defineProperties:Q,getOwnPropertyDescriptor:$,getOwnPropertyNames:Z,getOwnPropertySymbols:ee});var oe=u((function(){P.f(1)}));a(a.S+a.F*oe,"Object",{getOwnPropertySymbols:function(e){return P.f(I(e))}}),L&&a(a.S+a.F*(!B||u((function(){var e=w();return"[null]"!=D([e])||"{}"!=D({a:e})||"{}"!=D(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(_(t)||void 0!==e)&&!X(e))return A(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!X(t))return t}),r[1]=t,D.apply(L,r)}}),w.prototype[F]||n(11)(w.prototype,F,w.prototype.valueOf),l(w,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(e,t,n){e.exports=n(47)("native-function-to-string",Function.toString)},function(e,t,n){var r=n(34),i=n(54),o=n(49);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),c=o.f,u=0;s.length>u;)c.call(e,a=s[u++])&&t.push(a);return t}},function(e,t,n){var r=n(0);r(r.S,"Object",{create:n(36)})},function(e,t,n){var r=n(0);r(r.S+r.F*!n(7),"Object",{defineProperty:n(8).f})},function(e,t,n){var r=n(0);r(r.S+r.F*!n(7),"Object",{defineProperties:n(101)})},function(e,t,n){var r=n(15),i=n(16).f;n(25)("getOwnPropertyDescriptor",(function(){return function(e,t){return i(r(e),t)}}))},function(e,t,n){var r=n(9),i=n(17);n(25)("getPrototypeOf",(function(){return function(e){return i(r(e))}}))},function(e,t,n){var r=n(9),i=n(34);n(25)("keys",(function(){return function(e){return i(r(e))}}))},function(e,t,n){n(25)("getOwnPropertyNames",(function(){return n(102).f}))},function(e,t,n){var r=n(4),i=n(30).onFreeze;n(25)("freeze",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},function(e,t,n){var r=n(4),i=n(30).onFreeze;n(25)("seal",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},function(e,t,n){var r=n(4),i=n(30).onFreeze;n(25)("preventExtensions",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},function(e,t,n){var r=n(4);n(25)("isFrozen",(function(e){return function(t){return!r(t)||!!e&&e(t)}}))},function(e,t,n){var r=n(4);n(25)("isSealed",(function(e){return function(t){return!r(t)||!!e&&e(t)}}))},function(e,t,n){var r=n(4);n(25)("isExtensible",(function(e){return function(t){return!!r(t)&&(!e||e(t))}}))},function(e,t,n){var r=n(0);r(r.S+r.F,"Object",{assign:n(103)})},function(e,t,n){var r=n(0);r(r.S,"Object",{is:n(104)})},function(e,t,n){var r=n(0);r(r.S,"Object",{setPrototypeOf:n(75).set})},function(e,t,n){"use strict";var r=n(44),i={};i[n(5)("toStringTag")]="z",i+""!="[object z]"&&n(12)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},function(e,t,n){var r=n(0);r(r.P,"Function",{bind:n(105)})},function(e,t,n){var r=n(8).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||n(7)&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},function(e,t,n){"use strict";var r=n(4),i=n(17),o=n(5)("hasInstance"),a=Function.prototype;o in a||n(8).f(a,o,{value:function(e){if("function"!=typeof this||!r(e))return!1;if(!r(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){var r=n(0),i=n(107);r(r.G+r.F*(parseInt!=i),{parseInt:i})},function(e,t,n){var r=n(0),i=n(108);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},function(e,t,n){"use strict";var r=n(2),i=n(14),o=n(20),a=n(77),s=n(23),c=n(3),u=n(37).f,p=n(16).f,l=n(8).f,d=n(45).trim,f=r.Number,h=f,E=f.prototype,g="Number"==o(n(36)(E)),A="trim"in String.prototype,v=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){var n,r,i,o=(t=A?t.trim():d(t,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+t}for(var a,c=t.slice(2),u=0,p=c.length;u<p;u++)if((a=c.charCodeAt(u))<48||a>i)return NaN;return parseInt(c,r)}}return+t};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof f&&(g?c((function(){E.valueOf.call(n)})):"Number"!=o(n))?a(new h(v(t)),n,f):v(t)};for(var _,I=n(7)?u(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;I.length>S;S++)i(h,_=I[S])&&!i(f,_)&&l(f,_,p(h,_));f.prototype=E,E.constructor=f,n(12)(r,"Number",f)}},function(e,t,n){"use strict";var r=n(0),i=n(21),o=n(109),a=n(78),s=1..toFixed,c=Math.floor,u=[0,0,0,0,0,0],p="Number.toFixed: incorrect invocation!",l=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*u[n],u[n]=r%1e7,r=c(r/1e7)},d=function(e){for(var t=6,n=0;--t>=0;)n+=u[t],u[t]=c(n/e),n=n%e*1e7},f=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==u[e]){var n=String(u[e]);t=""===t?n:t+a.call("0",7-n.length)+n}return t},h=function(e,t,n){return 0===t?n:t%2==1?h(e,t-1,n*e):h(e*e,t/2,n)};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(3)((function(){s.call({})}))),"Number",{toFixed:function(e){var t,n,r,s,c=o(this,p),u=i(e),E="",g="0";if(u<0||u>20)throw RangeError(p);if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(E="-",c=-c),c>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(c*h(2,69,1))-69)<0?c*h(2,-t,1):c/h(2,t,1),n*=4503599627370496,(t=52-t)>0){for(l(0,n),r=u;r>=7;)l(1e7,0),r-=7;for(l(h(10,r,1),0),r=t-1;r>=23;)d(1<<23),r-=23;d(1<<r),l(1,1),d(2),g=f()}else l(0,n),l(1<<-t,0),g=f()+a.call("0",u);return g=u>0?E+((s=g.length)<=u?"0."+a.call("0",u-s)+g:g.slice(0,s-u)+"."+g.slice(s-u)):E+g}})},function(e,t,n){"use strict";var r=n(0),i=n(3),o=n(109),a=1..toPrecision;r(r.P+r.F*(i((function(){return"1"!==a.call(1,void 0)}))||!i((function(){a.call({})}))),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return void 0===e?a.call(t):a.call(t,e)}})},function(e,t,n){var r=n(0);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var r=n(0),i=n(2).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},function(e,t,n){var r=n(0);r(r.S,"Number",{isInteger:n(110)})},function(e,t,n){var r=n(0);r(r.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var r=n(0),i=n(110),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return i(e)&&o(e)<=9007199254740991}})},function(e,t,n){var r=n(0);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var r=n(0);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var r=n(0),i=n(108);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(e,t,n){var r=n(0),i=n(107);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(e,t,n){var r=n(0),i=n(111),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:i(e-1+o(e-1)*o(e+1))}})},function(e,t,n){var r=n(0),i=Math.asinh;r(r.S+r.F*!(i&&1/i(0)>0),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},function(e,t,n){var r=n(0),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){var r=n(0),i=n(79);r(r.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,n){var r=n(0);r(r.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){var r=n(0),i=Math.exp;r(r.S,"Math",{cosh:function(e){return(i(e=+e)+i(-e))/2}})},function(e,t,n){var r=n(0),i=n(80);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(e,t,n){var r=n(0);r(r.S,"Math",{fround:n(112)})},function(e,t,n){var r=n(0),i=Math.abs;r(r.S,"Math",{hypot:function(e,t){for(var n,r,o=0,a=0,s=arguments.length,c=0;a<s;)c<(n=i(arguments[a++]))?(o=o*(r=c/n)*r+1,c=n):o+=n>0?(r=n/c)*r:n;return c===1/0?1/0:c*Math.sqrt(o)}})},function(e,t,n){var r=n(0),i=Math.imul;r(r.S+r.F*n(3)((function(){return-5!=i(4294967295,5)||2!=i.length})),"Math",{imul:function(e,t){var n=+e,r=+t,i=65535&n,o=65535&r;return 0|i*o+((65535&n>>>16)*o+i*(65535&r>>>16)<<16>>>0)}})},function(e,t,n){var r=n(0);r(r.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,n){var r=n(0);r(r.S,"Math",{log1p:n(111)})},function(e,t,n){var r=n(0);r(r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){var r=n(0);r(r.S,"Math",{sign:n(79)})},function(e,t,n){var r=n(0),i=n(80),o=Math.exp;r(r.S+r.F*n(3)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},function(e,t,n){var r=n(0),i=n(80),o=Math.exp;r(r.S,"Math",{tanh:function(e){var t=i(e=+e),n=i(-e);return t==1/0?1:n==1/0?-1:(t-n)/(o(e)+o(-e))}})},function(e,t,n){var r=n(0);r(r.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,n){var r=n(0),i=n(35),o=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,a=0;r>a;){if(t=+arguments[a++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?o(t):o(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},function(e,t,n){var r=n(0),i=n(15),o=n(6);r(r.S,"String",{raw:function(e){for(var t=i(e.raw),n=o(t.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(t[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},function(e,t,n){"use strict";n(45)("trim",(function(e){return function(){return e(this,3)}}))},function(e,t,n){"use strict";var r=n(56)(!0);n(81)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){"use strict";var r=n(0),i=n(56)(!1);r(r.P,"String",{codePointAt:function(e){return i(this,e)}})},function(e,t,n){"use strict";var r=n(0),i=n(6),o=n(83),a="".endsWith;r(r.P+r.F*n(84)("endsWith"),"String",{endsWith:function(e){var t=o(this,e,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=i(t.length),s=void 0===n?r:Math.min(i(n),r),c=String(e);return a?a.call(t,c,s):t.slice(s-c.length,s)===c}})},function(e,t,n){"use strict";var r=n(0),i=n(83);r(r.P+r.F*n(84)("includes"),"String",{includes:function(e){return!!~i(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(0);r(r.P,"String",{repeat:n(78)})},function(e,t,n){"use strict";var r=n(0),i=n(6),o=n(83),a="".startsWith;r(r.P+r.F*n(84)("startsWith"),"String",{startsWith:function(e){var t=o(this,e,"startsWith"),n=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return a?a.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t,n){"use strict";n(13)("anchor",(function(e){return function(t){return e(this,"a","name",t)}}))},function(e,t,n){"use strict";n(13)("big",(function(e){return function(){return e(this,"big","","")}}))},function(e,t,n){"use strict";n(13)("blink",(function(e){return function(){return e(this,"blink","","")}}))},function(e,t,n){"use strict";n(13)("bold",(function(e){return function(){return e(this,"b","","")}}))},function(e,t,n){"use strict";n(13)("fixed",(function(e){return function(){return e(this,"tt","","")}}))},function(e,t,n){"use strict";n(13)("fontcolor",(function(e){return function(t){return e(this,"font","color",t)}}))},function(e,t,n){"use strict";n(13)("fontsize",(function(e){return function(t){return e(this,"font","size",t)}}))},function(e,t,n){"use strict";n(13)("italics",(function(e){return function(){return e(this,"i","","")}}))},function(e,t,n){"use strict";n(13)("link",(function(e){return function(t){return e(this,"a","href",t)}}))},function(e,t,n){"use strict";n(13)("small",(function(e){return function(){return e(this,"small","","")}}))},function(e,t,n){"use strict";n(13)("strike",(function(e){return function(){return e(this,"strike","","")}}))},function(e,t,n){"use strict";n(13)("sub",(function(e){return function(){return e(this,"sub","","")}}))},function(e,t,n){"use strict";n(13)("sup",(function(e){return function(){return e(this,"sup","","")}}))},function(e,t,n){var r=n(0);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){"use strict";var r=n(0),i=n(9),o=n(23);r(r.P+r.F*n(3)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(e){var t=i(this),n=o(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){var r=n(0),i=n(226);r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(e,t,n){"use strict";var r=n(3),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(e){return e>9?e:"0"+e};e.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-50000000000001))}))||!r((function(){o.call(new Date(NaN))}))?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+("00000"+Math.abs(t)).slice(r?-6:-4)+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:o},function(e,t,n){var r=Date.prototype,i=r.toString,o=r.getTime;new Date(NaN)+""!="Invalid Date"&&n(12)(r,"toString",(function(){var e=o.call(this);return e==e?i.call(this):"Invalid Date"}))},function(e,t,n){var r=n(5)("toPrimitive"),i=Date.prototype;r in i||n(11)(i,r,n(229))},function(e,t,n){"use strict";var r=n(1),i=n(23);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return i(r(this),"number"!=e)}},function(e,t,n){var r=n(0);r(r.S,"Array",{isArray:n(55)})},function(e,t,n){"use strict";var r=n(19),i=n(0),o=n(9),a=n(113),s=n(85),c=n(6),u=n(86),p=n(87);i(i.S+i.F*!n(58)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,i,l,d=o(e),f="function"==typeof this?this:Array,h=arguments.length,E=h>1?arguments[1]:void 0,g=void 0!==E,A=0,v=p(d);if(g&&(E=r(E,h>2?arguments[2]:void 0,2)),null==v||f==Array&&s(v))for(n=new f(t=c(d.length));t>A;A++)u(n,A,g?E(d[A],A):d[A]);else for(l=v.call(d),n=new f;!(i=l.next()).done;A++)u(n,A,g?a(l,E,[i.value,A],!0):i.value);return n.length=A,n}})},function(e,t,n){"use strict";var r=n(0),i=n(86);r(r.S+r.F*n(3)((function(){function e(){}return!(Array.of.call(e)instanceof e)})),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)i(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var r=n(0),i=n(15),o=[].join;r(r.P+r.F*(n(48)!=Object||!n(22)(o)),"Array",{join:function(e){return o.call(i(this),void 0===e?",":e)}})},function(e,t,n){"use strict";var r=n(0),i=n(74),o=n(20),a=n(35),s=n(6),c=[].slice;r(r.P+r.F*n(3)((function(){i&&c.call(i)})),"Array",{slice:function(e,t){var n=s(this.length),r=o(this);if(t=void 0===t?n:t,"Array"==r)return c.call(this,e,t);for(var i=a(e,n),u=a(t,n),p=s(u-i),l=new Array(p),d=0;d<p;d++)l[d]="String"==r?this.charAt(i+d):this[i+d];return l}})},function(e,t,n){"use strict";var r=n(0),i=n(10),o=n(9),a=n(3),s=[].sort,c=[1,2,3];r(r.P+r.F*(a((function(){c.sort(void 0)}))||!a((function(){c.sort(null)}))||!n(22)(s)),"Array",{sort:function(e){return void 0===e?s.call(o(this)):s.call(o(this),i(e))}})},function(e,t,n){"use strict";var r=n(0),i=n(26)(0),o=n(22)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},function(e,t,n){var r=n(4),i=n(55),o=n(5)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){"use strict";var r=n(0),i=n(26)(1);r(r.P+r.F*!n(22)([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(26)(2);r(r.P+r.F*!n(22)([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(26)(3);r(r.P+r.F*!n(22)([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(26)(4);r(r.P+r.F*!n(22)([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(114);r(r.P+r.F*!n(22)([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){"use strict";var r=n(0),i=n(114);r(r.P+r.F*!n(22)([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){"use strict";var r=n(0),i=n(53)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(22)(o)),"Array",{indexOf:function(e){return a?o.apply(this,arguments)||0:i(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),i=n(15),o=n(21),a=n(6),s=[].lastIndexOf,c=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(c||!n(22)(s)),"Array",{lastIndexOf:function(e){if(c)return s.apply(this,arguments)||0;var t=i(this),n=a(t.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}})},function(e,t,n){var r=n(0);r(r.P,"Array",{copyWithin:n(115)}),n(31)("copyWithin")},function(e,t,n){var r=n(0);r(r.P,"Array",{fill:n(89)}),n(31)("fill")},function(e,t,n){"use strict";var r=n(0),i=n(26)(5),o=!0;"find"in[]&&Array(1).find((function(){o=!1})),r(r.P+r.F*o,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(31)("find")},function(e,t,n){"use strict";var r=n(0),i=n(26)(6),o="findIndex",a=!0;o in[]&&Array(1)[o]((function(){a=!1})),r(r.P+r.F*a,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(31)(o)},function(e,t,n){n(38)("Array")},function(e,t,n){var r=n(2),i=n(77),o=n(8).f,a=n(37).f,s=n(57),c=n(50),u=r.RegExp,p=u,l=u.prototype,d=/a/g,f=/a/g,h=new u(d)!==d;if(n(7)&&(!h||n(3)((function(){return f[n(5)("match")]=!1,u(d)!=d||u(f)==f||"/a/i"!=u(d,"i")})))){u=function(e,t){var n=this instanceof u,r=s(e),o=void 0===t;return!n&&r&&e.constructor===u&&o?e:i(h?new p(r&&!o?e.source:e,t):p((r=e instanceof u)?e.source:e,r&&o?c.call(e):t),n?this:l,u)};for(var E=function(e){e in u||o(u,e,{configurable:!0,get:function(){return p[e]},set:function(t){p[e]=t}})},g=a(p),A=0;g.length>A;)E(g[A++]);l.constructor=u,u.prototype=l,n(12)(r,"RegExp",u)}n(38)("RegExp")},function(e,t,n){"use strict";n(118);var r=n(1),i=n(50),o=n(7),a=/./.toString,s=function(e){n(12)(RegExp.prototype,"toString",e,!0)};n(3)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?s((function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?i.call(e):void 0)})):"toString"!=a.name&&s((function(){return a.call(this)}))},function(e,t,n){"use strict";var r=n(1),i=n(6),o=n(92),a=n(59);n(60)("match",1,(function(e,t,n,s){return[function(n){var r=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=s(n,e,this);if(t.done)return t.value;var c=r(e),u=String(this);if(!c.global)return a(c,u);var p=c.unicode;c.lastIndex=0;for(var l,d=[],f=0;null!==(l=a(c,u));){var h=String(l[0]);d[f]=h,""===h&&(c.lastIndex=o(u,i(c.lastIndex),p)),f++}return 0===f?null:d}]}))},function(e,t,n){"use strict";var r=n(1),i=n(9),o=n(6),a=n(21),s=n(92),c=n(59),u=Math.max,p=Math.min,l=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,f=/\$([$&`']|\d\d?)/g;n(60)("replace",2,(function(e,t,n,h){return[function(r,i){var o=e(this),a=null==r?void 0:r[t];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},function(e,t){var i=h(n,e,this,t);if(i.done)return i.value;var l=r(e),d=String(this),f="function"==typeof t;f||(t=String(t));var g=l.global;if(g){var A=l.unicode;l.lastIndex=0}for(var v=[];;){var _=c(l,d);if(null===_)break;if(v.push(_),!g)break;""===String(_[0])&&(l.lastIndex=s(d,o(l.lastIndex),A))}for(var I,S="",O=0,y=0;y<v.length;y++){_=v[y];for(var m=String(_[0]),C=u(p(a(_.index),d.length),0),T=[],P=1;P<_.length;P++)T.push(void 0===(I=_[P])?I:String(I));var N=_.groups;if(f){var R=[m].concat(T,C,d);void 0!==N&&R.push(N);var b=String(t.apply(void 0,R))}else b=E(m,d,C,T,N,t);C>=O&&(S+=d.slice(O,C)+b,O=C+m.length)}return S+d.slice(O)}];function E(e,t,r,o,a,s){var c=r+e.length,u=o.length,p=f;return void 0!==a&&(a=i(a),p=d),n.call(s,p,(function(n,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(c);case"<":s=a[i.slice(1,-1)];break;default:var p=+i;if(0===p)return n;if(p>u){var d=l(p/10);return 0===d?n:d<=u?void 0===o[d-1]?i.charAt(1):o[d-1]+i.charAt(1):n}s=o[p-1]}return void 0===s?"":s}))}}))},function(e,t,n){"use strict";var r=n(1),i=n(104),o=n(59);n(60)("search",1,(function(e,t,n,a){return[function(n){var r=e(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=a(n,e,this);if(t.done)return t.value;var s=r(e),c=String(this),u=s.lastIndex;i(u,0)||(s.lastIndex=0);var p=o(s,c);return i(s.lastIndex,u)||(s.lastIndex=u),null===p?-1:p.index}]}))},function(e,t,n){"use strict";var r=n(57),i=n(1),o=n(51),a=n(92),s=n(6),c=n(59),u=n(91),p=n(3),l=Math.min,d=[].push,f="length",h=!p((function(){RegExp(4294967295,"y")}));n(60)("split",2,(function(e,t,n,p){var E;return E="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[f]||2!="ab".split(/(?:ab)*/)[f]||4!=".".split(/(.?)(.?)/)[f]||".".split(/()()/)[f]>1||"".split(/.?/)[f]?function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!r(e))return n.call(i,e,t);for(var o,a,s,c=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),l=0,h=void 0===t?4294967295:t>>>0,E=new RegExp(e.source,p+"g");(o=u.call(E,i))&&!((a=E.lastIndex)>l&&(c.push(i.slice(l,o.index)),o[f]>1&&o.index<i[f]&&d.apply(c,o.slice(1)),s=o[0][f],l=a,c[f]>=h));)E.lastIndex===o.index&&E.lastIndex++;return l===i[f]?!s&&E.test("")||c.push(""):c.push(i.slice(l)),c[f]>h?c.slice(0,h):c}:"0".split(void 0,0)[f]?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,r){var i=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,i,r):E.call(String(i),n,r)},function(e,t){var r=p(E,e,this,t,E!==n);if(r.done)return r.value;var u=i(e),d=String(this),f=o(u,RegExp),g=u.unicode,A=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(h?"y":"g"),v=new f(h?u:"^(?:"+u.source+")",A),_=void 0===t?4294967295:t>>>0;if(0===_)return[];if(0===d.length)return null===c(v,d)?[d]:[];for(var I=0,S=0,O=[];S<d.length;){v.lastIndex=h?S:0;var y,m=c(v,h?d:d.slice(S));if(null===m||(y=l(s(v.lastIndex+(h?0:S)),d.length))===I)S=a(d,S,g);else{if(O.push(d.slice(I,S)),O.length===_)return O;for(var C=1;C<=m.length-1;C++)if(O.push(m[C]),O.length===_)return O;S=I=y}}return O.push(d.slice(I)),O}]}))},function(e,t,n){"use strict";var r,i,o,a,s=n(29),c=n(2),u=n(19),p=n(44),l=n(0),d=n(4),f=n(10),h=n(39),E=n(40),g=n(51),A=n(93).set,v=n(94)(),_=n(95),I=n(119),S=n(61),O=n(120),y=c.TypeError,m=c.process,C=m&&m.versions,T=C&&C.v8||"",P=c.Promise,N="process"==p(m),R=function(){},b=i=_.f,M=!!function(){try{var e=P.resolve(1),t=(e.constructor={})[n(5)("species")]=function(e){e(R,R)};return(N||"function"==typeof PromiseRejectionEvent)&&e.then(R)instanceof t&&0!==T.indexOf("6.6")&&-1===S.indexOf("Chrome/66")}catch(e){}}(),x=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},w=function(e,t){if(!e._n){e._n=!0;var n=e._c;v((function(){for(var r=e._v,i=1==e._s,o=0,a=function(t){var n,o,a,s=i?t.ok:t.fail,c=t.resolve,u=t.reject,p=t.domain;try{s?(i||(2==e._h&&H(e),e._h=1),!0===s?n=r:(p&&p.enter(),n=s(r),p&&(p.exit(),a=!0)),n===t.promise?u(y("Promise-chain cycle")):(o=x(n))?o.call(n,c,u):c(n)):u(r)}catch(e){p&&!a&&p.exit(),u(e)}};n.length>o;)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&L(e)}))}},L=function(e){A.call(c,(function(){var t,n,r,i=e._v,o=D(e);if(o&&(t=I((function(){N?m.emit("unhandledRejection",i,e):(n=c.onunhandledrejection)?n({promise:e,reason:i}):(r=c.console)&&r.error&&r.error("Unhandled promise rejection",i)})),e._h=N||D(e)?2:1),e._a=void 0,o&&t.e)throw t.v}))},D=function(e){return 1!==e._h&&0===(e._a||e._c).length},H=function(e){A.call(c,(function(){var t;N?m.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})}))},F=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),w(t,!0))},U=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw y("Promise can't be resolved itself");(t=x(e))?v((function(){var r={_w:n,_d:!1};try{t.call(e,u(U,r,1),u(F,r,1))}catch(e){F.call(r,e)}})):(n._v=e,n._s=1,w(n,!1))}catch(e){F.call({_w:n,_d:!1},e)}}};M||(P=function(e){h(this,P,"Promise","_h"),f(e),r.call(this);try{e(u(U,this,1),u(F,this,1))}catch(e){F.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(41)(P.prototype,{then:function(e,t){var n=b(g(this,P));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=N?m.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&w(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=u(U,e,1),this.reject=u(F,e,1)},_.f=b=function(e){return e===P||e===a?new o(e):i(e)}),l(l.G+l.W+l.F*!M,{Promise:P}),n(43)(P,"Promise"),n(38)("Promise"),a=n(18).Promise,l(l.S+l.F*!M,"Promise",{reject:function(e){var t=b(this);return(0,t.reject)(e),t.promise}}),l(l.S+l.F*(s||!M),"Promise",{resolve:function(e){return O(s&&this===a?P:this,e)}}),l(l.S+l.F*!(M&&n(58)((function(e){P.all(e).catch(R)}))),"Promise",{all:function(e){var t=this,n=b(t),r=n.resolve,i=n.reject,o=I((function(){var n=[],o=0,a=1;E(e,!1,(function(e){var s=o++,c=!1;n.push(void 0),a++,t.resolve(e).then((function(e){c||(c=!0,n[s]=e,--a||r(n))}),i)})),--a||r(n)}));return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=b(t),r=n.reject,i=I((function(){E(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},function(e,t,n){"use strict";var r=n(125),i=n(42);n(62)("WeakSet",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(i(this,"WeakSet"),e,!0)}},r,!1,!0)},function(e,t,n){"use strict";var r=n(0),i=n(63),o=n(96),a=n(1),s=n(35),c=n(6),u=n(4),p=n(2).ArrayBuffer,l=n(51),d=o.ArrayBuffer,f=o.DataView,h=i.ABV&&p.isView,E=d.prototype.slice,g=i.VIEW;r(r.G+r.W+r.F*(p!==d),{ArrayBuffer:d}),r(r.S+r.F*!i.CONSTR,"ArrayBuffer",{isView:function(e){return h&&h(e)||u(e)&&g in e}}),r(r.P+r.U+r.F*n(3)((function(){return!new d(2).slice(1,void 0).byteLength})),"ArrayBuffer",{slice:function(e,t){if(void 0!==E&&void 0===t)return E.call(a(this),e);for(var n=a(this).byteLength,r=s(e,n),i=s(void 0===t?n:t,n),o=new(l(this,d))(c(i-r)),u=new f(this),p=new f(o),h=0;r<i;)p.setUint8(h++,u.getUint8(r++));return o}}),n(38)("ArrayBuffer")},function(e,t,n){var r=n(0);r(r.G+r.W+r.F*!n(63).ABV,{DataView:n(96).DataView})},function(e,t,n){n(27)("Int8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(27)("Uint8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(27)("Uint8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0)},function(e,t,n){n(27)("Int16",2,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(27)("Uint16",2,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(27)("Int32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(27)("Uint32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(27)("Float32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(27)("Float64",8,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){var r=n(0),i=n(10),o=n(1),a=(n(2).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!n(3)((function(){a((function(){}))})),"Reflect",{apply:function(e,t,n){var r=i(e),c=o(n);return a?a(r,t,c):s.call(r,t,c)}})},function(e,t,n){var r=n(0),i=n(36),o=n(10),a=n(1),s=n(4),c=n(3),u=n(105),p=(n(2).Reflect||{}).construct,l=c((function(){function e(){}return!(p((function(){}),[],e)instanceof e)})),d=!c((function(){p((function(){}))}));r(r.S+r.F*(l||d),"Reflect",{construct:function(e,t){o(e),a(t);var n=arguments.length<3?e:o(arguments[2]);if(d&&!l)return p(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(u.apply(e,r))}var c=n.prototype,f=i(s(c)?c:Object.prototype),h=Function.apply.call(e,f,t);return s(h)?h:f}})},function(e,t,n){var r=n(8),i=n(0),o=n(1),a=n(23);i(i.S+i.F*n(3)((function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(e,t,n){o(e),t=a(t,!0),o(n);try{return r.f(e,t,n),!0}catch(e){return!1}}})},function(e,t,n){var r=n(0),i=n(16).f,o=n(1);r(r.S,"Reflect",{deleteProperty:function(e,t){var n=i(o(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){"use strict";var r=n(0),i=n(1),o=function(e){this._t=i(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n(82)(o,"Object",(function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}})),r(r.S,"Reflect",{enumerate:function(e){return new o(e)}})},function(e,t,n){var r=n(16),i=n(17),o=n(14),a=n(0),s=n(4),c=n(1);a(a.S,"Reflect",{get:function e(t,n){var a,u,p=arguments.length<3?t:arguments[2];return c(t)===p?t[n]:(a=r.f(t,n))?o(a,"value")?a.value:void 0!==a.get?a.get.call(p):void 0:s(u=i(t))?e(u,n,p):void 0}})},function(e,t,n){var r=n(16),i=n(0),o=n(1);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return r.f(o(e),t)}})},function(e,t,n){var r=n(0),i=n(17),o=n(1);r(r.S,"Reflect",{getPrototypeOf:function(e){return i(o(e))}})},function(e,t,n){var r=n(0);r(r.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,n){var r=n(0),i=n(1),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(e){return i(e),!o||o(e)}})},function(e,t,n){var r=n(0);r(r.S,"Reflect",{ownKeys:n(127)})},function(e,t,n){var r=n(0),i=n(1),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(e){i(e);try{return o&&o(e),!0}catch(e){return!1}}})},function(e,t,n){var r=n(8),i=n(16),o=n(17),a=n(14),s=n(0),c=n(32),u=n(1),p=n(4);s(s.S,"Reflect",{set:function e(t,n,s){var l,d,f=arguments.length<4?t:arguments[3],h=i.f(u(t),n);if(!h){if(p(d=o(t)))return e(d,n,s,f);h=c(0)}if(a(h,"value")){if(!1===h.writable||!p(f))return!1;if(l=i.f(f,n)){if(l.get||l.set||!1===l.writable)return!1;l.value=s,r.f(f,n,l)}else r.f(f,n,c(0,s));return!0}return void 0!==h.set&&(h.set.call(f,s),!0)}})},function(e,t,n){var r=n(0),i=n(75);i&&r(r.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},function(e,t,n){"use strict";var r=n(0),i=n(53)(!0);r(r.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(31)("includes")},function(e,t,n){"use strict";var r=n(0),i=n(128),o=n(9),a=n(6),s=n(10),c=n(88);r(r.P,"Array",{flatMap:function(e){var t,n,r=o(this);return s(e),t=a(r.length),n=c(r,0),i(n,r,r,t,0,1,e,arguments[1]),n}}),n(31)("flatMap")},function(e,t,n){"use strict";var r=n(0),i=n(128),o=n(9),a=n(6),s=n(21),c=n(88);r(r.P,"Array",{flatten:function(){var e=arguments[0],t=o(this),n=a(t.length),r=c(t,0);return i(r,t,t,n,0,void 0===e?1:s(e)),r}}),n(31)("flatten")},function(e,t,n){"use strict";var r=n(0),i=n(56)(!0),o=n(3)((function(){return"𠮷"!=="𠮷".at(0)}));r(r.P+r.F*o,"String",{at:function(e){return i(this,e)}})},function(e,t,n){"use strict";var r=n(0),i=n(129),o=n(61),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,n){"use strict";var r=n(0),i=n(129),o=n(61),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,n){"use strict";n(45)("trimLeft",(function(e){return function(){return e(this,1)}}),"trimStart")},function(e,t,n){"use strict";n(45)("trimRight",(function(e){return function(){return e(this,2)}}),"trimEnd")},function(e,t,n){"use strict";var r=n(0),i=n(24),o=n(6),a=n(57),s=n(50),c=RegExp.prototype,u=function(e,t){this._r=e,this._s=t};n(82)(u,"RegExp String",(function(){var e=this._r.exec(this._s);return{value:e,done:null===e}})),r(r.P,"String",{matchAll:function(e){if(i(this),!a(e))throw TypeError(e+" is not a regexp!");var t=String(this),n="flags"in c?String(e.flags):s.call(e),r=new RegExp(e.source,~n.indexOf("g")?n:"g"+n);return r.lastIndex=o(e.lastIndex),new u(r,t)}})},function(e,t,n){n(71)("asyncIterator")},function(e,t,n){n(71)("observable")},function(e,t,n){var r=n(0),i=n(127),o=n(15),a=n(16),s=n(86);r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,r=o(e),c=a.f,u=i(r),p={},l=0;u.length>l;)void 0!==(n=c(r,t=u[l++]))&&s(p,t,n);return p}})},function(e,t,n){var r=n(0),i=n(130)(!1);r(r.S,"Object",{values:function(e){return i(e)}})},function(e,t,n){var r=n(0),i=n(130)(!0);r(r.S,"Object",{entries:function(e){return i(e)}})},function(e,t,n){"use strict";var r=n(0),i=n(9),o=n(10),a=n(8);n(7)&&r(r.P+n(64),"Object",{__defineGetter__:function(e,t){a.f(i(this),e,{get:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var r=n(0),i=n(9),o=n(10),a=n(8);n(7)&&r(r.P+n(64),"Object",{__defineSetter__:function(e,t){a.f(i(this),e,{set:o(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var r=n(0),i=n(9),o=n(23),a=n(17),s=n(16).f;n(7)&&r(r.P+n(64),"Object",{__lookupGetter__:function(e){var t,n=i(this),r=o(e,!0);do{if(t=s(n,r))return t.get}while(n=a(n))}})},function(e,t,n){"use strict";var r=n(0),i=n(9),o=n(23),a=n(17),s=n(16).f;n(7)&&r(r.P+n(64),"Object",{__lookupSetter__:function(e){var t,n=i(this),r=o(e,!0);do{if(t=s(n,r))return t.set}while(n=a(n))}})},function(e,t,n){var r=n(0);r(r.P+r.R,"Map",{toJSON:n(131)("Map")})},function(e,t,n){var r=n(0);r(r.P+r.R,"Set",{toJSON:n(131)("Set")})},function(e,t,n){n(65)("Map")},function(e,t,n){n(65)("Set")},function(e,t,n){n(65)("WeakMap")},function(e,t,n){n(65)("WeakSet")},function(e,t,n){n(66)("Map")},function(e,t,n){n(66)("Set")},function(e,t,n){n(66)("WeakMap")},function(e,t,n){n(66)("WeakSet")},function(e,t,n){var r=n(0);r(r.G,{global:n(2)})},function(e,t,n){var r=n(0);r(r.S,"System",{global:n(2)})},function(e,t,n){var r=n(0),i=n(20);r(r.S,"Error",{isError:function(e){return"Error"===i(e)}})},function(e,t,n){var r=n(0);r(r.S,"Math",{clamp:function(e,t,n){return Math.min(n,Math.max(t,e))}})},function(e,t,n){var r=n(0);r(r.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(e,t,n){var r=n(0),i=180/Math.PI;r(r.S,"Math",{degrees:function(e){return e*i}})},function(e,t,n){var r=n(0),i=n(133),o=n(112);r(r.S,"Math",{fscale:function(e,t,n,r,a){return o(i(e,t,n,r,a))}})},function(e,t,n){var r=n(0);r(r.S,"Math",{iaddh:function(e,t,n,r){var i=e>>>0,o=n>>>0;return(t>>>0)+(r>>>0)+((i&o|(i|o)&~(i+o>>>0))>>>31)|0}})},function(e,t,n){var r=n(0);r(r.S,"Math",{isubh:function(e,t,n,r){var i=e>>>0,o=n>>>0;return(t>>>0)-(r>>>0)-((~i&o|~(i^o)&i-o>>>0)>>>31)|0}})},function(e,t,n){var r=n(0);r(r.S,"Math",{imulh:function(e,t){var n=+e,r=+t,i=65535&n,o=65535&r,a=n>>16,s=r>>16,c=(a*o>>>0)+(i*o>>>16);return a*s+(c>>16)+((i*s>>>0)+(65535&c)>>16)}})},function(e,t,n){var r=n(0);r(r.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(e,t,n){var r=n(0),i=Math.PI/180;r(r.S,"Math",{radians:function(e){return e*i}})},function(e,t,n){var r=n(0);r(r.S,"Math",{scale:n(133)})},function(e,t,n){var r=n(0);r(r.S,"Math",{umulh:function(e,t){var n=+e,r=+t,i=65535&n,o=65535&r,a=n>>>16,s=r>>>16,c=(a*o>>>0)+(i*o>>>16);return a*s+(c>>>16)+((i*s>>>0)+(65535&c)>>>16)}})},function(e,t,n){var r=n(0);r(r.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:e>0}})},function(e,t,n){"use strict";var r=n(0),i=n(18),o=n(2),a=n(51),s=n(120);r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then((function(){return n}))}:e,n?function(n){return s(t,e()).then((function(){throw n}))}:e)}})},function(e,t,n){"use strict";var r=n(0),i=n(95),o=n(119);r(r.S,"Promise",{try:function(e){var t=i.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){var r=n(28),i=n(1),o=r.key,a=r.set;r.exp({defineMetadata:function(e,t,n,r){a(e,t,i(n),o(r))}})},function(e,t,n){var r=n(28),i=n(1),o=r.key,a=r.map,s=r.store;r.exp({deleteMetadata:function(e,t){var n=arguments.length<3?void 0:o(arguments[2]),r=a(i(t),n,!1);if(void 0===r||!r.delete(e))return!1;if(r.size)return!0;var c=s.get(t);return c.delete(n),!!c.size||s.delete(t)}})},function(e,t,n){var r=n(28),i=n(1),o=n(17),a=r.has,s=r.get,c=r.key,u=function(e,t,n){if(a(e,t,n))return s(e,t,n);var r=o(t);return null!==r?u(e,r,n):void 0};r.exp({getMetadata:function(e,t){return u(e,i(t),arguments.length<3?void 0:c(arguments[2]))}})},function(e,t,n){var r=n(123),i=n(132),o=n(28),a=n(1),s=n(17),c=o.keys,u=o.key,p=function(e,t){var n=c(e,t),o=s(e);if(null===o)return n;var a=p(o,t);return a.length?n.length?i(new r(n.concat(a))):a:n};o.exp({getMetadataKeys:function(e){return p(a(e),arguments.length<2?void 0:u(arguments[1]))}})},function(e,t,n){var r=n(28),i=n(1),o=r.get,a=r.key;r.exp({getOwnMetadata:function(e,t){return o(e,i(t),arguments.length<3?void 0:a(arguments[2]))}})},function(e,t,n){var r=n(28),i=n(1),o=r.keys,a=r.key;r.exp({getOwnMetadataKeys:function(e){return o(i(e),arguments.length<2?void 0:a(arguments[1]))}})},function(e,t,n){var r=n(28),i=n(1),o=n(17),a=r.has,s=r.key,c=function(e,t,n){if(a(e,t,n))return!0;var r=o(t);return null!==r&&c(e,r,n)};r.exp({hasMetadata:function(e,t){return c(e,i(t),arguments.length<3?void 0:s(arguments[2]))}})},function(e,t,n){var r=n(28),i=n(1),o=r.has,a=r.key;r.exp({hasOwnMetadata:function(e,t){return o(e,i(t),arguments.length<3?void 0:a(arguments[2]))}})},function(e,t,n){var r=n(28),i=n(1),o=n(10),a=r.key,s=r.set;r.exp({metadata:function(e,t){return function(n,r){s(e,t,(void 0!==r?i:o)(n),a(r))}}})},function(e,t,n){var r=n(0),i=n(94)(),o=n(2).process,a="process"==n(20)(o);r(r.G,{asap:function(e){var t=a&&o.domain;i(t?t.bind(e):e)}})},function(e,t,n){"use strict";var r=n(0),i=n(2),o=n(18),a=n(94)(),s=n(5)("observable"),c=n(10),u=n(1),p=n(39),l=n(41),d=n(11),f=n(40),h=f.RETURN,E=function(e){return null==e?void 0:c(e)},g=function(e){var t=e._c;t&&(e._c=void 0,t())},A=function(e){return void 0===e._o},v=function(e){A(e)||(e._o=void 0,g(e))},_=function(e,t){u(e),this._c=void 0,this._o=e,e=new I(this);try{var n=t(e),r=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){r.unsubscribe()}:c(n),this._c=n)}catch(t){return void e.error(t)}A(this)&&g(this)};_.prototype=l({},{unsubscribe:function(){v(this)}});var I=function(e){this._s=e};I.prototype=l({},{next:function(e){var t=this._s;if(!A(t)){var n=t._o;try{var r=E(n.next);if(r)return r.call(n,e)}catch(e){try{v(t)}finally{throw e}}}},error:function(e){var t=this._s;if(A(t))throw e;var n=t._o;t._o=void 0;try{var r=E(n.error);if(!r)throw e;e=r.call(n,e)}catch(e){try{g(t)}finally{throw e}}return g(t),e},complete:function(e){var t=this._s;if(!A(t)){var n=t._o;t._o=void 0;try{var r=E(n.complete);e=r?r.call(n,e):void 0}catch(e){try{g(t)}finally{throw e}}return g(t),e}}});var S=function(e){p(this,S,"Observable","_f")._f=c(e)};l(S.prototype,{subscribe:function(e){return new _(e,this._f)},forEach:function(e){var t=this;return new(o.Promise||i.Promise)((function(n,r){c(e);var i=t.subscribe({next:function(t){try{return e(t)}catch(e){r(e),i.unsubscribe()}},error:r,complete:n})}))}}),l(S,{from:function(e){var t="function"==typeof this?this:S,n=E(u(e)[s]);if(n){var r=u(n.call(e));return r.constructor===t?r:new t((function(e){return r.subscribe(e)}))}return new t((function(t){var n=!1;return a((function(){if(!n){try{if(f(e,!1,(function(e){if(t.next(e),n)return h}))===h)return}catch(e){if(n)throw e;return void t.error(e)}t.complete()}})),function(){n=!0}}))},of:function(){for(var e=0,t=arguments.length,n=new Array(t);e<t;)n[e]=arguments[e++];return new("function"==typeof this?this:S)((function(e){var t=!1;return a((function(){if(!t){for(var r=0;r<n.length;++r)if(e.next(n[r]),t)return;e.complete()}})),function(){t=!0}}))}}),d(S.prototype,s,(function(){return this})),r(r.G,{Observable:S}),n(38)("Observable")},function(e,t,n){var r=n(2),i=n(0),o=n(61),a=[].slice,s=/MSIE .\./.test(o),c=function(e){return function(t,n){var r=arguments.length>2,i=!!r&&a.call(arguments,2);return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,n)}};i(i.G+i.B+i.F*s,{setTimeout:c(r.setTimeout),setInterval:c(r.setInterval)})},function(e,t,n){var r=n(0),i=n(93);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,n){for(var r=n(90),i=n(34),o=n(12),a=n(2),s=n(11),c=n(46),u=n(5),p=u("iterator"),l=u("toStringTag"),d=c.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=i(f),E=0;E<h.length;E++){var g,A=h[E],v=f[A],_=a[A],I=_&&_.prototype;if(I&&(I[p]||s(I,p,d),I[l]||s(I,l,A),c[A]=d,v))for(g in r)I[g]||o(I,g,r[g],!0)}},function(e,t,n){(function(t){!function(t){"use strict";var n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag",c="object"==typeof e,u=t.regeneratorRuntime;if(u)c&&(e.exports=u);else{(u=t.regeneratorRuntime=c?e.exports:{}).wrap=E;var p={},l={};l[o]=function(){return this};var d=Object.getPrototypeOf,f=d&&d(d(T([])));f&&f!==n&&r.call(f,o)&&(l=f);var h=_.prototype=A.prototype=Object.create(l);v.prototype=h.constructor=_,_.constructor=v,_[s]=v.displayName="GeneratorFunction",u.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},u.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(h),e},u.awrap=function(e){return{__await:e}},I(S.prototype),S.prototype[a]=function(){return this},u.AsyncIterator=S,u.async=function(e,t,n,r){var i=new S(E(e,t,n,r));return u.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},I(h),h[s]="Generator",h[o]=function(){return this},h.toString=function(){return"[object Generator]"},u.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},u.values=T,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(m),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),m(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;m(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}}}function E(e,t,n,r){var i=t&&t.prototype instanceof A?t:A,o=Object.create(i.prototype),a=new C(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return P()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=O(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=g(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,a),o}function g(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function A(){}function v(){}function _(){}function I(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function S(e){function n(t,i,o,a){var s=g(e[t],e,i);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"==typeof u&&r.call(u,"__await")?Promise.resolve(u.__await).then((function(e){n("next",e,o,a)}),(function(e){n("throw",e,o,a)})):Promise.resolve(u).then((function(e){c.value=e,o(c)}),a)}a(s.arg)}var i;"object"==typeof t.process&&t.process.domain&&(n=t.process.domain.bind(n)),this._invoke=function(e,t){function r(){return new Promise((function(r,i){n(e,t,r,i)}))}return i=i?i.then(r,r):r()}}function O(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=g(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function y(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function m(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(y,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,n(69))},function(e,t,n){n(345),e.exports=n(18).RegExp.escape},function(e,t,n){var r=n(0),i=n(346)(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(e){return i(e)}})},function(e,t){e.exports=function(e,t){var n=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,n)}}},function(e,t,n){t.default=n(348)},function(e,t,n){e.exports=function(e,t,r){r||(r={});var i=e;e.__HELIX_IS_APP=!1,n(349)();var o=n(52),a=n(134),s=n(350),c=n(351),u=n(357),p=n(358),l=n(359),d=n(360),f=n(361),h=n(362),E=n(363),g=n(364),A=n(135),v=n(365),_=n(366),I=n(367),S=n(368),O=n(369),y=n(370),m=n(376),C=n(377),T=n(378),P=n(379),N=n(380),R=n(381),b=n(382),M=n(383),x=n(384),w=n(385),L=n(386),D=n(387),H=n(388),F=n(389),U=n(390),V=n(391),k=n(392),G=n(393),j=n(396),B=n(397),q=n(398),W=n(399),K=n(400),Y=n(418),X=n(419),J=n(420),Q=n(421),z=n(422),$=n(423),Z=n(424),ee=n(425),te=n(426),ne=n(427),re=n(428),ie=n(429),oe=n(430),ae=n(431),se=n(432);if(e[t]&&e[t].start)throw new Error("An instance of Helix already exists! Are you including Helix twice? Check your script includes.");function ce(e,t,n){e.components[t]||(e.components[t]=n()),e.onComposing.hasOwnProperty(t)&&e.onComposing[t](e)}e[t]={Container:{configure:function(n){console.time("hx.c.configure");(n=n||{}).security=a.extend({getAuthToken:"/security/auth-token",getAuthTokens:"/security/auth-tokens",ping:"/security-core/ping",signout:"/security-core/signout"},n.security);var ue=a.extend({ajaxUrl:null,appLoadTimeout:null,appServiceCloseTimeout:300,autoStartContainer:!1,basePath:null,callbacks:null,components:{},containerId:null,environmentId:null,instrumentationBufferSize:8192,onComposing:{},tools:{fadeDelay:5,fadeInterval:5,openerEnabled:!0},tunnelUrl:null},n);r.onConfigure&&r.onConfigure(ue);var pe=ue.components;pe.Constants=o,pe.Util=a,ce(ue,"ActionParameters",(function(){return s()})),ce(ue,"Common",(function(){return y(a,e)})),ce(ue,"Types",(function(){return ne})),ce(ue,"State",(function(){return z(pe.Common.Context,ue,a)})),ce(ue,"ArrayMap",(function(){return A.ArrayMap})),ce(ue,"Handlers",(function(){return L()})),ce(ue,"Transport",(function(){return te()})),ce(ue,"ClientEvents",(function(){return S}));var le=O();ce(ue,"When",(function(){return ae()})),ce(ue,"EventArgs",(function(){return w})),ce(ue,"ProtocolLib",(function(){return K(a,o)}));var de=pe.ProtocolLib.Protocol.get("Consumer");ce(ue,"Environment",(function(){return M(de,ue,pe.State)})),ce(ue,"StorageSession",(function(){return $(e,!0)})),ce(ue,"Instrumentation",(function(){return U(o,pe.Environment,j(),ue,pe.StorageSession,a,e)})),ce(ue,"StorageLocal",(function(){return $(e,!1)})),ce(ue,"Log",(function(){return k(pe.Instrumentation,pe.StorageLocal)})),ce(ue,"Tools",(function(){return ee(ue.tools,pe.Log)})),ce(ue,"Bindings",(function(){return _(pe.Log,a,pe.State)})),ce(ue,"ClientCallbacksType",(function(){return I(o,pe.Log,a,e)}));var fe=pe.ClientCallbacks=pe.ClientCallbacksType.createInstance(),he=pe.ContainerConstants=R(pe.ClientEvents);ce(ue,"Themes",(function(){return Z(pe.State,a,pe.Log)})),ce(ue,"PairedMessaging",(function(){return W(o,pe.Log,i)})),ce(ue,"Messaging",(function(){return B(fe,o,he,pe.EventArgs,pe.Handlers,pe.Log,pe.ProtocolLib.Protocol,pe.ProtocolLib.Version,pe.State,pe.Transport)})),ce(ue,"ViewPort",(function(){return ie(pe.ArrayMap,fe,he,pe.EventArgs)})),ce(ue,"AppView",(function(){return g(fe,o,he,pe.EventArgs,pe.Log,pe.State)})),ce(ue,"AppManagement",(function(){return h(pe.ActionParameters,pe.AppView,pe.Bindings,fe,o,he,pe.EventArgs,pe.Handlers,pe.Common.AppDescriptor,pe.Log,pe.Messaging,ue,pe.State,i,pe.When)})),ce(ue,"Authentication",(function(){return v(pe.AppManagement,pe.Bindings,fe,o,he,pe.EventArgs,pe.Log,pe.State,pe.Types,a)})),ce(ue,"AppInstance",(function(){return p(fe,o,he,pe.Common.EndPointDescriptor,pe.EventArgs,pe.Log,pe.Transport,a)})),ce(ue,"Errors",(function(){return x(fe,o,he,pe.EventArgs,pe.Handlers)})),ce(ue,"DefaultLogging",(function(){return G(pe.Instrumentation,pe.Log)})),ce(ue,"Ajax",(function(){return c(fe,o,pe.State,pe.Environment,pe.EventArgs,he.EVENTS,pe.Instrumentation,pe.Log,a,pe.When,i)})),ce(ue,"SessionMonitor",(function(){return J(pe.Ajax.Ajax,pe.Log,ue.security,pe.State)})),ce(ue,"Security",(function(){return X(pe.ActionParameters,pe.Ajax.Ajax,pe.AppManagement,pe.Bindings,fe,o,he,pe.EventArgs,pe.Handlers,pe.Messaging,pe.Log,ue.security,pe.SessionMonitor,pe.State,a,pe.When)})),ce(ue,"EnvironmentMaps",(function(){return b(pe.Common.AppDescriptor,pe.Bindings,fe,o,he,pe.EventArgs,pe.Log,pe.Security,pe.State)})),ce(ue,"ContextManager",(function(){return N(pe.ActionParameters,fe,o,he,pe.Common.Context,pe.EventArgs,pe.Handlers,pe.Log,pe.Messaging,pe.ProtocolLib.Version,pe.State)})),ce(ue,"AppLaunchData",(function(){return l(pe.Security,pe.State,pe.EnvironmentMaps,he,o)})),ce(ue,"AppLaunchPost",(function(){return f(pe.ProtocolLib.Version,pe.ProtocolLib.Protocol,o,pe.AppLaunchData,he,pe.Log)})),ce(ue,"AppCreate",(function(){return u(pe.AppInstance,pe.appPostLaunch,pe.AppManagement,pe.AppView,pe.Bindings,fe,o,he,pe.ContextManager,pe.EventArgs,pe.Environment,pe.Instrumentation,pe.Log,pe.EnvironmentMaps,pe.ProtocolLib.Protocol,pe.Common.QueryString,pe.Security,pe.ProtocolLib.Version,pe.State,pe.Themes,pe.When)})),ce(ue,"Navigation",(function(){return q(pe.ActionParameters,pe.AppCreate,pe.Authentication,pe.Bindings,fe,o,he,pe.EventArgs,pe.Handlers,pe.Log,pe.Messaging,pe.PairedMessaging,pe.State,pe.Types,a)})),ce(ue,"AppLaunch",(function(){return d(pe.ActionParameters,pe.AppCreate,pe.AppLaunchData,pe.AppManagement,pe.Authentication,pe.Bindings,fe,o,he,pe.EventArgs,pe.Handlers,pe.Instrumentation,pe.Log,pe.Messaging,pe.Navigation,pe.PairedMessaging,pe.State,a)})),ce(ue,"ViewPortManager",(function(){return new re(e.document,pe.Log)})),ce(ue,"AppServices",(function(){return E(pe.AppCreate,pe.AppManagement,pe.Bindings,o,he,pe.Handlers,pe.Messaging,ue,pe.PairedMessaging,pe.State,pe.ViewPort,pe.When,i,pe.ViewPortManager)})),ce(ue,"ContainerServices",(function(){return P(pe.State,pe.Messaging,fe,pe.Bindings,pe.Handlers,o,pe.Common.ErrorCodes,pe.EventArgs,pe.Log,a,pe.ProtocolLib.Version)})),ce(ue,"ContainerMessages",(function(){return T(fe,o,he,pe.EventArgs,pe.Handlers,pe.Messaging,pe.Log)})),ce(ue,"WaitIndicator",(function(){return oe(fe,o,he,pe.EventArgs,pe.Handlers)})),ce(ue,"WindowState",(function(){return se(fe,o,he,pe.EventArgs,pe.Handlers,pe.Messaging,pe.State)})),ce(ue,"SecurityReauth",(function(){return Q(pe.ActionParameters,pe.AppManagement,pe.Authentication,pe.Bindings,fe,he,o,pe.Log,pe.Navigation,pe.Security,pe.State,pe.When)})),pe.AppView.require&&pe.AppView.require(pe.OpenAjax,pe.AppLaunchPost,pe.AppManagement);pe.ViewPort.require&&pe.ViewPort.require(pe.AppManagement);pe.Transport.require&&pe.Transport.require(pe.OpenAjax);pe.Instrumentation.require&&pe.Instrumentation.require(pe.Ajax.Ajax);r.onComposed&&r.onComposed(ue);var Ee=new(H(pe.Ajax.Ajax,pe.Common.AppConfig,pe.Common.AppDescriptor,de,o,pe.Common.Context,pe.Common.EndPointDescriptor,pe.Environment,pe.Log,ue,pe.ProtocolLib,pe.Common.QueryString,pe.Tools,a,pe.When));Ee.isContainer=!0,Ee.isApp=!1,Ee.Instrumentation=pe.Instrumentation,Ee.Ajax=pe.Ajax.Ajax,e[t]=Ee;var ge=C(pe.AppManagement,pe.ArrayMap,fe,le,pe.Constants,he,pe.Errors,pe.EventArgs,pe.Environment,pe.Log,pe.Messaging,pe.Security,pe.State,pe.Themes,pe.Tools,pe.Transport,pe.Util,pe.ViewPort,pe.ViewPortManager),Ae=Ee.Container=new ge;a.extend(!0,Ae,he),ce(ue,"AjaxProcessorsContainer",(function(){return m(pe.Ajax.Processors,pe.Constants,Ae,pe.Log,pe.Security,ue.security)})),ce(ue,"AjaxProcessorsHeaders",(function(){return D(pe.Ajax.Processors,pe.Constants,pe.State,pe.Environment,pe.Log)})),ce(ue,"AjaxProcessorsInstrumentation",(function(){return F(pe.Ajax.Processors,pe.Constants,pe.Instrumentation)})),ce(ue,"AjaxProcessorsInstrumentationTimer",(function(){return V(pe.Ajax.Processors,pe.Constants,pe.Environment,pe.Instrumentation)})),ce(ue,"AjaxProcessorsSanitation",(function(){return Y(pe.Ajax.Processors,pe.Constants,a,pe.Log)}));var ve={bind:fe.bind.bind(fe),bindAsync:fe.bindAsync.bind(fe),closeApp:pe.AppManagement.closeApp,closeAllApps:pe.AppManagement.closeAllApps,createAppFromDescriptor:pe.AppCreate.createAppFromDescriptor,createAppFromManifest:pe.AppCreate.createAppFromManifest,doClientCallback:fe.doClientCallback.bind(fe),doClientCallbackAsync:fe.doClientCallbackAsync.bind(fe),doLegacyAppLaunchBehaviour:pe.AppLaunch.doLegacyAppLaunchBehaviour,findAppManifestByAppDescriptor:pe.AppManagement.findAppManifestByAppDescriptor,findLatestBindingsForAppByAppDescriptor:pe.AppManagement.findLatestBindingsForAppByAppDescriptor,getAppLaunchDataServices:pe.Security.getAppLaunchDataServices,getExposedInterfaceByUid:pe.Bindings.getExposedInterfaceByUid,getMessageHandler:pe.Handlers.getMessageHandler,getSharedContext:pe.ContextManager.getSharedContext,hasClientCallback:fe.hasClientCallback.bind(fe),hasClientCallbackAsync:fe.hasClientCallbackAsync.bind(fe),navigate:pe.Navigation.navigate,onHelixMessage:pe.Messaging.onHelixMessage,publish:pe.Messaging.publish,refreshApp:pe.AppManagement.refreshApp,requestBindingsAndTokens:pe.Security.requestBindingsAndTokens,sendAppContext:pe.ContextManager.sendAppContext,sendContainerMessageResponse:pe.ContainerMessages.publishResponseMessage,Services:pe.ContainerServices,setAppContext:pe.ContextManager.setAppContext,setAppWindowState:pe.WindowState.setAppWindowState,setNewToken:pe.Security.setNewToken,setSharedContext:pe.ContextManager.setSharedContext,setThemeId:pe.Themes.setThemeId,signOut:pe.Security.signOut,unbind:fe.unbind.bind(fe),unbindAsync:fe.unbindAsync.bind(fe),versionCompare:pe.AppManagement.versionCompare},_e={addContainerServiceHandler:function(){throw"DEPRECATED: Helix.Container.addContainerServiceHandler is obsolete as of CPV 1.3.0, please use Helix.Container.Services.bind()"},sendContainerServiceResponse:function(){throw"DEPRECATED: Helix.Container.sendContainerServiceResponse is obsolete as of CPV 1.3.0, please use Helix.Container.Services.trigger()"}};Object.keys(ve).forEach((function(e){Ae.constructor.prototype[e]=ve[e]})),Object.keys(_e).forEach((function(e){Ae.constructor.prototype[e]=_e[e]})),!0===ue.autoStartContainer&&Ae.start();pe.Tools.init()&&console.info("Helix Container Tooling Loaded");r.onReady&&r.onReady(ue);console.timeEnd("hx.c.configure")}}}}},function(e,t){e.exports=function(){var e,t,n,r,i;Array.prototype.filter||(Array.prototype.filter=function(e){"use strict";if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var r=[],i=arguments.length>=2?arguments[1]:void 0,o=0;o<n;o++)if(o in t){var a=t[o];e.call(i,a,o,t)&&r.push(a)}return r}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,r;if(null==this)throw new TypeError(" this is null or not defined");var i=Object(this),o=i.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(n=t),r=0;r<o;){var a;r in i&&(a=i[r],e.call(n,a,r,i)),r++}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),i=r.length>>>0;if(0===i)return-1;var o=+t||0;if(Math.abs(o)===1/0&&(o=0),o>=i)return-1;for(n=Math.max(o>=0?o:i-Math.abs(o),0);n<i;){if(n in r&&r[n]===e)return n;n++}return-1}),Array.prototype.find||(Array.prototype.find=function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),r=n.length>>>0,i=arguments[1],o=0;o<r;o++)if(t=n[o],e.call(i,t,o,n))return t}),Array.prototype.findIndex||(Array.prototype.findIndex=function(e){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),r=n.length>>>0,i=arguments[1],o=0;o<r;o++)if(t=n[o],e.call(i,t,o,n))return o;return-1}),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r?this:e,t.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(r.prototype=this.prototype),i.prototype=new r,i}),Array.prototype.map||(Array.prototype.map=function(e,t){var n,r,i;if(null==this)throw new TypeError(" this is null or not defined");var o=Object(this),a=o.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(n=t),r=new Array(a),i=0;i<a;){var s,c;i in o&&(s=o[i],c=e.call(n,s,i,o),r[i]=c),i++}return r}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),"function"!=typeof Object.create&&(Object.create=(e=function(){},function(t){if(arguments.length>1)throw Error("Second argument not supported");if("object"!=typeof t)throw TypeError("Argument must be an object");e.prototype=t;var n=new e;return e.prototype=null,n})),Array.prototype.reduce||(Array.prototype.reduce=function(e){if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var t,n=Object(this),r=n.length>>>0,i=0;if(2===arguments.length)t=arguments[1];else{for(;i<r&&!(i in n);)i++;if(i>=r)throw new TypeError("Reduce of empty array with no initial value");t=n[i++]}for(;i<r;i++)i in n&&(t=e(t,n[i],i,n));return t}),Object.keys||(Object.keys=(t=Object.prototype.hasOwnProperty,n=!{toString:null}.propertyIsEnumerable("toString"),i=(r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var o,a,s=[];for(o in e)t.call(e,o)&&s.push(o);if(n)for(a=0;a<i;a++)t.call(e,r[a])&&s.push(r[a]);return s})),window.addEventListener||(window.addEventListener=function(e,t){window.attachEvent("on"+e,t)})}},function(e,t,n){"use strict";e.exports=function(){var e=1;return{get:function(t,n){return n||(n={}),n.hasOwnProperty("actionId")||(n.actionId=t+"-"+e++),n}}}},function(e,t,n){e.exports=function(e,t,r,i,o,a,s,c,u,p,l){var d=n(352)(c),f=n(353).HelixRequest,h=n(354).HelixResponse,E=n(355)(d,t,u,c,h,p,l),g=n(356)(d,e,t,o,a,f,h,u,p,E);return void 0!==window.jQuery&&void 0!==window.$&&(window.$.postJSON=function(){throw new Error("This method has been deprecated as of Helix v4. Please replace with Helix.Ajax.post(url, data, settings).then(function (hxResponse) {var data = hxResponse.data; /*do something with data*/})")}),{Ajax:g,XhrAdapter:E,Processors:d,HelixRequest:f,HelixResponse:h}}},function(e,t){e.exports=function(e){var t=e.register("hx.ajax.processor"),n={REQUEST:"request",SANITISE:"sanitise",SUCCESS:"success",FAIL:"fail",ALWAYS:"always"},r={},i={};for(var o in n)r[n[o]]=[],i[n[o]]=[];function a(e,n,r){t("register."+e+".filter."+n),i[e][n]||(i[e][n]=[]),i[e][n].push(r)}function s(e,n,i){t("register."+e+"."+n),r[e].push({id:n,fn:i})}function c(e,n){n.custom=n.custom||{},r[e].forEach((function(r){!(i[e][r.id]||[]).every((function(r,i){var o=!!r(n);return t("run."+e+".filter."+i,n,o),o}))||r.fn(n)}))}function u(e){this._request=e}function p(e){this._reponse=e}return u.prototype={getAutoSpinner:function(){return this._request.autoSpinner},getHeader:function(e){return this._request.headers[e]},getHeaders:function(){return this._request.headers},getRequest:function(){return this._request},getUrl:function(){return this._request.url},setAutoSpinner:function(e){this._request.autoSpinner=e},setHeader:function(e,t){this._request.headers[e]=t},setInstrumentationTimer:function(e){this._request.instrumentationTimer=e}},p.prototype={getAutoSpinner:function(){return this._reponse.request.autoSpinner},getHeader:function(e){return this._reponse.headers[e]},getInstrumentationTimer:function(){return this._reponse.request.instrumentationTimer},getResponse:function(){return this._reponse},getStatus:function(){return this._reponse.status},getUrl:function(){return this._reponse.request.url}},{RequestAdapter:u,ResponseAdapter:p,registerRequestProcessor:function(e,t){s(n.REQUEST,e,t)},registerRequestProcessorFilter:function(e,t){a(n.REQUEST,e,t)},registerSanitiseProcessor:function(e,t){s(n.SANITISE,e,t)},registerSuccessProcessor:function(e,t){s(n.SUCCESS,e,t)},registerSuccessProcessorFilter:function(e,t){a(n.SUCCESS,e,t)},registerFailProcessor:function(e,t){s(n.FAIL,e,t)},registerAlwaysProcessor:function(e,t){s(n.ALWAYS,e,t)},processRequest:function(e){c(n.REQUEST,e),c(n.SANITISE,e)},processSuccess:function(e){c(n.SUCCESS,e),c(n.ALWAYS,e)},processFail:function(e){c(n.FAIL,e),c(n.ALWAYS,e)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(52),i=function(){function e(e,t,n){this.url=e,n=n||{},this.accept=n.accept||"application/json",this.autoSpinner=n.autoSpinner,this.async=n.async||!0,this.charset=n.charset||"UTF-8",this.contentType=n.contentType||"application/json",this.headers=n.headers||{},this.instrumentationTimer=n.instrumentationTimer,this.timeout=n.timeout||r.AJAX_TIMEOUT_MS,this.type=n.type||"POST",this.meta=n.meta,this.xhr=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");try{this.data=JSON.stringify(t||{})}catch(t){throw new Error("Unable to serialise request data for url "+e)}}return e.prototype.getFilteredData=function(e){return 0===e.indexOf('{"d":')?e.substr(5,e.length-6):e},e}();t.HelixRequest=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(52),i=function(){function e(e,t,n,i){var o=e.xhr;this.request=e,this.headers=i||this._getHeaders(o),this.status=o.status,this.statusText=o.statusText,this.url=e.url,this.instrumentationTimer=e.instrumentationTimer,this.autoSpinner=e.autoSpinner,this.xhr=o,this.responseText=n||o.responseText,this.error=t;var a=null;try{a=JSON.parse(this.responseText)}catch(e){this.headers["content-type"]&&this.headers["content-type"].indexOf("application/json")>-1&&(this.error=r.AJAX.ERROR.RESPONSE_PARSE)}this.data=a}return e.prototype._getHeaders=function(e){var t={},n=e.getAllResponseHeaders();if(!n)return t;for(var r=n.split("\r\n"),i=0;i<r.length;i++){var o=r[i],a=o.indexOf(": ");if(a>0){var s=o.substring(0,a),c=o.substring(a+2);t[s.toLowerCase()]=c}}return t},e}();t.HelixResponse=i},function(e,t){e.exports=function(e,t,n,r,i,o,a){return{send:function(r,s){var c=n.extend({defer:null},s),u=null,p=c.defer||o.defer(),l=p.promise,d=r.xhr;function f(){u&&(clearTimeout(u),u=null);var n=new i(r,null,r.getFilteredData(d.responseText)),o=new e.ResponseAdapter(n);return d.status>=t.AJAX.OK&&d.status<300&&!n.error?(e.processSuccess(o),p.resolve(n)):(n.error=n.error||t.AJAX.ERROR.NOT_OK,d.timedoutFlag&&(n.status=408,n.error=t.AJAX.ERROR.TIMEOUT),e.processFail(o),p.reject(n)),n}d.onreadystatechange=function(){d.readyState===t.AJAX.READY_STATE_COMPLETE&&f()};try{d.open(r.type,r.url,r.async)}catch(n){var h=new i(r,t.AJAX.ERROR.OPEN),E=new e.ResponseAdapter(h);return e.processFail(E),p.reject(h),l}for(var g in r.contentType&&d.setRequestHeader("Content-Type",r.contentType),d.setRequestHeader("Accept",r.accept),r.headers)r.headers.hasOwnProperty(g)&&d.setRequestHeader(g,r.headers[g]);r.timeout&&(u=a.setTimeout((function(){d.timedoutFlag=!0,d.abort();var n=new i(r,t.AJAX.ERROR.TIMEOUT),o=new e.ResponseAdapter(n);e.processFail(o),p.reject(n)}),r.timeout));try{if(d.send(r.data),!1===r.async)return f()}catch(n){u&&(a.clearTimeout(u),u=null);h=new i(r,t.AJAX.ERROR.SEND),E=new e.ResponseAdapter(h);e.processFail(E),p.reject(h)}return l}}}},function(e,t){e.exports=function(e,t,n,r,i,o,a,s,c,u){function p(t,n,r){var i=new o(t,n,r),a=new e.RequestAdapter(i);return e.processRequest(a),i}function l(e,o,s,l){var d=p(o,s,l);return d.type=e,function(e){var o=c.defer(),s=o.promise,p=new a(e,null,null,{});return t.doClientCallbackAsync(i.ON_AJAX_REQUEST,new r.AjaxRequest(e),(function(e){p.data=e,o.resolve(p)}),(function(e,t){var r=n.AJAX.ERROR.NOT_OK;for(var i in n.AJAX.ERROR)if(n.AJAX.ERROR[i]===e){r=n.AJAX.ERROR[i];break}p.error=r,t&&(p.data=t),o.reject(p)}),(function(){u.send(e,{defer:o})})),s}(d)}var d={delete:function(e,t,n){return l("DELETE",e,t,n)},get:function(e,t,n){return l("GET",e,t,n)},getRequest:p,getResponse:function(e){return new a(e)},head:function(e,t){return l("HEAD",e,null,t)},options:function(e,t){return l("OPTIONS",e,null,t)},patch:function(e,t,n){return l("PATCH",e,t,n)},post:function(e,t,n){return l("POST",e,t,n)},put:function(e,t,n){return l("PUT",e,t,n)},send:l};return s.extend(!0,d,e),d}},function(e,t){e.exports=function(e,t,n,r,i,o,a,s,c,u,p,l,d,f,h,E,g,A,v,_,I){var S=d.register("hx.container.appcreate"),O=0;function y(e){return e&&0===e.indexOf("~/")?e.replace("~/",""):e}function m(t,n,i){var d=t.bindingsForApp,O=new e(d.publisherId+"."+d.appId+"_v"+d.version+"_"+C(),d,t.appParams,t.themeId,s.APP_STATUS.NOT_LOADED,t.parentAppInstance);if(!O.themeId){var m=_.getAppTheme(O);O.themeId=m.id}S("appCreate._createApp",O.bindings.appDescriptor.toString());var T=function(e,t,n){var r=null,i=[].concat(e.exposes.ui,e.exposes.data);if(!t&&i.length>0)return{exposedInterface:r=i[0],url:y(r.resolvesTo)};for(var o=0;o<i.length;o++){var a=i[o];if(t===a.interfaceId&&(!n||"*"===n||n.toString()===a.interfaceVersion)){r=a;break}}return{exposedInterface:r,url:r?y(r.resolvesTo):null}}(d,n.interfaceId,n.interfaceVersion);return T.url?(O.resolvesTo=T.url,function(e,t,n){var i=I.defer(),d=i.promise,O=e.appInstance,y=e.exposedInterface,m=e.appParams,C=e.url,T=e.actionParams;return O.launchTimer=l.time("hx.c.applaunch - "+O.appInstanceId),g.getAuthTokenForApp(y.tokenTransport!==s.TOKEN_TRANSPORT_TYPE.NONE?O:null).then((function(e){var l=new E(C);if(l.hxtx="0",l.hxthm=O.themeId,S("createAppFromManifest.theme",O.themeId,_.theme,_.supportedThemes),y.tokenTransport===s.TOKEN_TRANSPORT_TYPE.QUERY_STRING&&y.httpVerb===s.HTTP_VERB.GET&&(l.hxtok=e),l.hxenv=p.getEnvironmentId(),y.httpVerb===s.HTTP_VERB.GET){var d=f.getEnvironmentMaps(O.appDescriptor.fqId,v.config.bindings,v.config.mappings);l.hxmap=d.value,l[a.CONSUMER_PROTOCOL.META_MEMBER_KEY_NAME]={environmentMaps:d.metaMaps}}if(m&&"query_string"===y.parameterTransport)for(var g in m)if(m.hasOwnProperty(g)){var I=m[g];l[g]="object"==typeof I?JSON.stringify(I):I}o.doClientCallbackAsync(s.EVENTS.ON_PREPARE_LAUNCH_PARAMETERS,new u.PrepareLaunchParameters(O,l.getArgs(),T),(function(p){if(p)for(var d in p)p.hasOwnProperty(d)&&(l[d]=p[d]);var f=A.parse(O.bindings.cpv).toString(),g=h.get("Consumer").getLatest().transform(a.LAUNCH_DATA.GET,l,f);g=g.toPlainObject(),O.url=E.join(g),O.pageInfo={},c.setAppContext(O,n||c.getAppContext(O));var _=!!t&&!!t.isAuthApp,I=t&&t.launchMode?t.launchMode:_?a.LAUNCH_MODE.MODAL:a.LAUNCH_MODE.CLOSE_AND_REPLACE;O.status=s.APP_STATUS.LOADING,O.launchInterface=y,O.launchDetails={launchMode:I,isAuthenticator:_},O.authToken=e,O.label=O.bindings.publisherId+"."+O.bindings.appId,r.open(O,(function(){O.actionParams=T,v.activeAppInstances.append(O),o.doClientCallback(s.EVENTS.ON_APP_LAUNCHED,new u.AppLaunched(O,T)),i.resolve(O)}),(function(e){i.reject(e)}),T)}),(function(e){i.reject(e)}),(function(e){e(null)}))})).fail((function(e){i.reject(e.error||e.message)})),d}({appInstance:O,exposedInterface:T.exposedInterface,appParams:t.appParams,url:O.resolvesTo,actionParams:t.actionParams},i,t.helixContext)):(S("createAppFromManifest.exception.urlNotFound",O.bindings.appDescriptor.fqId),I.reject(a.APP_CREATE.ERROR.LAUNCH_URL_NOT_FOUND))}function C(){return O++,v.containerId+"-"+O}return{generateId:C,createAppFromExposedBinding:function(e,t,n){return e?(t=t||{},m({bindingsForApp:e.app,appParams:t.appParams,themeId:t.themeId,parentAppInstance:t.parentAppInstance,helixContext:t.helixContext,actionParams:t.actionParams},{interfaceId:e.interfaceId,interfaceVersion:e.interfaceVersion},n)):(S("bindings.exception.createAppFromExposedBinding","exposedInterface is mandatory"),I.reject(a.APP_CREATE.ERROR.MANIFEST_NOT_FOUND))},createAppFromDescriptor:function(e,t,r,i,o,s,c){var u=n.findLatestBindingsForAppByAppDescriptor(e,o,s);return u||(S("createAppFromDescriptor.warning.manifestNotFound",e,o,s),u=n.findLatestBindingsForAppByAppDescriptor(e),o=s=null),u?this.createAppFromManifest(u,t,r,i,o,s,c):(S("createAppFromDescriptor.exception.manifestNotFound",e),I.reject(a.APP_CREATE.ERROR.MANIFEST_NOT_FOUND))},createAppFromManifest:function(e,t,n,r,i,o,a){return m({bindingsForApp:e,appParams:r,helixContext:n,themeId:a,parentAppInstance:t},{interfaceId:i,interfaceVersion:o})}}}},function(e,t){e.exports=function(e,t,n,r,i,o,a,s){var c=o.register("hx.container.appInstance");function u(e,n,r,i,o,a){s.extend(!0,this,n),this.appInstanceId=e,this.themeId=i,this.messageQueue=[],this.manifest=n,this.bindings=n,this.params=r||{},this.parentAppInstance=a,this.status=o,this.windowState=t.WINDOW_STATE.RESTORE}return u.prototype={constructor:u,insertMessage:function(e){this.messageQueue.splice(0,0,e)},queueMessage:function(e){this.messageQueue.push(e)},flushMessages:function(){for(;this.messageQueue.length>0;){var e=this.messageQueue.shift(),t=e.topic,n=e.message;try{c("publish."+t,n),a.publish(t,n)}catch(e){c("message.publish.exception."+t,n,e)}}},getEndPointDescriptor:function(){var e=this.appDescriptor;return new r(e.publisherId,e.appId,e.appVersion,this.launchInterface.interfaceId,this.launchInterface.interfaceVersion)},show:function(t,r,o){e.doClientCallbackAsync(n.EVENTS.ON_APP_VIEW_SHOW,new i.AppViewShow(this,o),t,r,function(){this.window.style.display="block",t()}.bind(this))},hide:function(t,r,o){e.doClientCallbackAsync(n.EVENTS.ON_APP_VIEW_HIDE,new i.AppViewHide(this,o),t,r,function(){this.window.style.display="none",t()}.bind(this))}},u}},function(e,t){e.exports=function(e,t,n,r,i){return{getAppLaunchData:function(o){var a={authToken:null,context:null,provides:{context:[]},launchInterface:{id:null,version:null},params:[],services:null,environmentMaps:[],features:{},ajaxUrl:null};o.launchInterface.httpVerb===r.HTTP_VERB.GET&&o.launchInterface.tokenTransport===r.TOKEN_TRANSPORT_TYPE.LAUNCH_DATA&&(a.authToken=o.authToken),o.context&&(a.context=o.context.getElements()),a.launchInterface.id=o.launchInterface.interfaceId,a.launchInterface.version=o.launchInterface.interfaceVersion,a.params=o.params,o.bindings.provides&&o.bindings.provides.context&&(a.provides.context=o.bindings.provides.context),a.services=e.getAppLaunchDataServices(o);var s,c,u,p=n.getEnvironmentMaps(o.appDescriptor.fqId,t.config.bindings,t.config.mappings);return a.environmentMaps=p.value,a[i.CONSUMER_PROTOCOL.META_MEMBER_KEY_NAME]={environmentMaps:p.metaMaps},a.features=(s=o.bindings.demands.features,c=t.containerAppBindings.provides.features,u={},s.forEach((function(e){u[e]=-1!==c.indexOf(e)})),u),a.ajaxUrl=t.ajaxUrl,a}}}},function(e,t){e.exports=function(e,t,n,r,i,o,a,s,c,u,p,l,d,f,h,E,g,A){var v=d.register("hx.container.applaunch");function _(e,t,n,r,i,o){var a=r?{payload:{returnValue:r}}:{};E.sendResponse((function(e,n){f.publish(e,t,n.payload,!1)}),e,a,n,i,o)}function I(e){if(!e)return s.SCHEMA.NAVIGATE.ERROR.GENERAL_ERROR;var t=e.toLowerCase();for(var n in s.SCHEMA.NAVIGATE.ERROR){var r=s.SCHEMA.NAVIGATE.ERROR[n];if(-1!==t.indexOf(r))return r}return-1!==t.toLowerCase().indexOf("auth")?s.SCHEMA.NAVIGATE.ERROR.AUTHENTICATION_FAILED:s.SCHEMA.NAVIGATE.ERROR.GENERAL_ERROR}return p.addMessageHandler(s.TOPIC.FROM_APP.APP_READY,(function(e,t){if(t.appInstance){if(t.appInstance.launchTimer){var n=t.appInstance.publisherId+"."+t.appInstance.appId+".v"+t.appInstance.version,r={content:n+"/"+(t.appInstance.launchInterface.interfaceId+"."+t.appInstance.launchInterface.interfaceVersion),ApplicationId:n,appId:t.appInstance.appId};l.timeEnd("hx.container.online.landingtime",{content:r},!1),l.timeEnd(t.appInstance.launchTimer,{content:r,eventName:"Time_To_AppReady",flush:!0}),delete t.appInstance.launchTimer}var i=t.appInstance.actionParams;delete t.appInstance.actionParams,a.doClientCallback(c.EVENTS.ON_APP_READY,new u.AppReady(t.appInstance,i))}})),p.addMessageHandler(s.TOPIC.FROM_APP.EXPOSES_NAVIGATE_REQUEST,(function(t,n){if(n.appInstance){var r=e.get("app-initiated-navigate-exposes"),p=n.appInstance,l=n.payload.exposesInterfaceId,d=n.payload.exposesInterfaceVersion,f=function(e){var t=I(e);_(s.TOPIC.FROM_CONTAINER.EXPOSES_NAVIGATE_RESPONSE,n.appInstance.appInstanceId,n.payload.requestId,null,!0,t)},E=o.getExposedInterfaceByExposesInterface(p.publisherId,p.appId,p.version,l,d);if(!E)return v("onExposesNavigateRequest.warning."+s.SCHEMA.NAVIGATE.ERROR.INTERFACE_NOT_FOUND,p.appInstanceId,n.payload),void f(s.SCHEMA.NAVIGATE.ERROR.INTERFACE_NOT_FOUND);var g=E.uid;i.doAuthStepUp(p,E,h.navigate,(function(){var e=o.getExposedInterfaceByUid(g);if(e.authRequired)return v("onExposesNavigateRequest.warning."+s.SCHEMA.NAVIGATE.ERROR.AUTHENTICATION_FAILED,p.appInstanceId,n.payload),void f(s.SCHEMA.NAVIGATE.ERROR.AUTHENTICATION_FAILED);var t=p.launchInterface;p.launchInterface=e;var i=new u.ExposesLoaded(p,e,t,r);a.doClientCallback(c.EVENTS.ON_EXPOSES_LOADED,i),_(s.TOPIC.FROM_CONTAINER.EXPOSES_NAVIGATE_RESPONSE,p.appInstanceId,n.payload.requestId,null,!0)}),(function(e){f(e.code)}),r)}})),p.addMessageHandler(s.TOPIC.FROM_APP.INVOKES_NAVIGATE_REQUEST,(function(t,n){var i=n.payload.requestId,o=n.appInstance;i&&(n.appInstance.requestId=i);var p=null,l=n.payload.interfaceId,d=r.getExposedInterfaces(n.appInstance,l);if(0===d.length)return v("launch.exception",l,"Failed to resolve invoked interface id `"+l+"`. This may be because: no invokes interface called `"+l+"` is defined in your manifest; the end point is unavailable; or the end point is inaccessible."),void(i&&_(s.TOPIC.FROM_CONTAINER.INVOKES_NAVIGATE_RESPONSE,o.appInstanceId,i,{},!0,s.SCHEMA.NAVIGATE.ERROR.INTERFACE_NOT_FOUND));d.length>0&&(p=a.doClientCallback(c.EVENTS.ON_RESOLVE_APP_BINDING,new u.ResolveAppBinding(d,l))),p||(p=d[0]);var f=e.get("app-initiated-launch-request");a.doClientCallbackAsync(c.EVENTS.ON_APP_LAUNCH_REQUEST,new u.AppLaunchRequest(p,n.payload.params,n.payload.launchMode,o,i,f),null,null,(function(){var e={publisherId:p.app.publisherId,appId:p.app.appId,appVersion:p.app.version,appLaunchMode:n.payload.launchMode,interfaceId:p.interfaceId,interfaceVersion:p.interfaceVersion,params:n.payload.params,openerAppInstance:n.appInstance,actionParams:f};h.navigate(e,(function(){e.appLaunchMode&&e.appLaunchMode!==Helix.Constants.LAUNCH_MODE.CLOSE_AND_REPLACE||_(s.TOPIC.FROM_CONTAINER.INVOKES_NAVIGATE_RESPONSE,o.appInstanceId,i,{},!0)}),(function(e){var t=I(e.code);_(s.TOPIC.FROM_CONTAINER.INVOKES_NAVIGATE_RESPONSE,o.appInstanceId,i,{},!0,t)}))}))})),p.addMessageHandler(s.TOPIC.FROM_APP.LAUNCH_DATA_GET,(function(e,t,r){var i=g.activeAppInstances.getItemByKey(t.appInstanceId);i&&(!function(e){e.status=c.APP_STATUS.RUNNING;var t=n.getAppLaunchData(e);f.publish(s.TOPIC.FROM_CONTAINER.LAUNCH_DATA_SET,e.appInstanceId,t,!0)}(i),i.flushMessages())})),{doLegacyAppLaunchBehaviour:function(e){var n=e.parentAppInstance,r=e.destinationInterface,i=e.appParams,o=function(t){e.requestId&&_(s.TOPIC.FROM_CONTAINER.INVOKES_NAVIGATE_RESPONSE,n.appInstanceId,e.requestId,{},!0,t)};if(r.authRequired)return v("launch.exception.endPoint.notAuthorised",r.interfaceId,n.appInstanceId),void o(s.SCHEMA.NAVIGATE.ERROR.AUTHENTICATION_FAILED);var p=a.doClientCallback(c.EVENTS.ON_GET_APP_DISPLAY_CONTAINER,new u.GetAppDisplayContainer(e.destinationInterface,e.parentAppInstance,e.launchMode));if(!p)return!1!==p?(v("launch.exception.display.container.missing",r.interfaceId,n.appInstanceId),void o(s.SCHEMA.NAVIGATE.ERROR.GENERAL_ERROR)):null;var l=n?n.context:null,d={parentAppInstance:n,appParams:i,helixContext:l},f={iframeAttrs:null,displayContainerElement:p},h={launchMode:e.launchMode};if(t.createAppFromExposedBinding(r,d,f,h),e.requestId)switch(e.launchMode){case s.LAUNCH_MODE.CLOSE_AND_REPLACE:_(s.TOPIC.FROM_CONTAINER.INVOKES_NAVIGATE_RESPONSE,n.appInstanceId,e.requestId,{},!0);break;default:return}}}}},function(e,t){e.exports=function(e,t,n,r,i,o){o.register("appLaunchPost");function a(o){var a=[],c=e.parse(o.bindings.cpv).toString();return function(e,t){var n,r,i={};for(n in e)e.hasOwnProperty(n)&&(null!==(r=e[n])&&"string"!=typeof r&&(r=JSON.stringify(r)),i[n]=r,t.push((o=r,'\n\t<input type="hidden" name="'+s(n)+'" value="'+s(o)+'"/>')));var o}(t.get("Consumer").getLatest().transform(n.LAUNCH_DATA.POST,function(e){var t=r.getAppLaunchData(e),o=n.CONSUMER_PROTOCOL.META_MEMBER_KEY_NAME,a={hx_authtoken:(e.launchInterface.tokenTransport===i.TOKEN_TRANSPORT_TYPE.NONE?null:e.authToken)||"",hx_context:t.context,hx_launchinterface:t.launchInterface,hx_params:t.params,hx_services:t.services,hx_environmentmaps:t.environmentMaps};return a[o]=t[o],a}(o),c).toPlainObject(),a),a.join("")}function s(e){return e?e.replace(/"/g,"&quot;"):e}return{getPostLaunchHTML:function(e){return'<!DOCTYPE html><html><head><title>Helix App Bootstrap</title></head><body><form id="form1" method="POST" action="{app-url}">'+a(e)+'</form><script type="text/javascript">document.getElementById("form1").submit();<\/script >;</body></html>'}}}},function(e,t){e.exports=function(e,t,n,r,i,o,a,s,c,u,p,l,d,f,h){var E=u.register("hx.container.appmgmt"),g=l||{};function A(t,n){return n=e.get("container-initiated-close-app",n),t.actionParams=n,t.closeDefer=h.defer(),console.time("hx.c.closeapp - "+t.appInstanceId),t.closeDefer.promise.finally((function(){console.timeEnd("hx.c.closeapp - "+t.appInstanceId)})),E("app.close."+function(e){switch(e.status){case o.APP_STATUS.NOT_LOADED:return"running";case o.APP_STATUS.LOADING:return"loading";case o.APP_STATUS.CONNECTED:return"connected";case o.APP_STATUS.RUNNING:return"running";case o.APP_STATUS.CLOSING:return"closing";case o.APP_STATUS.CLOSED:return"closed";case o.APP_STATUS.ABORTING:return"aborting";default:return"aborted"}}(t),t),t.status===o.APP_STATUS.RUNNING&&(t.status=o.APP_STATUS.CLOSING),t.status===o.APP_STATUS.CLOSING?(t.closeTimerId=f.setTimeout((function(){!function(e,t){E("apps.close.exception.timeout",e),e.closeTimerId=null,v(e,t),r.doClientCallback(o.EVENTS.ON_APP_CLOSED,new a.AppClosed(e,t))}(t,n)}),d.appCloseTimeout),p.publish(i.TOPIC.FROM_CONTAINER.APP_CLOSE,t.appInstanceId,{}),t.closeDefer.promise):(v(t,n),t.closeDefer.promise)}function v(e,n){t.close(e,(function(){try{d.activeAppInstances.remove(e),e.viewPort.apps.remove(e),e.closeDefer.resolve(e)}catch(t){e.closeDefer.reject(e)}I(e)}),(function(){e.closeDefer.reject(e)}),n)}function _(e){e.closeTimerId&&(f.clearTimeout(e.closeTimerId),e.closeTimerId=null)}function I(e){e.framePhishTimerId&&(f.clearTimeout(e.framePhishTimerId),delete e.framePhishTimerId)}function S(e,t){function n(e){var t,n=0,r=e.replace(/v/i,"").split(".");for(t=r.length;t<i.NUM_VERSION_PARTS;t++)r.push("0");for(t=0;t<r.length;t++){var o=parseInt(r[t],10);n=1e3*n+(isNaN(o)?0:o)}return n}var r=n(e.version||e.appVersion),o=n(t.version||t.appVersion);return r===o?0:r<o?-1:1}function O(e,t,n){var i=[];n=n||"*";var s=d.appManifestsByAppId[e.versionIndependentId];return s?i=s.filter((function(t){return c.versionsMatch(e.appVersion,t.appVersion)})).filter((function(e){return!t||!![].concat(e.exposes.ui,e.exposes.data).find((function(e){return t===e.interfaceId&&("*"===n||n.toString()===e.interfaceVersion)}))})):E("bindings.exception.findLatestForAppByAppDescriptor.notfound",e.fqId),i.sort(S),i.length>1&&(i=r.doClientCallback(o.EVENTS.ON_RESOLVE_APP_VERSION,new a.ResolveAppVersion(i,t,n))||i),i.length>0?i[i.length-1]:null}return s.addMessageHandler(i.TOPIC.FROM_APP.APP_CLOSING,(function(t,n){var s=n.appInstance,c=s.status,u=n.payload.returnValue;s.status=o.APP_STATUS.CLOSING,_(s),E("app.close",s);var l=e.get("app-initiated-closing");r.doClientCallback(o.EVENTS.ON_APP_CLOSE,new a.AppClose(s,u,l)),A(s,l).then((function(){if(s.parentAppInstance&&s.parentAppInstance.requestId){var e={requestId:s.parentAppInstance.requestId,returnValue:u,isFinal:!0,isSuccess:!0};p.publish(i.TOPIC.FROM_CONTAINER.INVOKES_NAVIGATE_RESPONSE,s.parentAppInstance.appInstanceId,e)}}),(function(){s.status=c}))})),s.addMessageHandler(i.TOPIC.FROM_APP.APP_CLOSED,(function(t,n){var i=d.activeAppInstances.getItemByKey(n.appInstanceId);if(i){_(i);var s=e.get("app-initiated-app-closed",i.actionParams);delete i.actionParams,n.payload.cancel?(E("app.closed.cancelled",i),i.closeDefer.reject(i),i.status=o.APP_STATUS.RUNNING,r.doClientCallback(o.EVENTS.ON_APP_CLOSED_CANCELLED,new a.AppClosedCancelled(i,s))):(E("app.closed",i),i.status=o.APP_STATUS.CLOSED,v(i,s),r.doClientCallback(o.EVENTS.ON_APP_CLOSED,new a.AppClosed(i,s)))}})),s.addMessageHandler(i.TOPIC.FROM_APP.EXPOSES_LOADED,(function(e,t,i){if(t.appInstance){var s=t.appInstance,c=t.payload.exposesInterfaceId,u=t.payload.exposesInterfaceVersion,p=s.exposes.ui.find((function(e){return e.interfaceId===c&&e.interfaceVersion===u}));if(p){var l=n.getExposedInterfaceByUid(p.uid),d=s.launchInterface;s.launchInterface=l;var f=new a.ExposesLoaded(s,l,d);r.doClientCallback(o.EVENTS.ON_EXPOSES_LOADED,f)}else E("onExposesLoaded.exception.exposes-ui.not-found",s.appInstanceId,t.payload)}})),s.addMessageHandler(i.TOPIC.FROM_APP.RESIZE_REQUEST,(function(e,t){var n=d.activeAppInstances.getItemByKey(t.appInstanceId);if(n){var i=parseInt(t.payload.height,10);r.doClientCallbackAsync(o.EVENTS.ON_APP_VIEW_RESIZE,new a.AppViewResize(n,i),null,null,(function(){n.window&&(n.window.style.height=i+"px")}))}})),s.addMessageHandler(i.TOPIC.FROM_APP.UPDATE_PAGE_INFO,(function(e,t){t.appInstance&&JSON.stringify(t.appInstance.pageInfo)!==JSON.stringify(t.payload)&&(t.appInstance.pageInfo=t.payload,r.doClientCallback(o.EVENTS.ON_UPDATE_PAGE_INFO,new a.UpdatePageInfo(t.appInstance)))})),{appLoadTimeout:g.appLoadTimeout||3e4,cancelFramePhishCheck:I,cleanupAppInstance:v,closeActiveApps:function(t){return E("apps.close.active"),t=e.get("container-initiated-close-apps",t),d.activeAppInstances.map((function(e){return A(e,t)}))},closeAllApps:function(t){t=e.get("container-initiated-close-all",t);var n=[];return d.viewPorts.forEach((function(e){var r=h.defer();e.closeAll((function(){r.resolve()}),(function(e){r.reject(e)}),t),n.push(r.promise)})),h.all(n)},closeApp:A,findLatestBindingsForAppByAppDescriptor:O,findAppManifestByAppDescriptor:function(e,t,n){return O(e,t,n)},getExposedInterfaces:function(e,t){return e.bindings.invokes.ui.filter((function(e){return e.id===t})).map((function(e){return n.getExposedInterfaceByUid(e.uid)}))},getAppDataServiceEndpoints:function(e){return e?e.invokes.data.filter((function(e){return e.type!==o.DATASERVICETYPES.HELIX_BUS})).map((function(e){return{id:e.id,resolvesTo:e.resolvesTo}})):[]},refreshApp:function(e){var t={refreshReason:i.REFRESH_REASON.USER_INITIATED};p.publish(i.TOPIC.FROM_CONTAINER.REFRESH,e.appInstanceId,t)},startFramePhishCheck:function(e,t){e.framePhishTimerId=f.setTimeout((function(){e.framePhishTimerId&&(E("exception.framePhish",e.appInstanceId,e.url),delete e.framePhishTimerId,t(),v(e))}),3e4)},versionCompare:S}}},function(e,t){e.exports=function(e,t,n,r,i,o,a,s,c,u,p,l,d,f){var h=s||{},E={};function g(e){h.appServiceCloseTimeout&&(E[e.appInstanceId]=d.setTimeout((function(){t.closeApp(e),delete E[e.appInstanceId]}),1e3*h.appServiceCloseTimeout))}function A(t,o){var a,s=l.defer(),c=t.bindings.invokes.data,A=c.find((function(e){return e.id===o}));if(!A)return s.reject({code:r.APP_SERVICE.ERROR.SERVICE_NOT_FOUND,message:'Unable to find requested app service with invokes interface id "'+o+'".'}),s.promise;if(A.type!==i.DATASERVICETYPES.HELIX_BUS)return s.reject({code:r.APP_SERVICE.ERROR.SERVICE_ERROR,message:"The service being invoked is not an app service (i.e dataServiceType is not HELIX_BUS)"}),s.promise;if(!(a=n.getExposedInterfaceByUid(A.uid)))return s.reject({code:r.APP_SERVICE.ERROR.SERVICE_ERROR,message:'App service invokes interface id "'+o+'" does not resolve to any corresponding app exposes data interface.'}),s.promise;var v=u.viewPorts.getItemByKey(r.VIEW_PORT.APP_SERVICES_ID);if(!v){var _=f.getElementById(r.VIEW_PORT.APP_SERVICES_ID,!0);v=new p(r.VIEW_PORT.APP_SERVICES_ID,_,{isAppService:!0}),u.viewPorts.push(v)}var I=v.apps.find((function(e){return e.launchInterface.uid===a.uid}));return I?(!function(e){if(!h.appServiceCloseTimeout)return;d.clearTimeout(E[e.appInstanceId]),g(e)}(I.appInstanceId),s.resolve({appInstance:I,interfaceId:a.interfaceId,interfaceVersion:a.interfaceVersion})):e.createAppFromExposedBinding(a,null,null).done((function(e){g(e),s.resolve({appInstance:e,interfaceId:a.interfaceId,interfaceVersion:a.interfaceVersion})})),s.promise}o.addMessageHandler(r.TOPIC.FROM_APP.APP_SERVICE_REQUEST,(function(e,t,n){if(t.appInstance){var i=t.payload.operation,o=t.appInstance.appInstanceId,s={isFinal:!0,isSuccess:!0,requestId:t.payload.requestId};A(t.appInstance,t.payload.interfaceId).then((function(e){var n=e.appInstance,u={interfaceId:e.interfaceId,interfaceVersion:e.interfaceVersion,operation:i,params:t.payload.params||{}};c.sendRequest((function(e,t){a.publish(e,n.appInstanceId,t.payload,!1)}),r.TOPIC.FROM_CONTAINER.APP_SERVICE_REQUEST,{payload:u},(function(e){s.returnValue=e.returnValue,a.publish(r.TOPIC.FROM_CONTAINER.APP_SERVICE_RESPONSE,o,s)}),(function(e,t){s.isSuccess=!1,s.error={code:e},t.error&&t.error.message&&(s.error.message=t.error.message),a.publish(r.TOPIC.FROM_CONTAINER.APP_SERVICE_RESPONSE,o,s)}),0)})).fail((function(e){s.isSuccess=!1,s.error={code:e.code,message:e.message},a.publish(r.TOPIC.FROM_CONTAINER.APP_SERVICE_RESPONSE,o,s)}))}})),o.addMessageHandler(r.TOPIC.FROM_APP.APP_SERVICE_RESPONSE,(function(e,t,n){c.onResponse(t)})),o.addMessageHandler(r.TOPIC.FROM_APP.INVALIDATE_APP_DATA,(function(e,t,n){var i=t.appInstanceId;u.activeAppInstances.forEach((function(e){e.appInstanceId!==i&&a.publish(r.TOPIC.FROM_CONTAINER.REFRESH,e.appInstanceId,t.payload)}))}))}},function(e,t){e.exports=function(e,t,n,r,i,o){var a,s;i.register("hx.container.appview");function c(i,c,u,p,l){i.viewPort=c;var d=i.launchDetails.launchMode,f=new r.AppOpening(i,l),h=function(){i.viewPort.add(i),function(t,i,o,c){var u=function(){t.viewPort.show((function(){t.show(o,null,i)}),i)},p=function(){if(t.launchInterface.httpVerb===n.HTTP_VERB.POST){if(!t.resolvesTo)throw new Error("Unable to create form POST since appInstance.resolvesTo was not supplied");var o=s.getPostLaunchHTML(t);e.doClientCallbackAsync(n.EVENTS.ON_APP_VIEW_SET_HTML,new r.AppViewSetHtml(t,o.replace("{app-url}",t.resolvesTo),i),u,c,(function(){var e=t.resolvesTo.split("?")[0];e.indexOf("#")>0&&(e=e.split("#")[0]);var n=t.window.src.replace("about:blank",e);t.window.contentWindow.document.open("text/html","replace"),t.window.contentWindow.document.write(o.replace("{app-url}",n)),t.window.contentWindow.document.close(),u()}))}else u()},l=new r.AppCreateWindow(t,{border:"0",frameBorder:"0",marginheight:"0",marginwidth:"0",width:"100%",height:"100%",scrolling:"no",allowTransparency:"true",title:"Main content"},i);e.doClientCallbackAsync(n.EVENTS.ON_APP_CREATE_WINDOW,l,p,c,(function(){var e=t.launchInterface.httpVerb===n.HTTP_VERB.POST?t.url.replace(/^(.*?)\?/,"about:blank?"):t.url,r=a.createIframeContainer([t.viewPort.container],t.appInstanceId,e,t.launchInterface.httpVerb,l.defaultWindowAttributes);t.window=r.getIframe(),t.container=r,p()}))}(i,l,u,p)};if(c.isAppService)h();else{if(d===t.LAUNCH_MODE.MODAL||c.isModal){if(!c.isModal||d===t.LAUNCH_MODE.CLOSE_AND_REPLACE)throw new Error("Modal launch modes require modal viewport")}else if(0===c.apps.count()&&d!==t.LAUNCH_MODE.CLOSE_AND_REPLACE)throw new Error("Invalid launch mode. Non-modal viewports first app must be opened with CLOSE_AND_REPLACE");if(d===t.LAUNCH_MODE.HIDE_CURRENT&&i.viewPort.apps.count()>0&&(i.parentAppInstance=i.viewPort.apps.lastItem()),d===t.LAUNCH_MODE.MODAL&&c.isModal&&c.apps.count()>0&&(d=i.launchDetails.launchMode=t.LAUNCH_MODE.HIDE_CURRENT,i.parentAppInstance=c.apps.lastItem()),d===t.LAUNCH_MODE.CLOSE_AND_REPLACE)e.doClientCallbackAsync(n.EVENTS.ON_CLOSE_AND_REPLACE_APP_OPENING,f,h,p,(function(){(o.viewPorts.find((function(e){if(!e.isModal)return!1;var t=e.apps.firstItem();return!(!t||!t.parentAppInstance)&&t.parentAppInstance.viewPort===c}))||c).closeAll(h,(function(e){e.viewPort.show((function(){e.show((function(){p(e)}),null,l)}),l)}),l)}));else if(d===t.LAUNCH_MODE.HIDE_CURRENT)e.doClientCallbackAsync(n.EVENTS.ON_HIDE_CURRENT_APP_OPENING,f,h,p,(function(){i.parentAppInstance&&i.parentAppInstance.hide(h,(function(){p(i.parentAppInstance)}),l)}));else{if(d!==t.LAUNCH_MODE.MODAL)throw new Error("Unable to open App. The "+i.launchDetails.launchMode+" launch mode is not a supported LAUNCH_MODE.");e.doClientCallbackAsync(n.EVENTS.ON_MODAL_APP_OPENING,f,h,p,(function(){h()}))}}}return{require:function(e,t,n){a=e,s=t,n},open:function(i,a,s,u){var p=i.launchDetails.launchMode,l=i.launchInterface.type&&i.launchInterface.type===n.DATASERVICETYPES.HELIX_BUS;e.doClientCallbackAsync(n.EVENTS.ON_PROVIDE_APP_VIEW_PORT_ID,new r.ProvideAppViewPortId(i,p,l,u),(function(e){if(!e)throw new Error("view port id must be provided when opening app");var t=o.viewPorts.getItemByKey(e);if(!t)throw new Error("viewport #"+e+" not found");c(i,t,a,s,u)}),s,(function(e){if(l)e(t.VIEW_PORT.APP_SERVICES_ID);else switch(p){case t.LAUNCH_MODE.MODAL:e(t.VIEW_PORT.MODAL_ID);break;case t.LAUNCH_MODE.CLOSE_AND_REPLACE:e(t.VIEW_PORT.MAIN_ID);break;case t.LAUNCH_MODE.HIDE_CURRENT:e(i.parentAppInstance&&i.parentAppInstance.viewPort.isModal?t.VIEW_PORT.MODAL_ID:t.VIEW_PORT.MAIN_ID)}}))},close:function(i,o,s,c){var u=function(){var a=i.launchDetails.launchMode,u=new r.AppClosing(i,c);if(a===t.LAUNCH_MODE.CLOSE_AND_REPLACE)e.doClientCallbackAsync(n.EVENTS.ON_CLOSE_AND_REPLACE_APP_CLOSING,u,o,s,(function(){o()}));else if(a===t.LAUNCH_MODE.HIDE_CURRENT)e.doClientCallbackAsync(n.EVENTS.ON_HIDE_CURRENT_APP_CLOSING,u,o,s,(function(){i.parentAppInstance.viewPort.show((function(){i.parentAppInstance.show(o,null,c)}),c)}));else{if(a!==t.LAUNCH_MODE.MODAL)throw new Error("Unable to close App. The "+i.launchDetails.launchMode+" launch mode is not a supported LAUNCH_MODE.");e.doClientCallbackAsync(n.EVENTS.ON_MODAL_APP_CLOSING,u,o,s,(function(){i.viewPort.hide(o,c)}))}};e.doClientCallbackAsync(n.EVENTS.ON_APP_REMOVE_WINDOW,new r.AppRemoveWindow(i,c),u,s,(function(){a.removeIframeContainer(i),u()}))}}}},function(e,t){e.exports=function(e,t,n,r,i,o,a,s,c,u){var p=a.register("hx.container.authentication");return n.bind(i.EVENTS.ON_AUTH_LEVEL_CHANGED,(function(){if(s.authStepUpWorkflowDetailsStack.length){var e=s.authStepUpWorkflowDetailsStack.pop();t.getExposedInterfaceByUid(e.destinationInterfaceUid).authRequired?e.doAuthWorkFlowErrorAction(new c.NavigateErrorResponse(r.NAVIGATE.ERROR.AUTHENTICATION_FAILED),e.authAppInstance):e.doAuthWorkFlowSuccessAction(e.authAppInstance)}}),this),n.bind(i.EVENTS.ON_SECURITY_AUTH_CANCELLED,(function(){if(s.authStepUpWorkflowDetailsStack.length){var e=s.authStepUpWorkflowDetailsStack.pop();e.doAuthWorkFlowErrorAction(new c.NavigateErrorResponse(r.NAVIGATE.ERROR.AUTHENTICATION_CANCELLED),e.authAppInstance)}}),this),{doAuthStepUp:function(a,l,d,f,h,E){if(!l)throw new Error("container.authentication.parameter - destinationExposedInterface must have a valid value");if(l.authRequired){var g=null;l.authUid&&(g=t.getExposedInterfaceByUid(l.authUid));var A=new o.AuthStepUpRequired(g,l,a,E);n.doClientCallbackAsync(i.EVENTS.ON_AUTH_STEP_UP_REQUIRED,A,f,(function(e,t){h(new c.NavigateErrorResponse(e,t))}),(function(){!function(a,l,d,f){var h=a.authInterface;h||(h=t.getExposedInterfaceByUid(a.destinationInterface.authUid));if(!h&&n.hasClientCallback(i.EVENTS.ON_RESOLVE_AUTH_PROVIDER)){var E=new o.ResolveAuthProvider(a.destinationInterface,a.parentAppInstance,a.actionParams);h=n.doClientCallback(i.EVENTS.ON_RESOLVE_AUTH_PROVIDER,E)}if(!h)return void f(new c.NavigateErrorResponse(r.NAVIGATE.ERROR.AUTHENTICATOR_NOT_FOUND));var g=function(t,n){t?e.closeApp(t,a.actionParams).done((function(){n()})):n()},A={destinationInterfaceUid:a.destinationInterface.uid,authNavigateRequest:{actionParams:a.actionParams,appLaunchMode:r.LAUNCH_MODE.MODAL,publisherId:h.app.publisherId,appId:h.app.appId,appVersion:h.app.version,interfaceId:h.interfaceId,interfaceVersion:h.interfaceVersion,openerAppInstance:h.authRequired?null:a.parentAppInstance,isAuthAppRequest:!0},doAuthWorkFlowSuccessAction:function(e){g(e,d)},doAuthWorkFlowErrorAction:function(e,t){g(t,(function(){if(a.parentAppInstance){var t=new o.ExposesLoaded(a.parentAppInstance,a.parentAppInstance.launchInterface,a.parentAppInstance.launchInterface,a.actionParams);n.doClientCallback(i.EVENTS.ON_EXPOSES_LOADED,t),f(e)}else f(e)}))}};s.authStepUpWorkflowDetailsStack||(s.authStepUpWorkflowDetailsStack=[]);s.authStepUpWorkflowDetailsStack.push(A),function(e,t){p(u.format("Launch authenticator: {publisherId}.{appId}.v{appVersion} interface: {interfaceId}.{interfaceVersion}",e.authNavigateRequest)),t(e.authNavigateRequest,(function(t){var n=t.appInstance;e.authAppInstance=n}),(function(t){var n=s.authStepUpWorkflowDetailsStack.indexOf(e);n>=0&&s.authStepUpWorkflowDetailsStack.splice(n,1),e.doAuthWorkFlowErrorAction(t)}))}(A,l)}(A,d,f,h)}))}else f()}}}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=e.register("hx.container.bindings"),i=null,o=n,a=function(e,n){t.extend(!0,this,n),this.app=e};return{getExposedInterfaceByUid:function(e){return i[e]},getExposedInterfaceByExposesInterface:function(e,t,n,r,o){var a="number"==typeof o?o+"":o;if(!(e&&t&&n&&r&&a))throw new Error("Bindings.getExposedInterfaceByExposesInterface.missing-parameters");for(var s in i)if(i.hasOwnProperty(s)){var c=i[s];if(c.app.publisherId===e&&c.app.appId===t&&c.app.version===n&&c.interfaceId===r&&c.interfaceVersion===a)return c}return null},setExposedInterfacesByUid:function(e){i=function(e){if(!e)return r("warning.null","supplied bindingsForApps was null"),null;for(var t={},n=0;n<e.length;n++)for(var i=e[n],o=[].concat(i.exposes.ui,i.exposes.data),s=0;s<o.length;s++)t[o[s].uid]=new a(i,o[s]);return t}(e)},updateExposedInterfacesByUid:function(e){i&&e&&Object.keys(i).forEach((function(t){var n=e.hasOwnProperty(t);i[t].authRequired=n,i[t].authUid=n&&e[t]?e[t]:null}))},asbCreateContainerService:function(e){var t=o.containerAppBindings;i[e.uid]=new a(t,e)}}}},function(e,t,n){"use strict";e.exports=function(e,t,n,r){var i=function(){function i(){this._log=t.register("hx.core.clientcallback"),this._clientCallbacks={},this._asyncClientCallbacks={}}return i.prototype.bind=function(t,n,i,o,a){this._clientCallbacks[t]||(this._clientCallbacks[t]=[]);var s={fn:n,scope:i||(r.Helix.isApp?r.Helix.App:r.Helix.Container),data:o};return a!==e.BINDINGS.APPEND&&void 0!==a||(this._clientCallbacks[t].push(s),this._log("bind."+t+".append",s)),a===e.BINDINGS.PREPEND&&(this._clientCallbacks[t].splice(0,0,s),this._log("bind."+t+".prepend",s)),a===e.BINDINGS.REPLACE&&(this._clientCallbacks[t]=[s],this._log("bind."+t+".replace",s)),s},i.prototype.bindAsync=function(t,n,r){var i=null;if(this._asyncClientCallbacks.hasOwnProperty(t)){if(!r)throw new Error("A handler is already bound to this event. You can only bind a single handler to an async callback.");if(r!==e.BINDINGS.REPLACE)throw new Error("insertMode is not valid - the only valid insert mode is Constants.BINDINGS.REPLACE.");i=this._asyncClientCallbacks[t]}return this._asyncClientCallbacks[t]=n,this._log("bind.async."+t,{fn:n}),i},i.prototype.doClientCallback=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._log("doClientCallback."+e,t);var r=null,i=this._clientCallbacks[e];if(!i)return r;for(var o=0;o<i.length;o++){var a=i[o];void 0!==a.data&&t.push(a.data),this._log.args("handler."+e,t);var s=a.fn.apply(a.scope,t);void 0!==s&&(r=s)}return r},i.prototype.doClientCallbackAsync=function(e,t,i,o,a){if(this.doClientCallback(e,t),a){var s=a;a=function(){s(i,o)}}var c=this._asyncClientCallbacks[e];c?c.call(r,t,i||n.noop,o||n.noop,a||n.noop):a&&a()},i.prototype.hasClientCallback=function(e){var t=this._clientCallbacks[e];return!!t&&t.length>0},i.prototype.hasClientCallbackAsync=function(e){return!!this._asyncClientCallbacks[e]},i.prototype.unbind=function(e,t,n,r){var i=this._clientCallbacks[e],o=[];if(i)for(var a=i.length-1;a>=0;){var s=i[a];this._isMatch(s,t,n,r)&&(o.push(s),i.splice(a,1),this._log.args("unbind."+e,{fn:t,scope:n,data:r})),a--}return o},i.prototype.unbindAsync=function(e){var t=this._asyncClientCallbacks[e];return delete this._asyncClientCallbacks[e],this._log.args("unbind.async."+e,{fn:t}),t},i.prototype._isMatch=function(e,t,n,r){return t&&n&&r?e.fn===t&&e.scope===n&&e.data===r:t&&n?e.fn===t&&e.scope===n:t&&r?e.fn===t&&e.data===r:!t||e.fn===t},i}();return{createInstance:function(){return new i}}}},function(e,t,n){"use strict";e.exports={ON_AJAX_REQUEST:function(e,t,n,r){},ON_APP_AUTH_TOKEN_REQUEST:function(e,t,n,r){},ON_APP_CLOSE:function(e){},ON_APP_CLOSED:function(e){},ON_APP_CLOSED_CANCELLED:function(e){},ON_APP_CONNECTED:function(e){},ON_APP_CREATE:function(e,t,n,r){},ON_APP_CREATE_WINDOW:function(e,t,n,r){},ON_APP_DISCONNECTED:function(e){},ON_APP_ERROR_FRAMEWORK:function(e){},ON_APP_LAUNCHED:function(e){},ON_APP_LAUNCH_REQUEST:function(e,t,n,r){},ON_APP_READY:function(e){},ON_APP_REMOVE_WINDOW:function(e,t,n,r){},ON_APP_VIEW_HIDE:function(e,t,n,r){},ON_APP_VIEW_RESIZE:function(e,t,n,r){},ON_APP_VIEW_SET_HTML:function(e,t,n,r){},ON_APP_VIEW_SHOW:function(e,t,n,r){},ON_APP_WINDOW_STATE_CHANGE:function(e,t){},ON_AUTH_LEVEL_CHANGED:function(e){},ON_AUTH_STEP_UP_REQUIRED:function(e,t,n,r){},ON_AUTH_TOKENS_RECEIVED:function(e,t,n,r){},ON_CANCEL_CONTAINER_MESSAGE:function(e){},ON_CHECK_APP_USER_PERMISSION:function(e){},ON_CONTAINER_ERROR_FRAMEWORK:function(e){},ON_CONTEXT_CHANGE:function(e,t,n,r){},ON_CLOSE_AND_REPLACE_APP_CLOSING:function(e,t,n,r){},ON_CLOSE_AND_REPLACE_APP_OPENING:function(e,t,n,r){},ON_CREATE_VIEWPORTS:function(e,t,n,r){},ON_EXPOSES_LOADED:function(e){},ON_GETBINDINGS_REQUEST:function(e,t,n,r){},ON_GET_APP_DISPLAY_CONTAINER:function(e){},ON_HIDE_CURRENT_APP_CLOSING:function(e,t,n,r){},ON_HIDE_CURRENT_APP_OPENING:function(e,t,n,r){},ON_HIDE_WAIT_INDICATOR:function(e){},ON_INIT_COMPLETE:function(){},ON_MODAL_APP_CLOSING:function(e,t,n,r){},ON_MODAL_APP_OPENING:function(e,t,n,r){},ON_NOTIFY_APP_CONTEXT_CHANGED:function(e,t,n,r){},ON_OA_SECURITY_TOKEN_REQUESTED:function(e){},ON_OA_SECURITYALERT:function(e){},ON_PREPARE_LAUNCH_PARAMETERS:function(e,t,n,r){},ON_QUEUE_APP_MESSAGES:function(e,t,n,r){},ON_PROVIDE_APP_VIEW_PORT_ID:function(e,t,n,r){},ON_REAUTH_COMPLETE:function(){},ON_RESOLVE_APP_BINDING:function(e){},ON_RESOLVE_APP_VERSION:function(e){},ON_RESOLVE_AUTH_PROVIDER:function(e){},ON_SECURITY_AUTH_CANCELLED:function(e){},ON_SECURITY_BEFORE_TOKEN_CHANGE:function(e){},ON_SECURITY_SESSION_FAILED:function(e){},ON_SESSION_EXPIRED:function(e){},ON_SET_DEFAULT_THEME:function(e,t,n,r){},ON_SHOW_CONTAINER_MESSAGE:function(e){},ON_SHOW_WAIT_INDICATOR:function(e){},ON_SIGN_IN_MESSAGE:function(){},ON_SIGN_OUT_MESSAGE:function(){},ON_UPDATE_PAGE_INFO:function(e){},ON_VIEWPORT_HIDE:function(e,t,n,r){},ON_VIEWPORT_SHOW:function(e,t,n,r){}}},function(e,t){e.exports=function(){return{ON_AJAX_REQUEST:{async:!0},ON_APP_AUTH_TOKEN_REQUEST:{async:!0},ON_APP_CLOSE:{},ON_APP_CLOSED:{},ON_APP_CLOSED_CANCELLED:{},ON_APP_CONNECTED:{},ON_APP_CREATE:{async:!0},ON_APP_CREATE_WINDOW:{async:!0},ON_APP_DISCONNECTED:{},ON_APP_ERROR_FRAMEWORK:{},ON_APP_LAUNCHED:{},ON_APP_LAUNCH_REQUEST:{async:!0},ON_APP_READY:{},ON_APP_REMOVE_WINDOW:{async:!0},ON_APP_VIEW_HIDE:{async:!0},ON_APP_VIEW_RESIZE:{async:!0},ON_APP_VIEW_SET_HTML:{async:!0},ON_APP_VIEW_SHOW:{async:!0},ON_APP_WINDOW_STATE_CHANGE:{async:!0},ON_AUTH_LEVEL_CHANGED:{},ON_AUTH_STEP_UP_REQUIRED:{async:!0},ON_AUTH_TOKENS_RECEIVED:{async:!0},ON_CANCEL_CONTAINER_MESSAGE:{},ON_CHECK_APP_USER_PERMISSION:{},ON_CONTAINER_ERROR_FRAMEWORK:{},ON_CONTEXT_CHANGE:{async:!0},ON_CLOSE_AND_REPLACE_APP_CLOSING:{async:!0},ON_CLOSE_AND_REPLACE_APP_OPENING:{async:!0},ON_CREATE_VIEWPORTS:{async:!0},ON_EXPOSES_LOADED:{},ON_GETBINDINGS_REQUEST:{async:!0},ON_GET_APP_DISPLAY_CONTAINER:{},ON_HIDE_CURRENT_APP_CLOSING:{async:!0},ON_HIDE_CURRENT_APP_OPENING:{async:!0},ON_HIDE_WAIT_INDICATOR:{},ON_INIT_COMPLETE:{},ON_MODAL_APP_CLOSING:{async:!0},ON_MODAL_APP_OPENING:{async:!0},ON_NOTIFY_APP_CONTEXT_CHANGED:{async:!0},ON_OA_SECURITY_TOKEN_REQUESTED:{},ON_OA_SECURITYALERT:{},ON_PREPARE_LAUNCH_PARAMETERS:{async:!0},ON_QUEUE_APP_MESSAGES:{async:!0},ON_PROVIDE_APP_VIEW_PORT_ID:{async:!0},ON_REAUTH_COMPLETE:{},ON_RESOLVE_APP_BINDING:{},ON_RESOLVE_APP_VERSION:{},ON_RESOLVE_AUTH_PROVIDER:{},ON_SECURITY_AUTH_CANCELLED:{},ON_SECURITY_BEFORE_TOKEN_CHANGE:{},ON_SECURITY_SESSION_FAILED:{},ON_SESSION_EXPIRED:{},ON_SET_DEFAULT_THEME:{async:!0},ON_SHOW_CONTAINER_MESSAGE:{},ON_SHOW_WAIT_INDICATOR:{},ON_SIGN_IN_MESSAGE:{},ON_SIGN_OUT_MESSAGE:{},ON_UPDATE_PAGE_INFO:{},ON_VIEWPORT_HIDE:{async:!0},ON_VIEWPORT_SHOW:{async:!0}}}},function(e,t,n){e.exports=function(e,t){var r=n(136),i=n(371),o=n(372),a=n(68),s=n(373),c=n(374)(e,t),u=n(375)();return{ContextElement:r.ContextElement,Context:i.Context,ErrorCodes:o,AppDescriptor:a.AppDescriptor,EndPointDescriptor:s.EndPointDescriptor,QueryString:c,AppConfig:u}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(136),i=function(){function e(e){var t=this;e=e||[],this._elements=[],e.map((function(e){return t.add(e.ns,e.type,e.data)}))}return e.prototype.add=function(e,t,n){if(this.get(e,t))throw new Error("Context with namespace "+e+" and type "+t+" already exists. Use update operation instead.");this._elements.push(new r.ContextElement(e,t,n))},e.prototype.clone=function(){return new e(this.getElements().map((function(e){return e.clone()})))},e.prototype.get=function(e,t){var n=this._elements.filter((function(n){return n.ns===e&&n.type===t}));return n.length>0?n[0]:null},e.prototype.getData=function(e,t){var n=this.get(e,t);return n?n.data:null},e.prototype.getElements=function(){return this._elements},e.prototype.remove=function(e,t){for(var n,i=r.ContextElement.getKey(e,t),o=0;o<this._elements.length;o++){if(this._elements[o].getKey()===i){n=this._elements.splice(o,1)[0];break}}return n},e.prototype.update=function(e,t,n){var r=this.get(e,t);if(!r)throw new Error("No context exists with namespace "+e+" and type "+t+".");r.data=n},e.Element=r.ContextElement,e}();t.Context=i},function(e,t,n){"use strict";e.exports={SUCCESS:"Ok",ACCESS_DENIED:"Access denied",LOA_INSUFFICIENT:"Access denied, insufficient level of authentication",ENVIRONMENT_MISSING:"No environment config info found for current runtime",MANIFEST_NOT_FOUND:"Manifest not found",LAUNCH_URL_NOT_FOUND:"Launch URL not found",CONTAINER_SERVICE_ACCESS_DENIED:"Access denied to container service",CONTAINER_SERVICE_REQUEST_FAILED:"Container service failed"}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r)||this;return a.interfaceId=i,a.interfaceVersion=o,a}return i(t,e),t.prototype.isValid=function(){return!!e.prototype.isValid.call(this)&&!!this.interfaceId&&!!this.interfaceVersion},t.prototype.toString=function(){return e.prototype.toString.call(this)+"."+this.interfaceId+"/"+this.interfaceVersion},t}(n(68).AppDescriptor);t.EndPointDescriptor=o},function(e,t){e.exports=function(e,t){function n(n){var r;n||(n=t.location.href);var i=null;if(n.indexOf("#")>0){var o=n.split("#");n=o[0],i=o[1]}var a,s,c=e.parseUrl(n),u=c.port?c.host+":"+c.port:c.host;for(a in r=c.protocol+"://"+u+c.path,c.params)!1!==(s=c.params[a])&&void 0!==s||(s=""),this[a]=decodeURIComponent(s);i&&(this["#"]=i),this.getBaseUrl=function(){return r.match(/\.[a-z]{3,5}$/i)||r.match(/\/$/)||(r+="/"),r}}return n.prototype={constructor:n,getArgs:function(){var e={};for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}},n.join=function(e){var t=e.hasOwnProperty("getBaseUrl")?e.getBaseUrl():"",n="";for(var r in e)if("#"!==r&&"function"!=typeof e[r]){var i=e[r],o="object"==typeof i?JSON.stringify(i):i;n=n+(n.length>0?"&":"")+r+"="+encodeURIComponent(o)}return n.length>0&&(t=t.length>0?t+"?"+n:n),e["#"]&&(t=t+"#"+e["#"]),t},n.addReplaceValue=function(e,r,i){i||(i=t.location.href);var o=new n(i);return o[e]=r,this.join(o)},n.checkQueryString=function(e,t){if(0===e.indexOf("#")||0===e.indexOf("javascript:"))return e;var r=[],i=["oahpv","oahi","oaht","oahu","oahpm","oahj"],o=new n(e),a=t?new n(t):n.current||new n;return void 0!==a[i[0]]&&(r=r.concat(r,i)),r.push("hxtx"),r.push("hxenv"),r.push("hxthm"),r.push("hxmap"),r.forEach((function(e){void 0!==a[e]&&(o[e]=a[e])})),n.join(o)},n}},function(e,t,n){"use strict";e.exports=function(){return{appOptions:{enableResizeNotifications:!0}}}},function(e,t){e.exports=function(e,t,n,r,i,o){var a=r.register("hx.container.session");e.registerSuccessProcessor(t.PROCESSORS.CONTAINER_SESSION,(function(e){var t=e.getUrl();switch(n.getRelativeAjaxUrl(t)){case o.getAuthTokens:case o.ping:break;default:i.sendUniverseKeepAliveMessage()}})),e.registerFailProcessor(t.PROCESSORS.CONTAINER_SESSION,(function(e){e.getStatus()===t.AJAX.ERROR.TIMEOUT&&(a("response.exception.timeout",e.getResponse()),i.notifySecurityFault(t.SESSION_FAILED_REASON.GENERIC))})),e.registerAlwaysProcessor(t.PROCESSORS.CONTAINER_SESSION,(function(e){var n=e.getHeader(t.AJAX.ERROR.SECURITY_FAULT);n&&i.notifySecurityFault(n)}))}},function(e,t){e.exports=function(e,t,n,r,i,o,a,s,c,u,p,l,d,f,h,E,g,A,v){var _=u.register("hx.container");function I(e){return e&&0===e.toUpperCase().indexOf("HTTP")}function S(){}var O={_state:d,autoBind:function(e,t){var i=function(e){return e.toUpperCase().substr(1)};for(var a in e)if(e.hasOwnProperty(a)){if(!o.EVENTS.hasOwnProperty(a))throw new Error(a+" is not supported by Helix.Container.EVENTS. Double check the event name and Helix API documentation for reference.");var s=a.toLowerCase().replace(/_./g,i);r[a].async?n.bindAsync(s,e[a].bind(t||Helix.Container)):n.bind(s,e[a].bind(t||Helix.Container))}},constructor:S,getAjaxUrl:function(e){return d.ajaxUrl+(e||"").replace(/^(?!\/)|\/+(.+)/,"/$1")},getAppById:function(e){return d.activeAppInstances.getItemByKey(e)},getAppInstances:function(){return d.activeAppInstances.toDictionary()},getBasePath:function(){return d.basePath},getBindings:function(){var e={};for(var t in d.config.bindings)d.config.bindings.hasOwnProperty(t)&&(e[t]=d.config.bindings[t]);return e},getContainerId:function(){return d.containerId},getConfig:function(){return d.config},getContainerAppBindings:function(){return d.containerAppBindings},getCurrentApp:function(){return d.activeAppInstances.isEmpty()?null:d.activeAppInstances.lastItem()},getModalViewPort:function(){return d.viewPorts.find((function(e){return e.isModal}))},getNonModalViewPort:function(){return d.viewPorts.find((function(e){return!e.isModal}))},getRelativeAjaxUrl:function(e){var t=this.getAjaxUrl(),n=e.replace(t,"");return n!==e&&n[0]&&"/"!==n[0]&&(n="/"+n),n},getViewPorts:function(){return d.viewPorts},getTheme:function(){return d.theme},hasInit:function(){return d.hasInit},start:function(t){function r(){function e(){n.doClientCallback(o.EVENTS.ON_INIT_COMPLETE),console.timeEnd("hx.c.start")}_("ready",d.containerId,d.basePath,d.ajaxUrl,d.tunnelUrl),l.requestBindingsAndTokens().then(function(){E.init(p.onHelixMessage),d.hasInit=!0,n.doClientCallbackAsync(o.EVENTS.ON_SET_DEFAULT_THEME,{},e,(function(){_("ON_SET_DEFAULT_THEME.warning","error action called on SET_DEFAULT_THEME async handler. continuing anyhow"),e()}),(function(){f.setDefaultTheme(),e()}))}.bind(this))}console.time("hx.c.start"),t=t||{},!0!==d.hasInit?(t.environmentId&&c.setEnvironmentId(t.environmentId),t.containerId&&(d.containerId=t.containerId),t.appLoadTimeout&&(e.appLoadTimeout=t.appLoadTimeout),I(d.tunnelUrl)||(d.tunnelUrl=d.basePath+d.tunnelUrl),I(d.ajaxUrl)||(d.ajaxUrl=d.basePath+d.ajaxUrl),n.doClientCallbackAsync(o.EVENTS.ON_CREATE_VIEWPORTS,new s.CreateViewPorts,(function(){if(!d.viewPorts.hasItemWithKey(i.VIEW_PORT.MAIN_ID)||!d.viewPorts.hasItemWithKey(i.VIEW_PORT.MODAL_ID))throw new Error('You must create at least one viewport with id "'+i.VIEW_PORT.MAIN_ID+'" and one modal with id "'+i.VIEW_PORT.MODAL_ID+'"');h.ready(r.bind(this))}),null,(function(e){var t=v.getElementById(i.VIEW_PORT.MODAL_ID),n=v.getElementById(i.VIEW_PORT.MAIN_ID),r=v.getElementById(i.VIEW_PORT.MODAL_CONTAINER_ID);if(!n)throw new Error("viewport element with id #"+i.VIEW_PORT.MAIN_ID+" not found, is required");if(!t)throw new Error("viewport element with id #"+i.VIEW_PORT.MODAL_ID+" not found, is required");if(!r)throw new Error("viewport element with id #"+i.VIEW_PORT.MODAL_CONTAINER_ID+" not found, is required");Helix.Container.registerViewPort(i.VIEW_PORT.MAIN_ID,{element:n}),Helix.Container.registerViewPort(i.VIEW_PORT.MODAL_ID,{element:t,isModal:!0}).container=r,e()}))):_("exception","Container has already started")},registerViewPort:function(e,t){if(d.viewPorts.hasItemWithKey(e))throw new Error("Viewport with id #"+e+" already exists");var n=g.extend({},{element:null,isModal:!1,isAppService:!1},t),r=new A(e,n.element,n);return d.viewPorts.push(r),r},setAppInstances:function(e){d.activeAppInstances.fromArray(e)},setContainerId:function(e){d.containerId=e},setEnvironmentId:c.setEnvironmentId.bind(c)};return S.prototype=O,u.addListener("exception",(function(e){e.eventNamespace.indexOf(i.TOPIC.FROM_APP.ERROR_FRAMEWORK)>-1||a.onContainerErrorFramework(e)})),window.addEventListener("unhandledRejection",(function(e){return e.preventDefault(),_("when.js.unhandled.exception",e.detail.reason.message,e.detail.reason),!0}),!1),S}},function(e,t){e.exports=function(e,t,n,r,i,o,a){var s=a.register("hx.container.containermessages");function c(e,n,r){var i={messageId:n,response:r};s("_publishResponseMessage."+t.TOPIC.FROM_CONTAINER.CONTAINER_MESSAGE_RESPONSE,e,i),o.publish(t.TOPIC.FROM_CONTAINER.CONTAINER_MESSAGE_RESPONSE,e,i)}return i.addMessageHandler(t.TOPIC.FROM_APP.SHOW_CONTAINER_MESSAGE,(function(t,i){e.doClientCallback(n.EVENTS.ON_SHOW_CONTAINER_MESSAGE,new r.ShowContainerMessage(i.payload.messages,i.payload.isModal,i.appInstance))})),i.addMessageHandler(t.TOPIC.FROM_APP.CANCEL_CONTAINER_MESSAGE,(function(t,i){c(i.appInstanceId,i.payload.messageId,i.payload.selectedValue),e.doClientCallback(n.EVENTS.ON_CANCEL_CONTAINER_MESSAGE,new r.CancelContainerMessage(i.payload.messageId,i.payload.selectedValue,i.appInstance))})),{publishResponseMessage:c}}},function(e,t){e.exports=function(e,t,n,r,i,o,a,s,c,u,p){var l=c.register("hx.container.containerservices"),d={},f={};function h(t,n){var i=function(e,t){for(var n=t.invokes.container,i=0;i<n.length;i++)if(n[i].id===e)return r.getExposedInterfaceByUid(n[i].uid);return null}(t,n.bindings);return i?e.containerAppBindings.appId!==i.app.appId||e.containerAppBindings.publisherId!==i.app.publisherId||e.containerAppBindings.version!==i.app.version?{isValid:!1,errorCode:o.CONTAINER_SERVICE.ERROR.SERVICE_NOT_FOUND}:{isValid:!0,exposedInterface:i}:{isValid:!1,errorCode:o.CONTAINER_SERVICE.ERROR.SERVICE_NOT_FOUND}}function E(e){var t=u.format("{exposedInterfaceId}.{exposedInterfaceVersion}.{appInstanceId}.{requestId}",e);f.hasOwnProperty(t)&&delete f[t]}function g(e,t,n){try{var r=t.serviceId,i=t.appInstance.appInstanceId,a=h(r,t.appInstance);if(!a.isValid)return l("request.bindings.warning."+a.errorCode,r,t.appInstance),void v(a.errorCode,r,t.appInstance,t.payload);var c=a.exposedInterface,p=(S=c.interfaceId,O=c.interfaceVersion,d[S+"."+O]);if(!p)return l("request.handler.warning."+o.CONTAINER_SERVICE.ERROR.HANDLER_NOT_FOUND,c.interfaceId,c.interfaceVersion),void v(o.CONTAINER_SERVICE.ERROR.HANDLER_NOT_FOUND,r,t.appInstance,t.payload);var g=t.payload.requestId,_=new s.ContainerServiceRequest(t.appInstance,c,t.payload.params),I={appInstanceId:i,exposedInterfaceId:c.interfaceId,exposedInterfaceVersion:c.interfaceVersion,requestId:g};!function(e){var t=u.format("{exposedInterfaceId}.{exposedInterfaceVersion}.{appInstanceId}.{requestId}",e);f.hasOwnProperty(t)||(f[t]=e)}(I),p(_,(function(e,t){(t=!u.isType(t,"boolean")||t)&&E(I),A(r,i,g,e,t)}),(function(e,t){E(I),A(r,i,g,t,!0,e)}))}catch(n){l("service.request.warning."+o.CONTAINER_SERVICE.ERROR.SERVICE_ERROR,e,n),v(o.CONTAINER_SERVICE.ERROR.SERVICE_ERROR,t.serviceId,t.appInstance,t.payload)}var S,O}function A(e,n,r,i,a,s){var c={requestId:r,isFinal:!0===a,isSuccess:!0,returnValue:i};s&&(c.isSuccess=!1,c.error={code:s}),t.publish(o.TOPIC.FROM_CONTAINER.CONTAINER_SERVICE_RESPONSE,n,c,!1,{serviceId:e})}function v(e,n,r,i){var s=p.parse(r.cpv),c=p.parse("1.3.0");s.isLessThan(c)?t.publish(o.TOPIC.FROM_CONTAINER.ERROR,r.appInstanceId,{errorCode:a.CONTAINER_SERVICE_ACCESS_DENIED,message:"Service Error :"+r.appDescriptor.fqId}):A(n,r.appInstanceId,i.requestId,i.params,!0,e)}return i.addMessageHandler(o.TOPIC.FROM_APP.CONTAINER_SERVICE_REQUEST,g),{onContainerServiceRequest:g,bind:function(e,t,n){d[e+"."+t]=n},trigger:function(t,n,i,a){a=u.extend({isFinal:!0,errorCode:null,appInstanceId:null},a);var s=e.containerAppBindings,c=r.getExposedInterfaceByExposesInterface(s.publisherId,s.appId,s.version,t,n);if(c){var d=function(e,t){var n=u.format("{0}.{1}",e,t);return Object.keys(f).filter((function(e){return e.indexOf(n)>=0})).map((function(e){return f[e]}))}(t,n),h=p.parse("1.3.0"),g=[];if(a.appInstanceId){var v=e.activeAppInstances.getItemByKey(a.appInstanceId);v&&g.push(v)}else g=e.activeAppInstances;g.forEach((function(e){if(p.parse(e.cpv).isLessThan(h))A(t,e.appInstanceId,null,i,a.isFinal,a.errorCode);else{var n=e.bindings.invokes.container.find((function(e){return e.uid===c.uid}));if(n)d.filter((function(t){return t.appInstanceId===e.appInstanceId})).forEach((function(t){a.isFinal&&E(t),A(n.id,e.appInstanceId,t.requestId,i,a.isFinal,a.errorCode)}))}}))}else l("trigger.error."+o.CONTAINER_SERVICE.ERROR.SERVICE_NOT_FOUND,t,n)}}}},function(e,t){e.exports=function(e,t,n,r,i,o,a,s,c,u,p){var l=s.register("hx.container.context");function d(){}function f(e){var t=new i;return e.forEach((function(e){var n=p.sharedContext.get(e.ns,e.type);n&&t.add(n.ns,n.type,n.data)})),t}function h(e){var t=u.parse(e.cpv),n=u.parse("1.4.0");return t.isLessThan(n)}function E(e){p.activeAppInstances.forEach((function(n){var i=v(n);function a(e){e&&(I(n,i),_(n))}var s=function(e,t){var n=t.getElements();if(n.length!==e.getElements().length)return!0;for(var r=!1,i=0;i<n.length;i++){var o=n[i],a=e.get(o.ns,o.type);if(!a||JSON.stringify(o.data)!==JSON.stringify(a.data)){r=!0;break}}return r}(n.context,i);t.doClientCallbackAsync(r.EVENTS.ON_NOTIFY_APP_CONTEXT_CHANGED,new o.NotifyAppContextChanged(n,n.context,i,s,e),a,d,(function(){a(s)}))}))}function g(e,t){e.getElements().forEach((function(e){!t.find((function(t){return t.ns===e.ns&&t.type===e.type}))?l("update-context-cache.warning","Skipping update of context with namespace "+e.ns+" and type "+e.type+' as this context is not "provided" by this app'):p.sharedContext.get(e.ns,e.type)?p.sharedContext.update(e.ns,e.type,e.data):p.sharedContext.add(e.ns,e.type,e.data)})),t.forEach((function(t){!!e.get(t.ns,t.type)||p.sharedContext.remove(t.ns,t.type)}))}function A(n,a,s){var c=e.get("app-initiated-context-change"),u=new i(a.payload.context),l=null===a.appInstance.context?null:a.appInstance.context.clone();t.doClientCallbackAsync(r.EVENTS.ON_CONTEXT_CHANGE,new o.ContextChange(a.appInstance,u,l,p.sharedContext,p.activeAppInstances.toArray(),c),d,d,(function(){var e=a.appInstance.bindings.provides&&a.appInstance.bindings.provides.context?a.appInstance.bindings.provides.context:[],t=h(a.appInstance)?p.sharedContext.getElements().concat(u.getElements()):e;g(u,t),I(a.appInstance,f(a.appInstance.bindings.consumes.context)),E(c)}))}function v(e){return f(h(e)?p.sharedContext.getElements():e.bindings.consumes.context)}function _(e){var t={context:e.context?e.context.getElements():null};c.publish(n.TOPIC.FROM_CONTAINER.CONTEXT_SET,e.appInstanceId,t)}function I(e,t){return e.context=t||new i,l("context.set",e,e.context),e.context}return a.addMessageHandler(n.TOPIC.FROM_APP.CONTEXT_UPDATE,A),{onContextUpdate:A,getSharedContext:function(){return p.sharedContext.clone()},getAppContext:v,sendAppContext:_,setAppContext:I,setSharedContext:function(t,n){n=e.get("container-initiated-context-set",n);var r=t.getElements().concat(p.sharedContext.getElements());g(t,r),E(n)}}}},function(e,t,n){"use strict";e.exports=function(e){var t={EVENTS:{},BINDING_PERMISSIONS:{ANY_CONTAINER:"AnyContainer",SPECIFIC_CONTAINER:"SpecificContainer",SPECIFIC_CONTAINER_VERSION:"SpecificContainerVersion",ANY_APP:"AnyApp",SPECIFIC_PUBLISHER:"SpecificAppPublisher",SPECIFIC_APP:"SpecificApp",SPECIFIC_APP_VERSION:"SpecificAppVersion",USER:"UserBinding"},INVOKEBINDING_TYPES:{DATASERVICE:"InvokesInterfaceDataService",DATASOURCE:"InvokesInterfaceDataSource",UI:"InvokesInterfaceUI"},INVOKEDATABINDING_TYPES:{CONTAINER:"InvokesInterfaceDataServiceBindingContainerService",APP:"InvokesInterfaceDataServiceBindingAppService"},DATASERVICETYPES:{SOAP:"SOAP",JSON_HTTP:"JSON_HTTP",JSON:"JSON",HELIX_BUS:"HELIX_BUS"},INVOKEUIBINDING_TYPES:{CONTAINER:"InvokesInterfaceUIBindingContainer",APP:"InvokesInterfaceUIBindingApp"},EXPOSEBINDING_TYPES:{DATA:"ExposesInterfaceDataService",UI:"ExposesInterfaceUI"},CONTAINER_INTERFACES:{CONTAINER_SERVICES:"ContainerServices"},APP_STATE:{ON:"ON",PILOT:"PILOT",OFF:"OFF"},APP_STATUS:{NOT_LOADED:0,LOADING:1,CONNECTED:2,RUNNING:3,CLOSING:4,CLOSED:5,ABORTING:6,ABORTED:7},HTTP_VERB:{GET:"GET",POST:"POST"},PARAMETER_TRANSPORT_TYPE:{LAUNCH_DATA:"launch_data",QUERY_STRING:"query_string"},TOKEN_TRANSPORT_TYPE:{NONE:"none",LAUNCH_DATA:"launch_data",QUERY_STRING:"query_string"},CONTAINER_INSTANCEID:"helix.container",MAX_PENDING_AUTHTOKEN_AGE:2e4,DEFAULT_BUSY_EVENT_ID:"_default"};for(var n in e)if(e.hasOwnProperty(n)){var r=n.toLowerCase().replace(/_./g,(function(e){return e.toUpperCase().substr(1)}));t.EVENTS[n]=r}return t}},function(e,t){e.exports=function(e,t,n,r,i,o,a,s,c){a.register("hx.container.enviromaps");return{getEnvironmentMaps:function(e,t,n){var i={value:"",metaMaps:{}};if(0===t.length||0===n.length)return i;var o=t.findIndex((function(t){return t.appDescriptor.fqId===e}));if(o<0)return i;var a=function(e,t){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i];if(0!==o.bindingOffsets.length&&o.bindingOffsets.hasOwnProperty(e)){var a=o.bindingOffsets[e];r[o.map.ep]||(r[o.map.ep]=[o.map.ep]),r[o.map.ep].push(a),n.push(o.map)}}return{maps:r,metaMaps:n}}(o,n),s=r.CONSUMER_PROTOCOL.ENVIRONMENT_MAPS_ENDPOINT_INDEX_SEPARATOR,c=r.CONSUMER_PROTOCOL.ENVIRONMENT_MAPS_ENDPOINT_GROUP_SEPARATOR,u=[];for(var p in a.maps)u.push(a.maps[p].join(s));return{value:u.join(c),metaMaps:a.metaMaps}}}}},function(e,t,n){"use strict";e.exports=function(e,t,n,r){var i,o=t.environmentId;return{getCpVersion:function(){return i||(i=e.getLatest().getNumber().toString()),i},getEnvironmentId:function(){return o},getServiceUrl:function(){return n.ajaxUrl},setEnvironmentId:function(e){return o=e}}}},function(e,t){e.exports=function(e,t,n,r,i){return i.addMessageHandler(t.TOPIC.FROM_APP.ERROR_FRAMEWORK,(function(t,i){e.doClientCallback(n.EVENTS.ON_APP_ERROR_FRAMEWORK,new r.AppErrorFramework(i.payload.method,i.payload.text,i.payload.ex,i.appInstance))})),{onContainerErrorFramework:function(t){e.doClientCallback(n.EVENTS.ON_CONTAINER_ERROR_FRAMEWORK,new r.ContainerErrorFramework(t))}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){this.request=e};t.AjaxRequest=r;var i=function(e,t){this.appInstance=e,this.refresh=t};t.AppAuthTokenRequest=i;var o=function(e,t,n){this.appInstance=e,this.returnValue=t,this.actionParams=n};t.AppClose=o;var a=function(e,t){this.appInstance=e,this.actionParams=t};t.AppClosed=a;var s=function(e,t){this.appInstance=e,this.actionParams=t};t.AppClosedCancelled=s;var c=function(e,t){this.appInstance=e,this.actionParams=t};t.AppClosing=c;var u=function(e){this.appInstanceId=e};t.AppConnected=u;var p=function(e,t,n,r){this.appParams=n,this.destination=t,this.source=e,this.actionParams=r};t.AppCreate=p;var l=function(e,t,n){this.appInstance=e,this.defaultWindowAttributes=t,this.actionParams=n};t.AppCreateWindow=l;var d=function(e){this.appInstanceId=e};t.AppDisconnected=d;var f=function(e,t,n,r){this.appInstance=r,this.method=e,this.text=t,this.ex=n};t.AppErrorFramework=f;var h=function(e,t){this.appInstance=e,this.actionParams=t};t.AppLaunched=h;var E=function(e,t,n,r,i,o){this.appParams=t,this.destinationInterface=e,this.launchMode=n,this.parentAppInstance=r,this.requestId=i,this.actionParams=o};t.AppLaunchRequest=E;var g=function(e,t){this.appInstance=e,this.parentAppInstance=e.parentAppInstance,this.exposedInterface=e.launchInterface,this.launchMode=e.launchDetails.launchMode,this.isAuthenticator=e.launchDetails.isAuthenticator,this.actionParams=t};t.AppOpening=g;var A=function(e,t){this.appInstance=e,this.actionParams=t};t.AppReady=A;var v=function(e,t){this.appInstance=e,this.actionParams=t};t.AppRemoveWindow=v;var _=function(e,t){this.appInstance=e,this.actionParams=t};t.AppViewHide=_;var I=function(e,t){this.appInstance=e,this.height=t};t.AppViewResize=I;var S=function(e,t,n){this.appInstance=e,this.html=t,this.actionParams=n};t.AppViewSetHtml=S;var O=function(e,t){this.appInstance=e,this.actionParams=t};t.AppViewShow=O;var y=function(){this.handled=!1};t.AuthLevelChanged=y;var m=function(e,t,n,r){this.destinationInterface=t,this.authInterface=e,this.parentAppInstance=n,this.actionParams=r};t.AuthStepUpRequired=m;var C=function(e,t){this.actionParams=t,this.response=e};t.AuthTokensReceived=C;var T=function(e,t,n){this.appInstance=n,this.previousState=t,this.state=e};t.AppWindowStateChange=T;var P=function(e,t,n){this.messageId=e,this.responseValue=t,this.appInstance=n};t.CancelContainerMessage=P;var N=function(e){this.appBindings=e};t.CheckAppForUserPermission=N;var R=function(e){this.error=e};t.ContainerErrorFramework=R;var b=function(e,t,n){this.appInstance=e,this.serviceInterface=t,this.params=n};t.ContainerServiceRequest=b;var M=function(e,t,n,r,i,o){this.appInstance=e,this.newContext=t,this.prevContext=n,this.sharedContext=r,this.openAppInstances=i,this.actionParams=o};t.ContextChange=M;var x=function(){};t.CreateViewPorts=x;var w=function(e,t,n,r){this.appInstance=e,this.current=t,this.previous=n,this.actionParams=r};t.ExposesLoaded=w;var L=function(e,t,n){this.destinationInterface=e,this.currentAppInstance=t,this.launchMode=n||null};t.GetAppDisplayContainer=L;var D=function(e,t){this.environmentId=e,this.ajaxUrl=t};t.GetBindingsRequest=D;var H=function(e,t){this.waitType=e,this.appInstance=t};t.HideWaitIndicator=H;var F=function(e,t,n,r,i){this.appInstance=e,this.oldContext=e.context,this.newContext=n,this.changed=r,this.actionParams=i};t.NotifyAppContextChanged=F;var U=function(e,t){this.source=e,this.alertType=t};t.OaSecurityAlert=U;var V=function(e){this.doOaGenerateSecurityToken=e};t.OaSecurityTokenRequested=V;var k=function(e,t,n){this.appInstance=e,this.parameters=t,this.actionParams=n};t.PrepareLaunchParameters=k;var G=function(e,t,n,r){this.appInstance=e,this.launchMode=t,this.isAppService=n,this.actionParams=r};t.ProvideAppViewPortId=G;var j=function(e){this.appInstance=e};t.QueueAppMessages=j;var B=function(e,t){this.exposedInterfaces=e,this.invokesInterfaceId=t};t.ResolveAppBinding=B;var q=function(e,t,n){this.appCandidates=e,this.interfaceId=t,this.interfaceVersion=n};t.ResolveAppVersion=q;var W=function(e,t,n){this.destinationInterface=e,this.parentAppInstance=t,this.actionParams=n};t.ResolveAuthProvider=W;var K=function(){this.handled=!1};t.SecurityAuthCancelled=K;var Y=function(e,t){this.issuingAppInstance=e,this.token=t};t.SecurityBeforeTokenChange=Y;var X=function(e,t){this.fault=e,this.appInstance=t,this.appInstanceId=t?t.appInstanceId:null,this.cpv=t?t.cpv:null,this.isContainerFault=null===t};t.SecuritySessionFailed=X;var J=function(e){this.appInstance=e,this.isContainer=null===e};t.SessionExpired=J;var Q=function(e,t,n){this.messages=e,this.isModal=t,this.appInstance=n};t.ShowContainerMessage=Q;var z=function(e,t){this.waitType=e,this.appInstance=t};t.ShowWaitIndicator=z;var $=function(e){this.appInstance=e};t.UpdatePageInfo=$;var Z=function(e,t){this.viewPort=e,this.actionParams=t};t.ViewPortHide=Z;var ee=function(e,t){this.viewPort=e,this.actionParams=t};t.ViewPortShow=ee},function(e,t,n){"use strict";e.exports=function(){var e={};return{addMessageHandler:function(t,n){e[t]=n},clearMessageHandlers:function(){e={}},getMessageHandler:function(t){return e[t]}}}},function(e,t){e.exports=function(e,t,n,r,i){var o=i.register("hx.ajax.processors.headers");e.registerRequestProcessor(t.PROCESSORS.AJAX_CORE_HEADERS,(function(e){var i=e.getRequest();o("process",i),e.setHeader(t.AJAX.HELIX_CPV,r.getCpVersion()),e.setHeader(t.AJAX.ENVIRONMENT_ID,r.getEnvironmentId()),n&&e.setHeader(t.AJAX.DATA_SERVICE_ENDPOINTS,JSON.stringify(n.dataServiceEndpoints)),e.setHeader(t.AJAX.CHARSET,i.charset)}))}},function(e,t){e.exports=function(e,t,n,r,i,o,a,s,c,u,p,l,d,f,h){var E=c.register("hx.core");function g(){l.current=new l(u.url)}var A={App:void 0,Container:void 0,cdnRoots:{themes:"/Static/Themes/"},constructor:g,extend:function(e){f.extend(this,e,!0)},isApp:!1,isContainer:!1,transportType:i.TRANSPORT.NONE,Instrumentation:void 0,Protocol:r,Schema:p.Protocol,SemanticVersion:p.Version,log:c,Constants:i,Tools:d,util:f,Config:t,Ajax:e,Context:o,ContextElement:o.Element,AppDescriptor:n,EndPointDescriptor:a,parseUrl:f.parseUrl,QueryString:l,when:h,getEnvironmentId:s.getEnvironmentId.bind(s),getConsumerProtocolVersion:s.getCpVersion.bind(s),getLocationBasePath:f.getLocationBasePath,getTransportType:function(){return this.transportType},getUrlParameter:function(e){return l.current[e]}};g.prototype=A;var v=window.onerror;return window.onerror=function(e,t,n,r,i){return v&&v.apply(window,arguments),E("exception.javascript",e,t,n,r,i),!1},g}},function(e,t){e.exports=function(e,t,n){e.registerRequestProcessor(t.PROCESSORS.INSTRUMENTATION,(function(e){var r=n.getData();r&&r.length>0&&e.setHeader(t.AJAX.INSTRUMENTATION,JSON.stringify(r))}))}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i,o,a){var s,c=function(){function e(){this.length=0,this.storageKey="Helix.Instrumentation.Data"}return e.prototype.get=function(){var e=i.getItem(this.storageKey);return e?JSON.parse(e):void 0},e.prototype.set=function(e){if(e&&0!==e.length){var t=JSON.stringify(e);this.length=t.length,i.setItem(this.storageKey,t)}else this.remove()},e.prototype.remove=function(){i.removeItem(this.storageKey),this.length=0},e.prototype.getSize=function(){return this.length},e}(),u=function(){function e(){this.length=0}return e.prototype.get=function(){return this.buffer},e.prototype.set=function(e){e&&0!==e.length?(this.buffer=e,this.length=JSON.stringify(e).length):this.remove()},e.prototype.remove=function(){this.buffer=void 0,this.length=0},e.prototype.getSize=function(){return this.length},e}(),p=function(){function e(t){this.time=t,this.timeLabel=e.getTimeLabel(t)}return e.getTimeLabel=function(e){return"Time(from:"+e.getTime()+")"},e}(),l=i.isAvailable()?new c:new u,d=[],f=null,h={};function E(e){void 0===e&&(e=!0);var t=l.get();return e&&l.remove(),t}function g(e){for(var t=0;t<d.length;t++)d[t](e)}function A(e,t,n,r,i){var o=e+"."+t;"string"==typeof n&&n.length&&(o+=":\n"+n);var s={correlationId:f,messageType:r,vars:{},title:a.document.title,message:o,detail:n,time:new Date};g(s),v(s,i)}function v(n,i){var o=r.instrumentationBufferSize||0,a=l.get()||[];a.push(n),l.set(a),!i&&l.getSize()<o||s.post(t.getServiceUrl()+e.ROUTES.INSTRUMENT).fail((function(e){return console.error("send.postjson.exception",e)}))}function _(e,t,n,r,i){var o={correlationId:r||f,vars:{},messageType:"Performance",message:e||"Client_Custom",detail:t,timingName:e||"Client_Custom",timingContent:t,timingDuration:n||0,title:"Performance",time:new Date};g(o),v(o,i)}return{addListener:function(e){d.push(e)},flush:function(){E(!1)&&s.post(t.getServiceUrl()+e.ROUTES.INSTRUMENT).fail((function(e){return console.error("send.postjson.exception",e)}))},getCorrelationId:function(){return f},getData:E,newCorrelationId:function(){f=n()},require:function(e){s=e},setCorrelationId:function(e){f=e},sendPerformance:function(e,t,n,r,i){var a=new p(t);a.label=n;var s={contentPrefix:"Time frame",correlationId:null,eventName:a.label||"Timing point",flush:!1,instrument:!0},c=o.extend(s,i);if(c.instrument){var u=e.getTime()-a.time.getTime();r.Content=r.content||c.contentPrefix,r.Start=a.time.toJSON(),r.Stop=e.toJSON(),r.Duration=u,_(c.eventName,JSON.stringify(r),u,c.correlationId,c.flush)}},time:function(e){var t=new a.Date,n=new p(t);e&&(n.label=e,h[e]=n),h[n.timeLabel]=n;var r=n.label?n.label+" - "+n.timeLabel:n.timeLabel;return a.console.time(r),n.time},timeEnd:function(e,t,n){void 0===n&&(n=!0);var r="string"==typeof e?h[e]:h[p.getTimeLabel(e)];if(r){r.label&&delete h[r.label],delete h[r.timeLabel];var i=r.label;i=n?r.label?r.label+" - "+r.timeLabel:r.timeLabel:r.label||r.timeLabel,a.console.timeEnd(i);var s={contentPrefix:"Time frame",correlationId:null,eventName:r.label||"Timing point",flush:!1,instrument:!0},c=o.extend(s,t);if(c.instrument){var u=c.content||{},l=new a.Date,d=l.getTime()-r.time.getTime();u.Content=u.content||c.contentPrefix,u.Start=r.time.toJSON(),u.Stop=l.toJSON(),u.Duration=d,_(c.eventName,JSON.stringify(u),d,c.correlationId,c.flush)}}else console.log("timer key not found",e)},timePreloaded:function(e,t){var n=new p(e);return t&&(n.label=t,h[t]=n),h[n.timeLabel]=n,n.time},writeDebug:function(e,t,n){A(e,t,n,"Debug")},writeError:function(e,t,n){A(e,t,n,"Error",!0)},writeInfo:function(e,t,n){A(e,t,n,"Info")},writePerformance:function(e,t,n){_(e,t,n)},writeWarning:function(e,t,n){A(e,t,n,"Warning")}}}},function(e,t){e.exports=function(e,t,n,r){function i(e){return-1!==e.indexOf(t.ROUTES.INSTRUMENT,e.length-t.ROUTES.INSTRUMENT.length)}e.registerRequestProcessor(t.PROCESSORS.INSTRUMENTATION_TIMER,(function(e){var t=e.getUrl();if(i(t)){var o=n.getServiceUrl();0===t.indexOf(o)&&(t=t.substr(o.length)),e.setInstrumentationTimer(r.time("hx.ajax - "+t))}})),e.registerSuccessProcessor(t.PROCESSORS.INSTRUMENTATION_TIMER,(function(e){if(i(e.getUrl())&&e.getHeader(t.AJAX.CORRELATION_ID)){var n=e.getHeader(t.AJAX.CORRELATION_ID),o="Url:"+e.getUrl();r.timeEnd(e.getInstrumentationTimer(),{eventName:"Client_Request_Total",contentPrefix:o,correlationId:n})}}))}},function(e,t,n){"use strict";e.exports=function(e,t){var n={},r=[],i=null;function o(e,t,n){for(var i=""+s(e)+e+"."+t,o=0;o<r.length;o++){var a=r[o];i.match(a.pattern)&&a.fn.call(a.scope,{baseNamespace:e,subNamespace:t,eventNamespace:i,arguments:n})}}function a(e){t.setSetting("hx.console.enabled",!!e)}function s(e){return e&&e===i?"":i?i+".":""}return{LOGGING_LEVEL:{VERBOSE:0,INFO:1,DUMP:1.1,WARNING:2,ERROR:3,CRITICAL:4},addListener:function(e,t,n){r.push({pattern:new RegExp(e),fn:t,scope:n||window})},disable:function(){a(!1),console.log("Helix logging disabled.")},enable:function(){a(!0),console.log("Helix logging enabled.")},getLogger:function(e){return n[e]},getPrefix:s,isConsoleEnabled:function(){return"true"===t.getSetting("hx.console.enabled","false")},register:function(t){if(n.hasOwnProperty(t))throw new Error("Logger already defined: "+t);var r=function(e){var t=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];o(e,t,n)};return t.args=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=[e].concat(n);t.apply(window,i)},t}(t);return r.baseNamespace=t,function(e,t){function n(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=1===e.length&&"object"==typeof e[0]?"adapter":e.shift();o(t,r,e)}e.verbose=n,e.info=n,e.dump=n,e.warn=n,e.warning=n,e.error=n,e.critical=n,e.formatExceptionMessage=function(e){return""+e}}(r,t),function(t){t.time=e.time.bind(e),t.timeEnd=e.timeEnd.bind(e)}(r),n[t]=r,r},removeListener:function(e,t){for(var n=new RegExp(e),i=0;i<r.length;i++)if(r[i].pattern.source===n.source&&t===r[i].fn)return void r.splice(i,1)},setPrefix:function(e){i=e}}}},function(e,t,n){e.exports=function(e,t){var r=n(394)(t),i=n(395)(e);return t.addListener(".*",r),t.addListener("warning|exception",i),{Console:r,Instrumentation:i}}},function(e,t,n){"use strict";e.exports=function(e){var t=void 0!==window.console&&void 0!==window.console.log&&void 0!==window.console.error;return function(n){if(t)if(n.eventNamespace.match(/exception/)){var r;n.arguments&&(r=n.arguments.find((function(e){return e&&e.stack})));var i=r?r.stack:null;console.error("("+(window.__HELIX_IS_APP?"APP":"CNT")+") "+n.eventNamespace,"\n"+(i||n.arguments))}else if(e.isConsoleEnabled()){(n.eventNamespace.match(/warning/)?console.warn:n.eventNamespace.match(/info/)?console.info:n.eventNamespace.match(/debug/)?console.debug:console.log).apply(console,["("+(window.__HELIX_IS_APP?"APP":"CNT")+") "+n.eventNamespace,n.arguments])}}}},function(e,t,n){"use strict";e.exports=function(e){return function(t){if("hx.instrumentation"!==t.baseNamespace){for(var n=[],r=0;r<t.arguments.length;r++)n.push(""+(t.arguments[r]instanceof Error&&t.arguments[r].stack||t.arguments[r]));var i=n.join(", ");t.subNamespace.match(/warning/)?e.writeWarning(t.baseNamespace,t.subNamespace,i):t.subNamespace.match(/exception/)?e.writeError(t.baseNamespace,t.subNamespace,i):e.writeInfo(t.baseNamespace,t.subNamespace,i)}}}},function(e,t){e.exports=function(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");return function(t,n){var r,i,o=e,a=[];if(n=n||o.length,t)for(r=0;r<t;r++)a[r]=o[0|Math.random()*n];else for(a[8]=a[13]=a[18]=a[23]="-",a[14]="4",r=0;r<36;r++)a[r]||(i=0|16*Math.random(),a[r]=o[19==r?3&i|8:i]);return a.join("")}}},function(e,t){e.exports=function(e,t,n,r,i,o,a,s,c,u){var p=o.register("hx.container.message");function l(i,o,c,u,l){var f=function(e,t,n){var r={appInstanceId:e,payload:t||{}};if(n)for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i]);return r}(i.appInstanceId,c,l),h=s.parse(i.bindings.cpv).toString(),E=a.get("Consumer").getComponentName(o,h);if(null===(f=function(e,t,n){var r=a.get("Consumer").getLatest().transform(t,n,e);return r?r.toPlainObject():null}(h,E,f))){var g=a.get("Consumer").getLatest().transformError;if(p("message.publish."+o+"warning",i,c,g),g===t.CONSUMER_PROTOCOL.TRANSFORM.ERROR.NOT_SUPPORTED)return!1;throw Error(g)}return f.version=h,e.doClientCallbackAsync(n.EVENTS.ON_QUEUE_APP_MESSAGES,new r.QueueAppMessages(i),(function(e){e?u?i.insertMessage({topic:E,message:f}):i.queueMessage({topic:E,message:f}):u?(d(E,f),i.flushMessages()):(i.flushMessages(),d(E,f))}),null,(function(e){e(!i.container.isConnected())})),!0}function d(e,t){try{p("publish."+e,e,t),u.publish(e,t)}catch(n){p("message.publish.exception."+e,e,t,n)}}return{publish:function(e,t,n,r,i){var o=c.activeAppInstances.getItemByKey(t);return o?l(o,e,n,r,i):(c.activeAppInstances.forEach((function(t){l(t,e,n,r,i)})),!0)},onHelixMessage:function(e,t){var n=null,r=null;try{var o=a.get("Consumer");if(!o.getLatest().has(e))throw new Error("Unknown message '"+e+"' received by app "+t.appInstanceId);if(p("receive."+e,e,t),!t.appInstanceId||!c.activeAppInstances.hasItemWithKey(t.appInstanceId))throw p("exception.unknown.sender",e,t),new Error("Message received from unknown app "+t.appInstanceId+" topic = '"+e+"'");var u=c.activeAppInstances.getItemByKey(t.appInstanceId),l=o.getLatest().getNumber().toString();r=s.parse(u.bindings.cpv).toString(),n=o.getComponentName(e,l);var d=o.getVersion(r);if(!d)throw p("exception.unknown.cpv",e,t,u,r),new Error("App requested protocol version "+r+" - Highest known version of container is "+o.getLatest().number.toString()+". Check schema files.");var f=d.transform(n,t,l);o.getLatest().validate(n,f),f=f.toPlainObject();var h=i.getMessageHandler(n);if(!h)throw p("handler.exception.notfound."+e),new Error("Message handler not found for '"+e+"'");f.appInstance=u;try{p("handler."+e,n,f),h.apply(window,[n,f])}catch(t){p("handler.exception."+e,t)}}catch(i){p("exception."+e,t,r,n,i)}}}}},function(e,t){e.exports=function(e,t,n,r,i,o,a,s,c,u,p,l,d,f,h){var E=u.register("hx.container.navigation");function g(c,u,A){if(!c)throw new Error("The request parameter must have a valid value.");if(E("navigation.navigate",c),!c.publisherId||!c.appId||!c.appVersion)throw new Error("The request app details are mandatory. Please ensure the request publisherId, appId, and appVersion properties have valid values.");if(!c.interfaceId||!c.interfaceVersion)throw new Error("The request exposes details are mandatory. Please ensure the request interfaceId and interfaceVersion properties have valid values.");var v=r.getExposedInterfaceByExposesInterface(c.publisherId,c.appId,c.appVersion,c.interfaceId,c.interfaceVersion);if(!v){var _=h.format("navigate.{0} for app {1.publisherId}.{1.appId}.{1.appVersion} interfaceId:{1.interfaceId} interfaceVersion:{1.interfaceVersion}",o.NAVIGATE.ERROR.INTERFACE_NOT_FOUND,c);throw new Error(_)}c.openerAppInstance||(c.openerAppInstanceId?c.openerAppInstance=d.activeAppInstances.getItemByKey(c.openerAppInstanceId):c.useLastAsOpener&&!d.activeAppInstances.isEmpty()&&(c.openerAppInstance=d.activeAppInstances.lastItem())),c.actionParams=e.get("container-initiated-navigate",c.actionParams);var I=function(e){e instanceof f.NavigateErrorResponse?A(e):A(new f.NavigateErrorResponse(o.NAVIGATE.ERROR.GENERAL_ERROR,e))},S=function(){!function(e,t){return!e.isAuthAppRequest&&!e.appLaunchMode&&e.openerAppInstance&&e.openerAppInstance.launchInterface&&t.interfaceGroup&&e.openerAppInstance.launchInterface.interfaceGroup&&e.openerAppInstance.publisherId===e.publisherId&&e.openerAppInstance.appId===e.appId&&e.openerAppInstance.version===e.appVersion&&e.openerAppInstance.launchInterface.interfaceGroup===t.interfaceGroup}(c,v)?function(e,c,u,p){function l(){return r.getExposedInterfaceByExposesInterface(e.publisherId,e.appId,e.appVersion,e.interfaceId,e.interfaceVersion)}var d=c||l();if(!d){var E=h.format("navigate._appLaunchNavigate.{0} for app {1.publisherId}.{1.appId}.{1.appVersion} interfaceId:{1.interfaceId} interfaceVersion:{1.interfaceVersion}",o.NAVIGATE.ERROR.INTERFACE_NOT_FOUND,e);throw new Error(E)}var A=function(e,n,r,c){var u;function p(e){if(!e)throw new Error("appLaunchWorkflows.app-create.app-instance.not-exists");e.launchInterface=e.launchInterface||u,r(new f.NavigateSuccessResponse(o.NAVIGATE_TYPE.APP_LAUNCH,e))}function l(){var n={helixContext:null,parentAppInstance:e.appLaunchMode===o.LAUNCH_MODE.MODAL||e.appLaunchMode===o.LAUNCH_MODE.HIDE_CURRENT?e.openerAppInstance:null,appParams:e.params||{},actionParams:e.actionParams},r={isAuthApp:!!e.isAuthAppRequest,launchMode:e.appLaunchMode||o.LAUNCH_MODE.CLOSE_AND_REPLACE};t.createAppFromExposedBinding(u,n,r).then((function(e){p(e)})).fail(c)}return{doAuthSteppedUpAction:function(t){if((u=t||n()).authRequired){var r=h.format("{app.publisherId}.{app.appId}.{app.version}, interface: {interfaceId}.{interfaceVersion} still requires authentication",u);throw new Error(r)}var o=new s.AppCreate(e.openerAppInstance,u,e.params,e.actionParams);i.doClientCallbackAsync(a.EVENTS.ON_APP_CREATE,o,p,(function(e,t){c(new f.NavigateErrorResponse(e,t))}),l)}}}(e,l,u,p);d.authRequired?n.doAuthStepUp(e.openerAppInstance,d,g,A.doAuthSteppedUpAction,p,e.actionParams):A.doAuthSteppedUpAction(d)}(c,v,u,I):function(e,t,c,u){var l=t.uid,d=e.openerAppInstance,E=d.launchInterface;n.doAuthStepUp(d,t,g,(function(){var t=r.getExposedInterfaceByUid(l),n="_interfaceGroupNavigate.doAuthSteppedUpAction.{0} for {1.app.publisherId}.{1.app.appId}.{1.app.version} interface: {1.interfaceId}.{1.interfaceVersion}";if(!t)throw new Error(h.format(n,o.NAVIGATE.ERROR.INTERFACE_NOT_FOUND,t));if(t.authRequired)throw new Error(h.format(n,o.NAVIGATE.ERROR.AUTHENTICATION_FAILED,t));d.launchInterface=t;var u={exposesInterfaceId:t.interfaceId,exposesInterfaceVersion:t.interfaceVersion};p.publish(o.TOPIC.FROM_CONTAINER.EXPOSES_LOAD_INTERFACE_GROUP,d.appInstanceId,u),i.doClientCallback(a.EVENTS.ON_EXPOSES_LOADED,new s.ExposesLoaded(d,t,E,e.actionParams)),c(new f.NavigateSuccessResponse(o.NAVIGATE_TYPE.EXPOSES_LOADED,d,E))}),u,e.actionParams)}(c,v,u,I)};!c.isAuthAppRequest&&c.openerAppInstance?function(e,t,n){var r=0;e.hasOwnProperty("navigatingTimeout")&&(r=e.navigatingTimeout);if("number"!=typeof r)throw new Error("The request.navigatingTimeout value must be a number");l.sendRequest((function(n,r){p.publish(n,e.openerAppInstance.appInstanceId,r.payload,!1)||(l.remove(r.payload.requestId),t())}),o.TOPIC.FROM_CONTAINER.NAVIGATING_REQUEST,{},t,(function(e){var t,r;e===o.SCHEMA.NAVIGATE.ERROR.NAVIGATE_CANCELLED?(t=o.NAVIGATE.ERROR.NAVIGATE_CANCELLED,r="Active app cancelled navigation request"):(t=o.NAVIGATE.ERROR.GENERAL_ERROR,r='Paired messaging error encountered communicating "navigating" message to active app'),n(new f.NavigateErrorResponse(t,{code:e,details:r}))}),r)}(c,S,I):S()}return c.addMessageHandler(o.TOPIC.FROM_APP.NAVIGATING_RESPONSE,(function(e,t,n){l.onResponse(t)})),{navigate:g}}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=t.register("hx.core.pairedmessaging"),i=0,o={};function a(e){return o[e]}function s(e){delete o[e]}return{onResponse:function(t){var i,o;try{if(!(i=t.payload).requestId)return void r("pairedmessage.onresponse.not-a-paired-message",t);if(!(o=a(i.requestId)))return void r("pairedmessage.onresponse.warning."+e.PAIRED_MESSAGE.ERROR.REQUEST_NOT_FOUND,t);!0===i.isFinal&&(n.clearTimeout(o.setTimeoutId),s(i.requestId))}catch(t){return r("pairedmessage.onresponse.warning."+e.PAIRED_MESSAGE.ERROR.GENERAL,i,t),void(o&&o.error&&o.error(e.PAIRED_MESSAGE.ERROR.GENERAL))}i&&o&&(!0===i.isSuccess?o.success(i):o.error(i.error.code,i))},remove:function(t){var i=a(t);i?(n.clearTimeout(i.setTimeoutId),s(t)):r("pairedmessage.cancel.warning."+e.PAIRED_MESSAGE.ERROR.REQUEST_NOT_FOUND,t)},sendRequest:function(t,c,u,p,l,d){if(void 0===d&&(d=1e3),!p||"function"!=typeof p||!l||"function"!=typeof l)throw"pairedmessage.sendrequest.exception."+c+" - valid success and error callback functions are required";var f,h,E={success:p,error:l,setTimeoutId:0},g=!1,A=u.payload||{};try{r("sendrequest."+c,c,u);var v=(i++).toString(),_="number"==typeof d?d:1e3;A.requestId=v,f=A.requestId,h=E,o[f]=h,_>0&&(E.setTimeoutId=function(t,i,o){return n.setTimeout((function(){try{r("pairedmessage.sendrequest."+e.PAIRED_MESSAGE.ERROR.TIMEOUT,t,i,o);var n=a(i.requestId);if(!n)return;s(i.requestId),n.error(e.PAIRED_MESSAGE.ERROR.TIMEOUT)}catch(e){r("pairedmessage.sendrequest.settimeout.exception",t,i)}}),o)}(c,A,_)),u.payload=A,g=!0,t(c,u)}catch(t){if(r("pairedmessage.sendrequest.warning."+e.PAIRED_MESSAGE.ERROR.GENERAL,c,u,t),A.requestId&&s(A.requestId),clearTimeout(E.setTimeoutId),E.error(e.PAIRED_MESSAGE.ERROR.GENERAL),g)throw t}},sendResponse:function(e,t,n,r,i,o){var a=n.payload||{};a.requestId=r,a.isFinal=!0===i,a.isSuccess=!0,o&&(a.isSuccess=!1,a.error={code:o}),n.payload=a,e(t,n)}}}},function(e,t,n){e.exports=function(e,t){var r=n(401).SemanticVersion,i=n(402)(e),o=n(403)(),a=n(404)(o,i,e),s=n(405)(o,e),c=n(406)(o,e),u=n(407)(o,e),p=n(408)(a,s,c,u),l=n(409)(i,p,a),d=n(410)(),f=n(411)(r,l,i,d,t),h=n(412)(r,f);e.ProtocolObject=i;var E=h.create("Consumer");return n(413)(E,t),n(414)(E,t),n(415)(E,t),n(416)(E,t),n(417)(E),{Protocol:h,Version:r,Object:i}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=1e5,i=1e4,o=1e3,a=function(){function e(e,t,n,r){this.major=Math.max(e||0,0),this.minor=Math.max(t||0,0),this.patch=Math.max(n||0,0),this.build=Math.max(r||0,0)}return e.prototype.getMajor=function(){return this.major},e.prototype.getMinor=function(){return this.minor},e.prototype.getPatch=function(){return this.patch},e.prototype.getBuild=function(){return this.build},e.prototype.isEqualTo=function(e){return this.toNumber()===e.toNumber()},e.prototype.isGreaterThan=function(e){return this.toNumber()>e.toNumber()},e.prototype.isGreaterThanOrEqualTo=function(e){return this.toNumber()>=e.toNumber()},e.prototype.isLessThan=function(e){return this.toNumber()<e.toNumber()},e.prototype.isLessThanOrEqualTo=function(e){return this.toNumber()<=e.toNumber()},e.prototype.toNumber=function(){return this.major*r+this.minor*i+this.patch*o+this.build},e.prototype.toString=function(){return this.major+"."+this.minor+"."+this.patch+(this.build>0?"."+this.build:"")},e.parse=function(t){if(t instanceof e)return t;if("string"==typeof t)try{var n=t.split("."),r=parseInt(n[0],10),i=parseInt(n[1],10),o=parseInt(n[2],10),a=parseInt(n[3],10);if(isNaN(r)&&n.length>=1||isNaN(i)&&n.length>=2||isNaN(o)&&n.length>=3||isNaN(a)&&n.length>=4)throw new Error("Invalid version numeric component: '"+t+"'");return new e(r,i,o,a)}catch(e){throw new Error("Cannot parse invalid semantic version '"+t+"', expected string with format 'major.minor.patch' or 'major.minor.patch.build'")}throw new Error("Unsupported type")},e.sorted=function(t){return t.concat().sort((function(t,n){var r=e.parse(t),i=e.parse(n);return r.isLessThan(i)?-1:r.isGreaterThan(i)?1:0}))},e.filtered=function(t,n,r){var i=e.parse(n),o=e.parse(r);return e.sorted(t).filter((function(e){return e.isGreaterThanOrEqualTo(i)&&e.isLessThanOrEqualTo(o)}))},e}();t.SemanticVersion=a},function(e,t){e.exports=function(e){var t,n,r;return(t=function(e,t,n){this.key=t,this.metaObject=null,this.ownerObject=e,this.value=n}).prototype={constructor:t,getKey:function(){return this.key},getMetaObject:function(){return this.metaObject},getOwnerObject:function(){return this.ownerObject},getPath:function(){for(var e=[this.key],t=this.ownerObject.getOwnerMember();null!==t;)e.push(t.getKey()),t=t.getOwnerObject().getOwnerMember();return e.reverse(),e.join(".")},getValue:function(){return this.value},isArray:function(){return this.value instanceof Array},isBoolean:function(){return"boolean"==typeof this.value},isNull:function(){return null===this.value||void 0===this.value},isObject:function(){return this.value instanceof n},isValue:function(){return!this.isArray()&&!this.isObject()&&!this.isNull()},remove:function(){this.ownerObject.removeMember(this.key)},setMetaObject:function(e){return this.metaObject=e,this},setOwnerObject:function(e){return this.ownerObject=e,this},setValue:function(e){return this.value=e,this},toPlainObject:function(){if(null===this.value||void 0===this.value)return null;if(this.isObject())return this.value.toPlainObject();if(this.isArray()){for(var e=[],t=0;t<this.value.length;t++){var r=this.value[t];r instanceof n?e.push(r.toPlainObject()):e.push(r)}return e}return this.value}},(n=function(e){this.members={},this.memberCache={},this.ownerMember=null,"object"==typeof e&&null!=e&&this.fromPlainObject(e)}).prototype={constructor:n,clearMemberPathFromCache:function(e){if(this.getOwnerMember()){var t=new RegExp("^"+this.getOwnerMember().getPath()+"\\."),n=e.replace(t,"");this.memberCache.hasOwnProperty(n)&&delete this.memberCache[n],this.getOwnerMember()&&this.getOwnerMember().getOwnerObject().clearMemberPathFromCache(e)}else delete this.memberCache[e]},clone:function(){var e,t=new n;return this.walk((function(r,i){var o=r.getValue(),a=r.getMetaObject();if(o instanceof n){var s=o.clone();e=t.setValueAt(r.getKey(),s).setMetaObject(a).setOwnerObject(t),s.setOwnerMember(e),i.abort()}else if(o instanceof Array){for(var c=[],u=0;u<o.length;u++){var p=o[u];p instanceof n?c.push(p.clone()):c.push(p)}e=t.setValueAt(r.getKey(),c).setMetaObject(a).setOwnerObject(t)}else e=t.setValueAt(r.getKey(),o).setMetaObject(a).setOwnerObject(t)})),t},fromPlainObject:function(r){for(var i in this.members={},this.memberCache={},r){var o=r[i];if(r.hasOwnProperty(i))if(e.isType(o,"object")){var a=new n(o),s=new t(this,i,a);a.setOwnerMember(s),this.members[i]=s}else if(e.isType(o,"array")){for(var c=[],u=0;u<o.length;u++){var p=o[u];"object"==typeof p&&null!==p&&p.constructor===Object?c.push(new n(p)):c.push(p)}this.members[i]=new t(this,i,c)}else this.members[i]=new t(this,i,o)}return this},getArrayAt:function(e){return this.getValueAt(e)},getFloatAt:function(e){return parseFloat(this.getValueAt(e).toString())},getIntAt:function(e){return parseInt(this.getValueAt(e).toString(),10)},getKeys:function(){var e=this.walk((function(e,t){t.addToMap(e.getPath())}));return e.sort(),e},getMember:function(e){return this.members[e]},getMemberAt:function(e){if(!this.memberCache[e]){for(var r,i,o=e.split("."),a=null,s=null,c=this,u=0;u<o.length;u++)if(s=c,a=o[u],c.hasMember(a)){if(u===o.length-1)break;c.getMember(a).isObject()?c=c.getMember(a).getValue():((r=new n).setOwnerMember(c.getMember(a)),c.getMember(a).setValue(r),c=r)}else u===o.length-1?(i=new t(c,a),c.setMember(a,i)):(r=new n,i=new t(c,a,r),r.setOwnerMember(i),c.setMember(a,i),c=r);this.memberCache[e]=s.getMember(a)}return this.memberCache[e]},getMembers:function(){return this.members},getOwnerMember:function(){return this.ownerMember},getStringAt:function(e){return this.getValueAt(e).toString()},getValueAt:function(e){return this.getMemberAt(e).getValue()},hasMember:function(e){return this.members.hasOwnProperty(e)},hasMemberAt:function(e){if(this.memberCache[e])return!0;for(var t=e.split("."),n=null,r=null,i=this,o=0;o<t.length;o++){if(r=i,n=t[o],!i.hasMember(n))return!1;if(o===t.length-1)break;if(!i.getMember(n).isObject())return!1;i=i.getMember(n).getValue()}return r.hasMember(n)},removeAt:function(e){this.getMemberAt(e).remove()},removeMember:function(e){this.members.hasOwnProperty(e)&&(this.clearMemberPathFromCache(this.members[e].getPath()),delete this.members[e])},setMember:function(e,t){return this.members[e]=t,t},setOwnerMember:function(e){this.ownerMember=e},setValueAt:function(e,t){return this.getMemberAt(e).setValue(t)},toPlainObject:function(){var e={};return this.walk((function(e,t){var r=t.getValue();if(e.isObject())t.push({}),r[e.getKey()]=t.getValue();else if(e.isArray()){var i=[];r[e.getKey()]=i;for(var o=e.getValue(),a=0;a<o.length;a++){var s=o[a];s instanceof n?i.push(s.toPlainObject()):i.push(s)}}else r[e.getKey()]=e.getValue()}),e),e},walk:function(e,t,n){var i=n||new r(t),o=!1;for(var a in this.members)this.members.hasOwnProperty(a)&&(e(this.members[a],i),o=i.didPush(),this.hasMember(a)&&this.members[a].isObject()&&i.shouldContinue()&&this.members[a].getValue().walk(e,t,i),o&&i.pop());return i.getMap()}},(r=function(e){this.map=[],this.proceed=!0,this.pushValue=null,this.stack=[],e&&this.stack.push(e)}).prototype={constructor:r,abort:function(){this.proceed=!1},addToMap:function(e){this.map.push(e)},didPush:function(){return null!=this.pushValue&&(this.pushValue=null,!0)},getMap:function(){return this.map},getValue:function(){return this.stack[this.stack.length-1]},pop:function(){return this.stack.pop()},push:function(e){this.pushValue=e,this.stack.push(e)},shouldContinue:function(){return this.proceed}},n}},function(e,t){e.exports=function(){var e;return(e=function(e){this.component=e}).prototype={constructor:e,applyToSchema:function(e,t){},downgrade:function(e,t){},getComponent:function(){return this.component},getName:function(){throw new Error("Not implemented")},upgrade:function(e,t){}},e}},function(e,t){e.exports=function(e,t,n){var r,i=Number.MAX_VALUE,o=-1*Number.MAX_VALUE;return(r=function(t,n){e.call(this,t),this.arrayTypeOf=null,this.path=n,this.required=!0,this.type="*",this.validationRegex=null,this.validationFunction=null,this.validationEnumRange=null,this.validationMax=i,this.validationMin=o,this.value=null}).prototype=n.extend(new e,{constructor:r,applyToSchema:function(e,n){if(this.isTypeComponent())if(!0===n.createMode){var r=this.isArray()?this.arrayTypeOf:this.type,i=this.getComponent().getVersion().create(r,null,n);this.isArray()?e.getMemberAt(this.path).setValue([i]):e.getMemberAt(this.path).setValue(i)}else{var o=new t,a=e.getMemberAt(this.path);o.setOwnerMember(a),this.getTypeComponent().applyToSchema(o,n),this.isArray()?a.setValue([o]):a.setValue(o)}else!0===n.createMode&&e.getMemberAt(this.path).setValue(this.defaultValue(n));e.getMemberAt(this.path).setMetaObject(this)},defaultValue:function(e){if(null!==this.value)return this.value;if(this.isTypeComponent()){var n=this.isArray()?this.arrayTypeOf:this.type,r=this.component.getVersion().create(n,null,e).toPlainObject();return this.isArray()?[r]:r}if(this.hasEnumValidation())return this.validationEnumRange[0];switch(this.type){case"array":return[];case"string":return"";case"number":case"int":case"float":return 0;case"object":return new t;case"boolean":return!0;case"*":return"?";default:return null}},downgrade:function(e,t){e.removeAt(this.path)},findParent:function(){var e=this.path.split(".");if(e.pop(),e.length>0){var t=e.join(".");return this.component.getProperty(t)}return null},getArrayTypeComponent:function(){return this.component.getVersion().find(this.arrayTypeOf)},getArrayTypeOf:function(){return this.arrayTypeOf},getIsRequired:function(){return this.required},getName:function(){return"add"},getPath:function(){return this.path},getTypeComponent:function(){return this.isArray()?this.component.getVersion().find(this.arrayTypeOf):this.component.getVersion().find(this.type)},getValidationEnumRange:function(){return this.validationEnumRange},getValidationFunction:function(){return this.validationFunction},getValidationMax:function(){return this.validationMax},getValidationMin:function(){return this.validationMin},getValidationRegex:function(){return this.validationRegex},getValueType:function(){return this.type},hasEnumValidation:function(){return null!==this.validationEnumRange&&this.validationEnumRange.length>0},hasFunctionValidation:function(){return null!==this.validationFunction},hasMaxValidation:function(){return this.validationMax!==i},hasMinValidation:function(){return this.validationMin!==o},hasRegexValidation:function(){return null!==this.validationRegex},isArray:function(){return"array"===this.type},isBool:function(){return"boolean"===this.type},isFloat:function(){return"float"===this.type},isInt:function(){return"int"===this.type},isNumber:function(){return this.isInt()||this.isFloat()},isObject:function(){return"object"===this.type},isRequired:function(){if(!this.required)return!1;var e=this.findParent();return!e||e.isRequired()},isString:function(){return"string"===this.type},isStronglyTypedArray:function(){return this.isArray()&&null!==this.arrayTypeOf},isTypeComponent:function(){return this.isStronglyTypedArray()?this.component.getVersion().has(this.arrayTypeOf):this.component.getVersion().has(this.type)},isWildcardType:function(){return"*"===this.type},setMax:function(e){this.validationMax=e},setMin:function(e){this.validationMin=e},setOf:function(e){this.arrayTypeOf=e},setRequired:function(e){this.required=e},setType:function(e){this.type=e},setValidationEnumRange:function(e){this.validationEnumRange=e},setValidationFunction:function(e){this.validationFunction=e},setValidationPattern:function(e){this.validationRegex=e},setValue:function(e){this.value=e},upgrade:function(e,t){e.setValueAt(this.path,this.defaultValue(t.options))}}),r}},function(e,t){e.exports=function(e,t){var n;return(n=function(t,n){e.call(this,t),this.path=n}).prototype=t.extend(new e,{constructor:n,applyToSchema:function(e,t){!0!==t.union&&e.getMemberAt(this.path).remove()},downgrade:function(e,t){if(!t.options.union){var n=this.component.getProperty(this.path);e.setValueAt(n.getPath(),n.defaultValue(t.options))}},getName:function(){return"remove"},getPath:function(){return this.path},upgrade:function(e,t){t.options.union||e.removeAt(this.path)}}),n}},function(e,t){e.exports=function(e,t){var n;return(n=function(t,n){e.call(this,t),this.func=n}).prototype=t.extend(new e,{constructor:n,getName:function(){return"upgrade"},upgrade:function(e,t){try{this.func(e,t)}catch(e){throw new Error("[UPGRADE]"+e.toString())}}}),n}},function(e,t,n){e.exports=function(e,t){var n;return(n=function(t,n){e.call(this,t),this.func=n}).prototype=t.extend(new e,{constructor:n,downgrade:function(e,t){try{this.func(e,t)}catch(e){throw new Error("[DOWNGRADE]"+e.stack||!1)}},getName:function(){return"downgrade"}}),n}},function(e,t){e.exports=function(e,t,n,r){var i;return(i=function(e){this.component=e}).prototype={constructor:i,abstract:function(){return this.component.setAbstract(),this},add:function(t){return this.component.addCommand(new e(this.component,t))},downgrade:function(e){return this.component.addCommand(new r(this.component,e))},extend:function(e){return this.component.setAncestorName(e),this},max:function(e){return this.component.getLastCommand().setMax(e),this},min:function(e){return this.component.getLastCommand().setMin(e),this},of:function(e){return this.component.getLastCommand().setOf(e),this},remove:function(e){return this.component.addCommand(new t(this.component,e))},required:function(e){return this.component.getLastCommand().setRequired(e),this},type:function(e){return this.component.getLastCommand().setType(e),this},upgrade:function(e){return this.component.addCommand(new n(this.component,e))},validation:function(e,t){if("string"==typeof e)return this.component.getLastCommand().setValidationPattern(new RegExp(e,t)),this;if(e instanceof RegExp)return this.component.getLastCommand().setValidationPattern(e),this;if(e instanceof Array)return this.component.getLastCommand().setValidationEnumRange(e),this;if(e instanceof Function)return this.component.getLastCommand().setValidationFunction(e),this;throw new Error("Unsupported validation type "+typeof e)},value:function(e){return this.component.getLastCommand().setValue(e),this},was:function(e){return this.component.setAncestorName(e),this.component.setAliasName(e),this}},i}},function(e,t){e.exports=function(e,t,n){var r;return(r=function(e,n){this.abstract=!1,this.aliasName=null,this.ancestorName=null,this.commands=[],this.interface=new t(this),this.name=e,this.version=n}).prototype={constructor:r,addCommand:function(e){return this.commands.push(e),this.interface},applyToSchema:function(e,t){for(var n=0;n<this.commands.length;n++){this.commands[n].applyToSchema(e,t)}},downgrade:function(e,t){for(var n=this.commands.length-1;n>=0;n--){if(this.commands[n].downgrade(e,t),t.error)return t.error}},getAbstract:function(){return this.abstract},getAlias:function(){return this.hasAlias()?this.version.find(this.aliasName):null},getAliasName:function(){return this.aliasName},getAncestor:function(){return this.hasAncestor()?this.version.find(this.ancestorName):null},getCommands:function(){return this.commands},getInterface:function(){return this.interface},getLastCommand:function(){return this.commands[this.commands.length-1]},getName:function(){return this.name},getProperty:function(e){for(var t=this.version.getProtocol().getVersionNumbers(),r=this.name,i=t.indexOf(this.version.getNumber().toString());i>=0;i--){var o=this.version.getProtocol().getVersion(t[i]).getComponents();if(o.hasOwnProperty(r)){for(var a=o[r],s=0;s<a.getCommands().length;s++){var c=a.getCommands()[s];if(c instanceof n&&c.getPath()===e)return c}a.hasAlias()&&(r=a.getAlias().getName())}}return null},getVersion:function(){return this.version},hasAlias:function(){return null!==this.aliasName},hasAncestor:function(){return null!==this.ancestorName},setAbstract:function(){this.abstract=!0},setAliasName:function(e){this.aliasName=e},setAncestorName:function(e){this.ancestorName=e},toString:function(){return this.version.toString()+"#"+this.name},upgrade:function(e,t){for(var n=0;n<this.commands.length;n++){if(this.commands[n].upgrade(e,t),t.error)return t.error}}},r}},function(e,t){e.exports=function(){var e;return(e=function(e,t,n,r,i){this.componentName=t,this.member=null,this.meta=null,this.obj=r,this.options=i,this.path=null,this.schema=n,this.value=null,this.version=e}).prototype={constructor:e,getTypeOf:function(e){return typeof e},hasMeta:function(){return null!==this.meta},hasSubKeys:function(){for(var e=this.schema.getKeys(),t=new RegExp("^"+this.path+"\\."),n=0;n<e.length;n++)if(e[n].match(t))return!0;return!1},hasValue:function(){return null!==this.value&&void 0!==this.value},setSchemaMember:function(e){this.member=e,this.meta=e.getMetaObject(),this.path=e.getPath(),this.value=this.obj.getMemberAt(this.path).getValue()},shouldAbortWalkingSchema:function(){return!!this.meta&&(!this.meta.hasFunctionValidation()&&(!this.meta.isRequired()&&!this.hasValue()||this.meta.isWildcardType()||"object"===this.meta.getValueType()&&!this.hasSubKeys()))},toString:function(){return this.version.toString()+"#"+this.componentName+"."+this.path},validateArrayMaxLength:function(){if(this.meta.isArray()&&this.meta.hasMaxValidation()&&this.value.length>this.meta.getValidationMax())throw new Error(this.toString()+" expects maximum length of "+this.meta.getValidationMax()+", given length of "+this.value.length)},validateArrayMinLength:function(){if(this.meta.isArray()&&this.meta.hasMinValidation()&&this.value.length<this.meta.getValidationMin())throw new Error(this.toString()+" expects minimum length of "+this.meta.getValidationMin()+", given length of "+this.value.length)},validateEnumRange:function(){if(this.meta.hasEnumValidation()&&-1===this.meta.getValidationEnumRange().indexOf(this.value))throw new Error(this.toString()+' expects given value "'+this.value+'" to be a valid enumerable value')},validateIsCorrectType:function(){var e=this.meta.getValueType(),t=this.getTypeOf(this.value);if(this.meta.isArray()){if(!(this.value instanceof Array))throw new Error(this.toString()+" expects given type "+t+" to be an Array")}else if(this.meta.isTypeComponent()&&!this.meta.isArray())this.meta.getComponent().getVersion().validate(this.meta.getTypeComponent().getName(),this.value,this.options);else if(this.meta.isNumber()){if(isNaN(this.value))throw new Error(this.toString()+' expects given type "'+t+'" to be a '+e);if("int"===e&&parseInt(this.value,10)!==this.value)throw new Error(this.toString()+' expects given type "'+t+'" to be a int');if("float"===e&&-1===this.value.toString().indexOf("."))throw new Error(this.toString()+' expects given type "'+t+'" to be a float')}else if(t!==e)throw new Error(this.toString()+' expects given type "'+t+'" to be a '+e)},validateIsRequired:function(){if(this.meta.isRequired()&&!this.hasValue())throw new Error(this.toString()+" is required")},validateIsStronglyTypedArray:function(){var e=this.meta.getArrayTypeOf();if("int"!==e&&"float"!==e||(e="number"),this.meta.isStronglyTypedArray())for(var t=this.meta.getArrayTypeComponent(),n=0;n<this.value.length;n++){var r=this.value[n],i=this.getTypeOf(r);if(t)try{this.meta.getComponent().getVersion().validate(t.getName(),r,this.options)}catch(t){throw new Error(this.toString()+" expects given item["+n+"] of type "+i+" to be a valid "+e+", instead item threw "+t.toString())}else if(i!==e)throw new Error(this.toString()+" expects given item["+n+"] of type "+i+" to be a "+e)}},validateNumericMax:function(){if(this.meta.isNumber()&&this.meta.hasMaxValidation()&&this.value>this.meta.getValidationMax())throw new Error(this.toString()+" expects maximum value of "+this.meta.getValidationMax()+", given value of "+this.value)},validateNumericMin:function(){if(this.meta.isNumber()&&this.meta.hasMinValidation()&&this.value<this.meta.getValidationMin())throw new Error(this.toString()+" expects minimum value of "+this.meta.getValidationMin()+", given value of "+this.value)},validateWithFunction:function(){this.meta.hasFunctionValidation()&&this.meta.getValidationFunction()(this.value,this.options)},validateWithRegex:function(){if(this.meta.hasRegexValidation()&&this.hasValue()&&null===this.value.toString().match(this.meta.getValidationRegex()))throw new Error(this.toString()+' expects "'+this.value+'" to match /'+this.meta.getValidationRegex().source+"/")}},e}},function(e,t){e.exports=function(e,t,n,r,i){var o,a,s;function c(e){return e.walk((function(e,t){if(e.key===i.CONSUMER_PROTOCOL.META_MEMBER_KEY_NAME)e.remove();else if(e.isArray()){var r=e.getValue();if(!r)return;for(var o=0;o<r.length;o++)r[o]instanceof n&&c(r[o])}})),e}return(o=function(t,n){this.cache={},this.components={},this.drops={},this.number=e.parse(t),this.protocol=n}).prototype={constructor:o,at:function(e){if(!e)throw new Error(this.toString()+' cannot define an empty component named "'+e+'"');return this.components[e]||(this.components[e]=new t(e,this)),this.components[e].getInterface()},clearCache:function(){this.cache={}},create:function(e,t,r){r=new s(r),(t=t||{})instanceof n||(t=new n(t)),r.createMode=!0,r.baseVersion=this.number;var i=this.schema(e,r).clone();if(this.getIsAbstract(e))throw new Error(this.toString()+" cannot instantiate abstract component named '"+e+"'");return t.walk((function(e,t){i.setValueAt(e.getPath(),e.toPlainObject())})),i},drop:function(e){return this.drops[e]=!0,this.getComponentPreDrop(e).getInterface()},find:function(e,t){for(var n=this.protocol.getVersions(),r=this.getIndex()-(t?1:0);r>=0;r--){var i=n[r];if(i.hasDrop(e))return null;var o=i.getComponents();if(o.hasOwnProperty(e))return o[e]}return null},getAncestor:function(e){var t=this.find(e).getAncestor();return t||(t=this.find(e,!0))},getAllComponents:function(){for(var e,t=[],n={},r=this.protocol.getVersions(),i=this.getIndex(),o=0;o<=i;o++){var a=r[o],s=a.getComponents();for(var c in s)if(s.hasOwnProperty(c)){var u=a.getComponents()[c],p=u.getAliasName();if(p)for(e=0;e<t.length;e++)if(t[e].getName()===p){t.splice(e,1);break}n[c]||(t.push(u),n[c]=!0)}for(e=0;e<t.length;){var l=t[e].getName();a.hasDrop(l)?(t.splice(e,1),delete n[l]):e++}}return t},getAllComponentVersions:function(e){for(var t=[],n=this.protocol.getVersions(),r=e,i=this.getIndex();i>=0;i--){var o=n[i].getComponent(r);o&&(t.push(o),null!==o.getAliasName()&&(r=o.getAliasName()))}return t},getComponent:function(e){return this.components[e]},getComponentNames:function(){for(var e=this.getAllComponents(),t=[],n=0;n<e.length;n++)t.push(e[n].getName());return t},getComponents:function(){return this.components},getComponentPreDrop:function(e){var t=this.protocol.getVersions(),n=this.getIndex();if(n>0)for(var r=n-1;r>=0;r--){var i=t[r].getComponents();if(i.hasOwnProperty(e))return i[e]}return null},getDroppedComponentNames:function(){var e=[];for(var t in this.drops)this.drops.hasOwnProperty(t)&&e.push(t);return e},getIndex:function(){return this.protocol.getVersions().indexOf(this)},getIsAbstract:function(e){for(var t=this.getAllComponentVersions(e),n=0;n<t.length;n++)if(t[n].getAbstract())return!0;return!1},getNumber:function(){return this.number},getProtocol:function(){return this.protocol},has:function(e){return null!==this.find(e)},hasDrop:function(e){return!0===this.drops[e]},schema:function(e,t){(t=t||{}).baseVersion=this.number,t.strict=!t.hasOwnProperty("strict")||t.strict;var r=e+(t.createMode?1:0)+(t.union?1:0);if(this.cache[r]&&!t.createMode)return this.cache[r];if(this.has(e)){var i=new n,o=this.getAncestor(e);o&&(i=o.getVersion().schema(o.getName(),t).clone());for(var a=this.protocol.getVersions(),s=this.getIndex(),c=0;c<=s;c++){var u=a[c];u.hasDrop(e)&&(i=new n),u.getComponents().hasOwnProperty(e)&&u.getComponents()[e].applyToSchema(i,t)}return t.createMode||(this.cache[r]=i),i}throw new Error(this.toString()+" does not implement component named '"+e+"'")},toString:function(){return this.protocol.toString()+"-"+this.number.toString()},transform:function(t,r,i,o){if(this.getIsAbstract(t))throw new Error(this.toString()+" cannot transform abstract component named '"+t+"'");var u,p;o=new s(o);var l=e.parse(i);if(o.baseVersion=this.number,o.targetVersion=l,r instanceof n||(r=new n(r)),this.number.isEqualTo(l))return c(r);this.number.isLessThan(l)?((u=this.protocol.getVersionsFromTo(this.number,l)).shift(),p=!0):((u=this.protocol.getVersionsFromTo(l,this.number)).reverse(),u.pop(),p=!1);for(var d=new a(this,t,o),f=this.transformError=null,h=r.clone(),E=0;E<u.length;E++){var g=u[E],A=this.protocol.getComponentName(t,g.number.toString()),v=g.getComponents()[A];if(v&&(f=p?v.upgrade(h,d):v.downgrade(h,d)))return this.transformError=f,null}return c(h)},validate:function(e,t,i){if(this.getIsAbstract(e))throw new Error(this.toString()+" cannot validate abstract component named '"+e+"'");(t=t||{})instanceof n||(t=new n(t)),(i=new s(i)).baseVersion=this.number,i.union=!!i.hasOwnProperty("union")&&!!i.union,i.strict=!i.hasOwnProperty("strict")||!!i.strict;var o=this.schema(e,i),a=new r(this,e,o,t,i);if(o.walk((function(e,t){a.setSchemaMember(e),a.shouldAbortWalkingSchema()?(t.abort(),e.getMetaObject().isWildcardType()&&a.validateIsRequired()):a.hasMeta()&&(a.validateIsRequired(),a.validateIsCorrectType(),a.validateIsStronglyTypedArray(),a.validateNumericMin(),a.validateNumericMax(),a.validateArrayMinLength(),a.validateArrayMaxLength(),a.validateEnumRange(),a.validateWithRegex(),a.validateWithFunction())})),i.strict){var c=t.getOwnerMember()?t.getOwnerMember().getPath()+".":null,u=this;t.walk((function(t,n){var r=t.getPath();if(null!==c&&(r=r.replace(new RegExp("^"+c),"")),!o.hasMemberAt(r))throw new Error(u.find(e).toString()+" contains unexpected property '"+r+"'");a.setSchemaMember(o.getMemberAt(r)),a.shouldAbortWalkingSchema()&&n.abort()}))}return!0},whoWas:function(e){for(var t in this.components)if(this.components.hasOwnProperty(t)){var n=this.components[t];if(n.getAliasName()===e)return n}return null}},(a=function(e,t,n){this.cache={},this.error=null,this.componentName=t,this.options=n,this.version=e}).prototype={constructor:a,notSupported:function(){this.error=i.CONSUMER_PROTOCOL.TRANSFORM.ERROR.NOT_SUPPORTED},defaultValue:function(e){var t=this.version.getProtocol().getVersion(this.options.targetVersion.toString()).schema(this.componentName);if(!t.hasMemberAt(e))throw new Error('Property key "'+e+'" not found in schema for '+this.version.getComponent(this.componentName).toString());return t.getMemberAt(e).getMetaObject().defaultValue(this.options)},get:function(e,t){return this.cache.hasOwnProperty(e)?this.cache[e]:t||null},set:function(e,t){this.cache[e]=t}},s=function(e){e=e||{},this.baseVersion=e.hasOwnProperty("baseVersion")?e.baseVersion:null,this.createMode=!!e.hasOwnProperty("createMode")&&e.createMode,this.strict=!e.hasOwnProperty("strict")||e.strict,this.targetVersion=!!e.hasOwnProperty("targetVersion")&&e.targetVersion,this.union=!!e.hasOwnProperty("union")&&e.union},o}},function(e,t){e.exports=function(e,t){var n;(n=function(e){this.name=e,this.versions={}}).prototype={constructor:n,getComponentName:function(t,n){var r=e.parse(n),i=this.getLatest().find(t),o=i.getVersion().getNumber();if(r.isEqualTo(o))return t;var a,s=t,c=this.getVersionsFromTo(o,r);if(r.isGreaterThan(o))for(a=1;a<c.length;a++){var u=c[a].whoWas(s);null!==u&&(s=u.getName())}else{if(null!==(i=i.getAlias())&&i.getVersion().getNumber().isLessThanOrEqualTo(r))return i.getName();for(;null!==i&&i.getVersion().getNumber().isGreaterThanOrEqualTo(r);)s=i.getName(),i=i.getAlias()}return s},getEarliest:function(){return this.getVersions()[0]},getLatest:function(){var e=this.getVersions();return e[e.length-1]},getName:function(){return this.name},getVersion:function(e){return this.versions[e]},getVersionNumbers:function(){var e=[];for(var t in this.versions)this.versions.hasOwnProperty(t)&&e.push(t);return e.sort(),e},getVersions:function(){for(var e=this.getVersionNumbers(),t=[],n=0;n<e.length;n++)t.push(this.versions[e[n]]);return t},getVersionsFromTo:function(t,n){for(var r=e.parse(t),i=e.parse(n),o=[],a=this.getVersions(),s=0;s<a.length;s++){var c=a[s];c.getNumber().isGreaterThanOrEqualTo(r)&&c.getNumber().isLessThanOrEqualTo(i)&&o.push(c)}return o},toString:function(){return this.name},version:function(e){return this.versions[e]||(this.versions[e]=new t(e,this)),this.versions[e]}};var r={};return n.create=function(e){var t=new n(e);return r[e]=t,t},n.get=function(e){return r[e]},n.getAll=function(){var e=[];for(var t in r)r.hasOwnProperty(t)&&e.push(r[t]);return e},n}},function(e,t){e.exports=function(e,t){var n=e.version("1.0.0");return n.at(t.SCHEMA.MESSAGE_FROM_APP).add("appInstanceId").type("string").add("payload").type("object").add("version").type("string").abstract(),n.at(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("appInstanceId").type("string").add("payload").type("object").add("version").type("string").abstract(),n.at(t.SCHEMA.MESSAGE_FROM_CONTAINER_SERVICE_RESPONSE).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("serviceId").type("string"),n.at(t.SCHEMA.MESSAGE_FROM_APP_SERVICE_REQUEST).extend(t.SCHEMA.MESSAGE_FROM_APP).add("serviceId").type("string"),n.at(t.DROPPED.TOPIC.FROM_CONTAINER.INVOKE_CONTAINER_ACTION_RESPONSE).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("payload.requestId").type("string").add("payload.payload").type("*"),n.at(t.TOPIC.FROM_CONTAINER.LAUNCH_DATA_SET).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("payload.authToken").type("string").required(!1).add("payload.context").type("array").of(t.SCHEMA.CONTEXT_ELEMENT).add("payload.launchInterface").type(t.SCHEMA.LAUNCH_INTERFACE).add("payload.services").type(t.SCHEMA.LAUNCH_DATA_SERVICES).add("payload.params").type("object"),n.at(t.TOPIC.FROM_CONTAINER.CONTEXT_SET).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("payload.context").type("array").of(t.SCHEMA.CONTEXT_ELEMENT),n.at(t.TOPIC.FROM_CONTAINER.APP_SERVICE_REQUEST).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("payload.request").type("object").add("payload.request.requestId").type("string").add("payload.request.interfaceId").type("string").add("payload.request.interfaceVersion").type("string").add("payload.request.operation").type("string").add("payload.params").type("object"),n.at(t.TOPIC.FROM_CONTAINER.APP_SERVICE_RESPONSE).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("payload.requestId").type("string").add("payload.response").type("object"),n.at(t.TOPIC.FROM_CONTAINER.CONTAINER_SERVICE_RESPONSE).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER_SERVICE_RESPONSE),n.at(t.TOPIC.FROM_CONTAINER.CONTAINER_MESSAGE_RESPONSE).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("payload.messageId").type("string").add("payload.response").type("*"),n.at(t.TOPIC.FROM_CONTAINER.ERROR).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("payload.errorCode").type("string").add("payload.message").type("string"),n.at(t.TOPIC.FROM_CONTAINER.SECURITY_REFRESH_APP_TOKEN_RECEIVED).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("payload.token").type("string"),n.at(t.TOPIC.FROM_CONTAINER.SECURITY_USER_CONTEXT_CHANGED).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("payload.services").type(t.SCHEMA.LAUNCH_DATA_SERVICES),n.at(t.TOPIC.FROM_CONTAINER.SECURITY_KEEP_ALIVE).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER),n.at(t.TOPIC.FROM_CONTAINER.REFRESH).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("payload.refreshReason").type("string").validation([t.REFRESH_REASON.USER_INITIATED,t.REFRESH_REASON.DATA_INVALIDATED]),n.at(t.TOPIC.FROM_CONTAINER.NOTIFICATION).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("payload.id").type("string").add("payload.sourceId").type("string").add("payload.message").type("string"),n.at(t.DEPRECATED.TOPIC.FROM_CONTAINER.APP_CLOSE_RESPONSE).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("payload.navRequestId").type("string").add("payload.returnValue").type("*"),n.at(t.TOPIC.FROM_CONTAINER.APP_CLOSE).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER),n.at(t.TOPIC.FROM_APP.LAUNCH_DATA_GET).extend(t.SCHEMA.MESSAGE_FROM_APP),n.at(t.DROPPED.TOPIC.FROM_APP.INVOKE_CONTAINER_ACTION).extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.requestId").type("string").add("payload.subject").type("string").validation([t.DROPPED.MESSAGE_HANDLERS.REQUEST_APP_TOKEN]).add("payload.payload").type("*"),n.at(t.DEPRECATED.TOPIC.FROM_APP.APP_LAUNCH).extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.endPointId").type("string").add("payload.launchMode").type("string").validation([t.LAUNCH_MODE.MODAL,t.LAUNCH_MODE.CLOSE_AND_REPLACE,t.LAUNCH_MODE.HIDE_CURRENT]).add("payload.flags").type("object").add("payload.params").type("object").add("payload.navRequestId").type("string").required(!1),n.at(t.TOPIC.FROM_APP.APP_READY).extend(t.SCHEMA.MESSAGE_FROM_APP),n.at(t.TOPIC.FROM_APP.CONTEXT_UPDATE).extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.context").type("array").of(t.SCHEMA.CONTEXT_ELEMENT).add("payload.pleaseNavigate").type("object"),n.at(t.TOPIC.FROM_APP.SECURITY_REFRESH_CONTAINER_TOKEN).extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.appId").type("string"),n.at(t.TOPIC.FROM_APP.SECURITY_SET_NEW_TOKEN).extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.token").type("string"),n.at(t.TOPIC.FROM_APP.SECURITY_REFRESH_APP_TOKEN).extend(t.SCHEMA.MESSAGE_FROM_APP),n.at(t.TOPIC.FROM_APP.SECURITY_STEP_UP).extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.action").type("string").add("payload.appId").type("string"),n.at(t.TOPIC.FROM_APP.SECURITY_REAUTH).extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.action").type("string").add("payload.appId").type("string"),n.at(t.TOPIC.FROM_APP.SECURITY_SIGNOUT).extend(t.SCHEMA.MESSAGE_FROM_APP),n.at(t.TOPIC.FROM_APP.SECURITY_SESSION_TERMINATED).extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.fault").type("string").add("payload.message").type("string").required(!1),n.at(t.TOPIC.FROM_APP.CONTAINER_SERVICE_REQUEST).extend(t.SCHEMA.MESSAGE_FROM_APP_SERVICE_REQUEST),n.at(t.TOPIC.FROM_APP.APP_SERVICE_REQUEST).extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.request").type("object").add("payload.request.requestId").type("string").add("payload.request.interfaceId").type("string").add("payload.request.operation").type("string").add("payload.params").type("object"),n.at(t.TOPIC.FROM_APP.APP_SERVICE_RESPONSE).extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.request").type("*").add("payload.response").type("object"),n.at(t.TOPIC.FROM_APP.INVALIDATE_APP_DATA).extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.refreshReason").type("string").validation([t.REFRESH_REASON.USER_INITIATED,t.REFRESH_REASON.DATA_INVALIDATED]).add("payload.context").type("array").of(t.SCHEMA.CONTEXT_ELEMENT),n.at(t.TOPIC.FROM_APP.SHOW_CONTAINER_MESSAGE).extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.messages").type("array").of(t.SCHEMA.CONTAINER_MESSAGE).add("payload.isModal").type("boolean"),n.at(t.TOPIC.FROM_APP.CANCEL_CONTAINER_MESSAGE).extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.messageId").type("string").add("payload.selectedValue").type("*"),n.at(t.TOPIC.FROM_APP.SECURITY_KEEP_ALIVE).extend(t.SCHEMA.MESSAGE_FROM_APP),n.at(t.TOPIC.FROM_APP.RESIZE_REQUEST).extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.height").type("int"),n.at(t.TOPIC.FROM_APP.UPDATE_PAGE_INFO).extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.title").type("string"),n.at(t.TOPIC.FROM_APP.SHOW_WAIT_INDICATOR).extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.waitType").type("string"),n.at(t.TOPIC.FROM_APP.HIDE_WAIT_INDICATOR).extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.waitType").type("string"),n.at(t.TOPIC.FROM_APP.APP_CLOSING).extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.returnValue").type("*").add("payload.options").type("object"),n.at(t.TOPIC.FROM_APP.APP_CLOSED).extend(t.SCHEMA.MESSAGE_FROM_APP),n.at(t.TOPIC.FROM_APP.ERROR_FRAMEWORK).extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.method").type("string").add("payload.text").type("string").add("payload.ex").type("string"),n.at(t.LAUNCH_DATA.GET).add("hxtx").type("int").min(0).max(2).add("hxenv").type("string").add("hxthm").type("string").add("hxtok").type("string"),n.at(t.LAUNCH_DATA.POST).add("hx_authtoken").type("string").add("hx_context").type("array").of(t.SCHEMA.CONTEXT_ELEMENT).add("hx_launchinterface").type(t.SCHEMA.LAUNCH_INTERFACE).add("hx_params").type("object").add("hx_services").type(t.SCHEMA.LAUNCH_DATA_SERVICES),n.at(t.SCHEMA.CONTEXT_ELEMENT).add("ns").type("string").add("type").type("string").add("data").type("*"),n.at(t.SCHEMA.UI_BINDING).add("id").type("string"),n.at(t.SCHEMA.DATA_BINDING).add("id").type("string").add("resolvesTo").type("string"),n.at(t.SCHEMA.APP_BINDING).add("id").type("string"),n.at(t.SCHEMA.CONTAINER_SERVICE_BINDING).add("id").type("string"),n.at(t.SCHEMA.LAUNCH_INTERFACE).add("id").type("string").add("version").type("string"),n.at(t.SCHEMA.CONTAINER_MESSAGE).add("messageId").type("string").add("message").type("string").add("subject").type("string").add("priority").type("string").add("buttons").type("array").of(t.SCHEMA.CONTAINER_MESSAGE_BUTTON),n.at(t.SCHEMA.CONTAINER_MESSAGE_BUTTON).add("label").type("string").value("OK").add("value").type("string").value("OK").add("isDefault").type("boolean").required(!1),n.at(t.SCHEMA.APP_DESCRIPTOR).add("publisherId").type("string").add("appId").type("string").add("version").type("string"),n.at(t.SCHEMA.LAUNCH_DATA_SERVICES).add("ui").type("array").of(t.SCHEMA.UI_BINDING).add("data").type("array").of(t.SCHEMA.DATA_BINDING).add("app").type("array").of(t.SCHEMA.APP_BINDING).add("container").type("array").of(t.SCHEMA.CONTAINER_SERVICE_BINDING),n}},function(e,t){e.exports=function(e,t){var n=e.version("1.1.0");return n.at(t.TOPIC.FROM_APP.SECURITY_SESSION_FAILED).was(t.TOPIC.FROM_APP.SECURITY_SESSION_TERMINATED).upgrade((function(e,t){t.set("oldFaultValue",e.getValueAt("payload.fault"))})).remove("payload.fault").remove("payload.message").add("payload.fault").type("string").validation([t.SESSION_FAILED_REASON.UNAUTHORIZED,t.SESSION_FAILED_REASON.EXPIRED,t.SESSION_FAILED_REASON.TAMPERED,t.SESSION_FAILED_REASON.GENERIC]).upgrade((function(e,n){var r;switch(n.get("oldFaultValue")){case"SecurityTokenExpired":case"SessionNotRegistered":case"SessionCancelled":r=t.SESSION_FAILED_REASON.EXPIRED;break;case"SecurityTokenMissing":case"SecurityTokenTampered":case"InvalidUserType":r=t.SESSION_FAILED_REASON.TAMPERED;break;case"Unauthorised":r=t.SESSION_FAILED_REASON.UNAUTHORIZED;break;default:r=t.SESSION_FAILED_REASON.GENERIC}e.setValueAt("payload.fault",r)})),n}},function(e,t){e.exports=function(e,t){var n=e.version("1.2.0");return n.at(t.TOPIC.FROM_CONTAINER.DEVICE_EVENT).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER),n.at(t.TOPIC.FROM_CONTAINER.DEVICE_EVENT_BUTTON).extend(t.TOPIC.FROM_CONTAINER.DEVICE_EVENT).add("payload.button").type("string").validation([t.DEVICE_EVENT.BUTTON.BACK]),n.drop(t.TOPIC.FROM_APP.SECURITY_STEP_UP),n.drop(t.TOPIC.FROM_APP.SECURITY_REAUTH),n.at(t.LAUNCH_DATA.GET).add("hxmap").type("array").of(t.SCHEMA.ENVIRONMENT_MAP),n.at(t.TOPIC.FROM_CONTAINER.LAUNCH_DATA_SET).add("payload.environmentMaps").type("array").of(t.SCHEMA.ENVIRONMENT_MAP),n.at(t.LAUNCH_DATA.POST).add("hx_environmentmaps").type("array").of(t.SCHEMA.ENVIRONMENT_MAP),n.at(t.SCHEMA.ENVIRONMENT_MAP).add("ds").type("string").add("ep").type("string"),n.at(t.TOPIC.FROM_APP.SECURITY_CANCEL_NEW_TOKEN).extend(t.SCHEMA.MESSAGE_FROM_APP),n}},function(e,t){e.exports=function(e,t){var n=e.version("1.3.0");n.at(t.TOPIC.FROM_APP.WINDOW_STATE_CHANGE).extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.state").type("string").validation([t.WINDOW_STATE.MAXIMISE,t.WINDOW_STATE.MINIMISE,t.WINDOW_STATE.RESTORE]),n.at(t.TOPIC.FROM_APP.SHOW_WAIT_INDICATOR).upgrade((function(e,t){t.set("waitType",e.getValueAt("payload.waitType"))})).remove("payload.waitType").add("payload.waitType").type("string").validation([t.SCHEMA.WAIT_TYPE.BACKGROUND,t.SCHEMA.WAIT_TYPE.MODAL]).upgrade((function(e,n){var r=n.get("waitType");r&&r.toLowerCase()===t.SCHEMA.WAIT_TYPE.MODAL?e.setValueAt("payload.waitType",t.SCHEMA.WAIT_TYPE.MODAL):e.setValueAt("payload.waitType",t.SCHEMA.WAIT_TYPE.BACKGROUND)})),n.at(t.TOPIC.FROM_CONTAINER.WINDOW_STATE_CHANGED).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("payload.state").type("string").validation([t.WINDOW_STATE.MAXIMISE,t.WINDOW_STATE.MINIMISE,t.WINDOW_STATE.RESTORE]).add("payload.previousState").type("string").validation([t.WINDOW_STATE.MAXIMISE,t.WINDOW_STATE.MINIMISE,t.WINDOW_STATE.RESTORE]).downgrade((function(e,t){t.notSupported()})),n.drop(t.DROPPED.TOPIC.FROM_CONTAINER.INVOKE_CONTAINER_ACTION_RESPONSE),n.drop(t.DROPPED.TOPIC.FROM_APP.INVOKE_CONTAINER_ACTION),n.at(t.SCHEMA.PAIRED_MESSAGE_FROM_CONTAINER).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("payload.requestId").type("string").abstract(),n.at(t.SCHEMA.PAIRED_MESSAGE_FROM_CONTAINER_REQUEST).extend(t.SCHEMA.PAIRED_MESSAGE_FROM_CONTAINER).abstract(),n.at(t.SCHEMA.PAIRED_MESSAGE_FROM_CONTAINER_RESPONSE).extend(t.SCHEMA.PAIRED_MESSAGE_FROM_CONTAINER).add("payload.isFinal").type("boolean").value(!0).add("payload.isSuccess").type("boolean").add("payload.error").type("object").required(!1).add("payload.error.code").type("string").abstract(),n.at(t.SCHEMA.PAIRED_MESSAGE_FROM_APP).extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.requestId").type("string").abstract(),n.at(t.SCHEMA.PAIRED_MESSAGE_FROM_APP_REQUEST).extend(t.SCHEMA.PAIRED_MESSAGE_FROM_APP).abstract(),n.at(t.SCHEMA.PAIRED_MESSAGE_FROM_APP_RESPONSE).extend(t.SCHEMA.PAIRED_MESSAGE_FROM_APP).add("payload.isFinal").type("boolean").value(!0).add("payload.isSuccess").type("boolean").add("payload.error").type("object").required(!1).add("payload.error.code").type("string").abstract(),n.at(t.TOPIC.FROM_APP.CONTAINER_SERVICE_REQUEST).extend(t.SCHEMA.PAIRED_MESSAGE_FROM_APP_REQUEST).upgrade((function(e,t){t.set("serviceId",e.getValueAt("serviceId")),t.set("payload",e.getMemberAt("payload").toPlainObject())})).add("payload.params").type("object").add("serviceId").type("string").upgrade((function(e,t){var n=new e.constructor({params:t.get("payload"),requestId:""});n.setOwnerMember(e.getMemberAt("payload")),e.setValueAt("payload",n),e.setValueAt("serviceId",t.get("serviceId"))})),n.at(t.TOPIC.FROM_CONTAINER.CONTAINER_SERVICE_RESPONSE).extend(t.SCHEMA.PAIRED_MESSAGE_FROM_CONTAINER_RESPONSE).downgrade((function(e,t){var n=t.get("returnValue");"object"==typeof n&&(n=new e.constructor(n)).setOwnerMember(e.getMemberAt("payload")),e.setValueAt("payload",n),e.setValueAt("serviceId",t.get("serviceId"))})).add("serviceId").type("string").add("payload.returnValue").type("object").remove("payload.error.code").add("payload.error.code").type("string").validation([t.CONTAINER_SERVICE.ERROR.AUTHENTICATION_CANCELLED,t.CONTAINER_SERVICE.ERROR.AUTHENTICATOR_NOT_FOUND,t.CONTAINER_SERVICE.ERROR.HANDLER_NOT_FOUND,t.CONTAINER_SERVICE.ERROR.SERVICE_ERROR,t.CONTAINER_SERVICE.ERROR.SERVICE_NOT_FOUND]).downgrade((function(e,t){var n=e.getMemberAt("payload.returnValue");n&&t.set("returnValue",n.toPlainObject()),t.set("serviceId",e.getValueAt("serviceId"))}));var r=function(e,n){var r=t.CONSUMER_PROTOCOL.META_MEMBER_KEY_NAME,i=e.getValueAt(n);if(i&&i instanceof Array){for(var o=[],a=0;a<i.length;a++){var s=i[a];!s||s.hasMember(r)&&s.getValueAt(r+".authRequired")||o.push(s)}e.setValueAt(n,o)}};n.at(t.TOPIC.FROM_CONTAINER.SECURITY_USER_CONTEXT_CHANGED).downgrade((function(e,t){r(e,"payload.services.ui"),r(e,"payload.services.data"),r(e,"payload.services.app"),r(e,"payload.services.container")}));var i=function(e,n,r){if(n.get("environmentMaps")){for(var i=t.CONSUMER_PROTOCOL.META_MEMBER_KEY_NAME,o=e.getMemberAt(r).getOwnerObject().toPlainObject()[i].environmentMaps,a=[],s=0;s<o.length;s++)a.push(new e.constructor(o[s]));e.setValueAt(r,a)}else e.setValueAt(r,[])};return n.at(t.LAUNCH_DATA.GET).downgrade((function(e,t){i(e,t,"hxmap")})).remove("hxmap").add("hxmap").type("string").downgrade((function(e,t){t.set("environmentMaps",e.getValueAt("hxmap"))})),n.at(t.TOPIC.FROM_CONTAINER.LAUNCH_DATA_SET).downgrade((function(e,t){r(e,"payload.services.ui"),r(e,"payload.services.data"),r(e,"payload.services.app"),r(e,"payload.services.container"),i(e,t,"payload.environmentMaps")})).remove("payload.environmentMaps").add("payload.environmentMaps").type("string").downgrade((function(e,t){t.set("environmentMaps",e.getValueAt("payload.environmentMaps"))})),n.at(t.LAUNCH_DATA.POST).downgrade((function(e,t){r(e,"hx_services.ui"),r(e,"hx_services.data"),r(e,"hx_services.app"),r(e,"hx_services.container"),i(e,t,"hx_environmentmaps")})).remove("hx_environmentmaps").add("hx_environmentmaps").type("string").downgrade((function(e,t){t.set("environmentMaps",e.getValueAt("hx_environmentmaps"))})),n.at(t.TOPIC.FROM_APP.INVOKES_NAVIGATE_REQUEST).was(t.DEPRECATED.TOPIC.FROM_APP.APP_LAUNCH).extend(t.SCHEMA.PAIRED_MESSAGE_FROM_APP_REQUEST).upgrade((function(e,t){t.set("upgradePayload",e.getMemberAt("payload").toPlainObject())})).remove("payload.launchMode").remove("payload.navRequestId").remove("payload.flags").remove("payload.endPointId").add("payload.interfaceId").type("string").add("payload.launchMode").type("string").validation([t.LAUNCH_MODE.MODAL,t.LAUNCH_MODE.CLOSE_AND_REPLACE,t.LAUNCH_MODE.HIDE_CURRENT]).add("payload.params").type("object").upgrade((function(e,t){var n=t.get("upgradePayload");e.setValueAt("payload.interfaceId",n.endPointId),e.setValueAt("payload.launchMode",n.launchMode),e.setValueAt("payload.params",n.params),e.setValueAt("payload.requestId",n.navRequestId||"")})),n.at(t.TOPIC.FROM_CONTAINER.INVOKES_NAVIGATE_RESPONSE).was(t.DEPRECATED.TOPIC.FROM_CONTAINER.APP_CLOSE_RESPONSE).extend(t.SCHEMA.PAIRED_MESSAGE_FROM_CONTAINER_RESPONSE).downgrade((function(e,t){var n=t.get("downgradePayload");if(n.hasOwnProperty("error"))t.notSupported();else{var r=new e.constructor({});r.setOwnerMember(e.getMemberAt("payload")),e.setValueAt("payload",r),e.setValueAt("payload.returnValue",n.returnValue||{}),e.setValueAt("payload.navRequestId",n.requestId)}})).add("payload.navRequestId").remove("payload.navRequestId").remove("payload.error.code").add("payload.error.code").type("string").validation([t.SCHEMA.NAVIGATE.ERROR.AUTHENTICATION_CANCELLED,t.SCHEMA.NAVIGATE.ERROR.AUTHENTICATION_FAILED,t.SCHEMA.NAVIGATE.ERROR.GENERAL_ERROR,t.SCHEMA.NAVIGATE.ERROR.INTERFACE_NOT_FOUND,t.SCHEMA.NAVIGATE.ERROR.NAVIGATE_CANCELLED]).add("payload.returnValue").type("*").downgrade((function(e,t){t.set("downgradePayload",e.getMemberAt("payload").toPlainObject())})),n.at(t.TOPIC.FROM_CONTAINER.EXPOSES_LOAD_INTERFACE_GROUP).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("payload.exposesInterfaceId").type("string").add("payload.exposesInterfaceVersion").type("string").downgrade((function(e,t){t.notSupported()})),n.at(t.TOPIC.FROM_APP.EXPOSES_LOADED).extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.exposesInterfaceId").type("string").add("payload.exposesInterfaceVersion").type("string"),n.at(t.TOPIC.FROM_APP.EXPOSES_NAVIGATE_REQUEST).extend(t.SCHEMA.PAIRED_MESSAGE_FROM_APP_REQUEST).add("payload.exposesInterfaceId").type("string").add("payload.exposesInterfaceVersion").type("string"),n.at(t.TOPIC.FROM_CONTAINER.EXPOSES_NAVIGATE_RESPONSE).extend(t.SCHEMA.PAIRED_MESSAGE_FROM_CONTAINER_RESPONSE).remove("payload.error.code").add("payload.error.code").type("string").validation([t.SCHEMA.NAVIGATE.ERROR.AUTHENTICATION_CANCELLED,t.SCHEMA.NAVIGATE.ERROR.AUTHENTICATION_FAILED,t.SCHEMA.NAVIGATE.ERROR.GENERAL_ERROR,t.SCHEMA.NAVIGATE.ERROR.INTERFACE_NOT_FOUND,t.SCHEMA.NAVIGATE.ERROR.NAVIGATE_CANCELLED]),n.at(t.TOPIC.FROM_APP.APP_CLOSED).add("payload.cancel").type("boolean").value(!1),n.at(t.TOPIC.FROM_CONTAINER.LAUNCH_DATA_SET).add("payload.features").type("object").validation((function(e,n){e.walk((function(e,n){var r=t.SCHEMA.FEATURES,i=!1;for(var o in r)if(r.hasOwnProperty(o)&&r[o]===e.getKey()){i=!0;break}if(!i)throw new Error("Unknown feature: "+e.getKey());if(!e.isBoolean())throw new Error("Feature value must be of type boolean: "+e.getKey())}))})),n.at(t.TOPIC.FROM_CONTAINER.NAVIGATING_REQUEST).extend(t.SCHEMA.PAIRED_MESSAGE_FROM_CONTAINER_REQUEST).downgrade((function(e,t){t.notSupported()})),n.at(t.TOPIC.FROM_APP.NAVIGATING_RESPONSE).extend(t.SCHEMA.PAIRED_MESSAGE_FROM_APP_RESPONSE).remove("payload.error.code").add("payload.error.code").type("string").validation([t.SCHEMA.NAVIGATE.ERROR.NAVIGATE_CANCELLED]),n}},function(e,t,n){"use strict";var r=n(52);e.exports=function(e){var t=e.version("1.4.0");return t.at(r.SCHEMA.PROVIDES_CONTEXT).add("ns").type("string").add("type").type("string"),t.at(r.SCHEMA.PROVIDES).add("context").type("array").of(r.SCHEMA.PROVIDES_CONTEXT),t.at(r.TOPIC.FROM_CONTAINER.LAUNCH_DATA_SET).add("payload.provides").type(r.SCHEMA.PROVIDES),t.at(r.TOPIC.FROM_APP.APP_SERVICE_REQUEST).extend(r.SCHEMA.PAIRED_MESSAGE_FROM_APP_REQUEST).remove("payload.request").add("payload.interfaceId").type("string").add("payload.operation").type("string").add("payload.params").type("*"),t.at(r.TOPIC.FROM_CONTAINER.APP_SERVICE_REQUEST).extend(r.SCHEMA.PAIRED_MESSAGE_FROM_CONTAINER_REQUEST).remove("payload.request").add("payload.interfaceId").type("string").add("payload.interfaceVersion").type("string").add("payload.operation").type("*").add("payload.params").type("*"),t.at(r.TOPIC.FROM_APP.APP_SERVICE_RESPONSE).extend(r.SCHEMA.PAIRED_MESSAGE_FROM_APP_RESPONSE).remove("payload.request").remove("payload.response").add("payload.returnValue").type("*").required(!1).add("payload.error.message").type("string").required(!1).remove("payload.error.code").add("payload.error.code").type("string").validation([r.APP_SERVICE.ERROR.GENERAL,r.APP_SERVICE.ERROR.UNHANDLED,r.APP_SERVICE.ERROR.INVALID_OPERATION,r.APP_SERVICE.ERROR.INVALID_PARAMS]),t.at(r.TOPIC.FROM_CONTAINER.APP_SERVICE_RESPONSE).extend(r.SCHEMA.PAIRED_MESSAGE_FROM_CONTAINER_RESPONSE).remove("payload.request").remove("payload.response").add("payload.returnValue").type("*").required(!1).add("payload.error.message").type("string").required(!1).remove("payload.error.code").add("payload.error.code").type("string").validation([r.APP_SERVICE.ERROR.GENERAL,r.APP_SERVICE.ERROR.INVALID_OPERATION,r.APP_SERVICE.ERROR.INVALID_PARAMS,r.APP_SERVICE.ERROR.SERVICE_ERROR,r.APP_SERVICE.ERROR.SERVICE_NOT_FOUND,r.APP_SERVICE.ERROR.UNHANDLED]),t.at(r.LAUNCH_DATA.GET).remove("hxtx").add("hxtx").type("int").min(0).max(3),t}},function(e,t){e.exports=function(e,t,n,r){var i=r.register("hx.ajax.processors.sanitation");e.registerSanitiseProcessor(t.PROCESSORS.AJAX_CORE_SANITATION,(function(e){i("process",e.getRequest());var t,r=[],o=e.getHeaders();for(var a in o)if(o.hasOwnProperty(a)){if(null==(t=o[a])&&delete o[a],"string"!=typeof t)continue;r.length=0,o[a]=n.cleanString(o[a],r)}}))}},function(e,t,n){"use strict";var r=n(68);e.exports=function(e,t,n,i,o,a,s,c,u,p,l,d,f,h,E,g){var A=l.register("hx.container.security"),v="{0.publisherId}.{0.appId}.{0.version}/{1}[{2.interfaceId}.{2.interfaceVersion}]";function _(){o.doClientCallback(s.EVENTS.ON_SIGN_OUT_MESSAGE),m()}function I(){m()}function S(e){if(A("bindings.received",e),h.config=e,e.bindings.forEach((function(e){e.exposes=e.exposes||{},e.exposes.ui=e.exposes.ui||[],e.exposes.data=e.exposes.data||[],e.invokes=e.invokes||{},e.invokes.ui=e.invokes.ui||[],e.invokes.data=e.invokes.data||[],e.invokes.container=e.invokes.container||[],e.demands=e.demands||{},e.demands.notifications=e.demands.notifications||[],e.demands.features=e.demands.features||[],e.provides=e.provides||{},e.provides.features=e.provides.features||[]})),function(e){e.forEach((function(e){var t=new r.AppDescriptor(e.publisherId,e.appId,e.version);e.appDescriptor=t,e.invokes.ui.forEach((function(e){e.appDescriptor=t}))}))}(e.bindings),h.appManifestsByAppId=function(e){var t={};return e.forEach((function(e){var n=e.publisherId+"."+e.appId;o.doClientCallback(s.EVENTS.ON_CHECK_APP_USER_PERMISSION,new c.CheckAppForUserPermission(e)),t[n]=t[n]||[],t[n].push(e)})),t}(e.bindings),i.setExposedInterfacesByUid(e.bindings),e.containerOffset>=0){var t=e.bindings[e.containerOffset];h.containerAppBindings=t,h.dataServiceEndpoints=n.getAppDataServiceEndpoints(t)}else A("bindings.exception.container-manifest.notfound","Container manifest could not be determined")}function O(e){var t;e.appTokens&&function(e){e.forEach((function(e){e.dateReceived=new Date})),A("tokens.update",e);var t=function(t){var n=e[t],r={token:n.token},i=h.activeAppInstances.find((function(e){return n.appId===E.format("{publisherId}.{appId},{version}",e)}));i&&p.publish(a.TOPIC.FROM_CONTAINER.SECURITY_REFRESH_APP_TOKEN_RECEIVED,i.appInstanceId,r)};for(var n in e)t(n)}(e.appTokens),e.diff?function(e){A("bindings.diff.received",e),t=function(t,n){!function(e,t,n){var r=t.hasOwnProperty(e.uid);if(e.authRequired!==r){var i=n.isInvokes?"{0.publisherId}.{0.appId}.{0.version}/{1}":v;A("bindings.diff.debug",E.format(i+".authRequired={2.authRequired} <-- {3}",n.binding,n.label,e,r))}if(e.authRequired=r,!n.isInvokes){var o=r&&t[e.uid]?t[e.uid]:null;e.authUid!==o&&(A("bindings.diff.debug",E.format(v+".authUid={2.authUid} <-- {3}",n.binding,n.label,e,o)),e.authUid=o)}}(t,e,n)},h.config.bindings.forEach((function(e){e.exposes.ui.forEach((function(n){t(n,{binding:e,label:"exposes.ui"})})),e.exposes.data.forEach((function(n){t(n,{binding:e,label:"exposes.data"})})),e.invokes.ui.forEach((function(n){t(n,{binding:e,label:"invokes.ui",isInvokes:!0})})),e.invokes.data.forEach((function(n){t(n,{binding:e,label:"invokes.data",isInvokes:!0})}))})),i.updateExposedInterfacesByUid(e);var t}(e.diff):S({containerOffset:e.containerOffset,bindings:e.bindings||[],mappings:e.mappings||[]}),h.config.bindings.forEach((function(e){(t=h.activeAppInstances.find((function(t){return e.appDescriptor.fqId===t.appDescriptor.fqId})))&&(t.bindings=e)})),m()}function y(e){if(0!==e.status){var t="";try{t=JSON.parse(e.responseText)}catch(n){t=e.responseText}A("exception.getBindingsAndTokensFailed",t)}}function m(){var e=new c.AuthLevelChanged;o.doClientCallback(s.EVENTS.ON_AUTH_LEVEL_CHANGED,e),e.handled||h.activeAppInstances.forEach((function(e){var t=T(e);p.publish(a.TOPIC.FROM_CONTAINER.SECURITY_USER_CONTEXT_CHANGED,e.appInstanceId,{services:t})}))}function C(e,n){var r=g.defer(),i=r.promise;var u=new c.AppAuthTokenRequest(e,n);return o.doClientCallbackAsync(s.EVENTS.ON_APP_AUTH_TOKEN_REQUEST,u,(function(e){r.resolve(e)}),(function(e){r.reject(e)}),(function(n,r){if(e){var i={};i[e.appInstanceId]=E.format("{publisherId}.{appId},{version}",e),t.post(h.ajaxUrl+d.getAuthToken,{appId:i},{meta:{appInstanceId:e.appInstanceId}}).then((function(e){var t=e.headers[a.AJAX.ERROR.SECURITY_FAULT];if(t)return P(t),e.error=a.AJAX.ERROR.SECURITY_FAULT,void r(e);var i=null;e.data&&e.data.token&&(i=e.data.token),n(i)})).fail((function(t){A("auth-token.exception",e.appInstanceId),r(t)}))}else n(null)})),i}function T(e){var t={ui:[],data:[],app:[],container:[]},n=e.bindings.invokes,r=a.CONSUMER_PROTOCOL.META_MEMBER_KEY_NAME;return n.ui.forEach((function(e){var n={id:e.id};n[r]={authRequired:e.authRequired},t.ui.push(n)})),n.data.forEach((function(e){var n={id:e.id};n[r]={authRequired:e.authRequired},e.type===s.DATASERVICETYPES.HELIX_BUS?t.app.push(n):(n.resolvesTo=e.resolvesTo,t.data.push(n))})),n.container.forEach((function(e){var n={id:e.id};n[r]={authRequired:e.authRequired},t.container.push(n)})),t}function P(e,t){e===a.SESSION_FAILED_REASON.EXPIRED&&o.doClientCallback(s.EVENTS.ON_SESSION_EXPIRED,new c.SessionExpired(t)),o.doClientCallback(s.EVENTS.ON_SECURITY_SESSION_FAILED,new c.SecuritySessionFailed(e,t))}function N(n){(n=n||{}).actionParams=e.get("auth-tokens",n.actionParams);var r=h.ajaxUrl+d.getAuthTokens,i={appIds:[],bindingsAuthOnly:n.bindingsAuthOnly||!1};i.appIds=h.activeAppInstances.map((function(e){var t={};return t[e.appInstanceId]=E.format("{publisherId}.{appId},{version}",e),t}));var u=[];h.activeAppInstances.forEach((function(e){var t=u.find((function(t){return t.appId===E.format("{publisherId}.{appId}",e)&&t.version===e.version}));t?t.appInstanceIds.push(e.appInstanceId):(t={appId:E.format("{publisherId}.{appId}",e),version:e.version,appInstanceIds:[e.appInstanceId]},u.push(t))}));var p=g.defer(),l=p.promise;return t.post(r,i,{headers:{hxtok:n.authenticatorToken||null,hxorg:n.issuingAppInstance?E.format("{publisherId}.{appId},{version}",n.issuingAppInstance):null},meta:{appInstanceIds:u}}).then((function(e){var t=e.data;return t?e.headers[a.AJAX.ERROR.SECURITY_FAULT]?(A("auth-tokens.fault.warning"),e.error=a.AJAX.ERROR.SECURITY_FAULT,y(e),void p.resolve(e)):void o.doClientCallbackAsync(s.EVENTS.ON_AUTH_TOKENS_RECEIVED,new c.AuthTokensReceived(t,n.actionParams),(function(){p.resolve(e)}),(function(){A("auth-tokens-received.exception"),e.error=a.AJAX.ERROR.SECURITY_FAULT,y(e),p.reject(e)}),(function(e){O(t),e()})):(A("auth-tokens.exception","no data returned"),e.error=a.AJAX.ERROR.NO_TOKEN,y(e),void p.resolve(e))})).fail((function(e){A("auth-tokens.exception"),e.error=a.AJAX.ERROR.SECURITY_FAULT,y(e),p.reject(e)})),l}function R(e){e=e||"",f.keepAlive((function(){h.activeAppInstances.forEach((function(t){e!==t.appInstanceId&&p.publish(a.TOPIC.FROM_CONTAINER.SECURITY_KEEP_ALIVE,t.appInstanceId)}))}))}function b(e,t){N({issuingAppInstance:e,authenticatorToken:t,bindingsAuthOnly:!0})}function M(e){var r=n.closeActiveApps();r.push(t.post(h.ajaxUrl+d.signout));var i=g.all(r);e||i.then(_,I)}return u.addMessageHandler(a.TOPIC.FROM_APP.SECURITY_CANCEL_NEW_TOKEN,(function(e,t){var n=new c.SecurityAuthCancelled;if(o.doClientCallback(s.EVENTS.ON_SECURITY_AUTH_CANCELLED,n),n.handled)return})),u.addMessageHandler(a.TOPIC.FROM_APP.SECURITY_KEEP_ALIVE,(function(e,t){R(t&&t.appInstanceId||"")})),u.addMessageHandler(a.TOPIC.FROM_APP.SECURITY_REFRESH_APP_TOKEN,(function(e,t){var n=h.activeAppInstances.getItemByKey(t.appInstanceId);if(!n)return void A("exception.app-not-running",t.appInstanceId);if(n.launchInterface.tokenTransport===s.TOKEN_TRANSPORT_TYPE.NONE)return;C(n,!0).then((function(e){n.authToken=e;var r={token:e};p.publish(a.TOPIC.FROM_CONTAINER.SECURITY_REFRESH_APP_TOKEN_RECEIVED,t.appInstanceId,r)}))})),u.addMessageHandler(a.TOPIC.FROM_APP.SECURITY_REFRESH_CONTAINER_TOKEN,f.keepAlive),u.addMessageHandler(a.TOPIC.FROM_APP.SECURITY_SESSION_FAILED,(function(e,t){P(t.payload.fault,t.appInstance)})),u.addMessageHandler(a.TOPIC.FROM_APP.SECURITY_SET_NEW_TOKEN,(function(e,t){var n=t.payload.token,r=h.activeAppInstances.getItemByKey(t.appInstanceId);o.doClientCallback(s.EVENTS.ON_SECURITY_BEFORE_TOKEN_CHANGE,new c.SecurityBeforeTokenChange(r,n)),b(r,n)})),u.addMessageHandler(a.TOPIC.FROM_APP.SECURITY_SIGNOUT,(function(e,t){M()})),{getAppLaunchDataServices:T,getAuthTokenForApp:C,requestBindingsAndTokens:N,notifySecurityFault:P,sendUniverseKeepAliveMessage:R,setNewToken:b,signIn:function(){o.doClientCallback(s.EVENTS.ON_SIGN_IN_MESSAGE)},signOut:M}}},function(e,t,n){"use strict";e.exports=function(e,t,n,r){var i,o=t.register("hx.container.session.monitor");return{keepAlive:function(t){var a=new Date;(!i||a.getTime()>i)&&(a.setSeconds(a.getSeconds()+("number"==typeof n.keepAliveInterval?n.keepAliveInterval:120)),i=a.getTime(),o("_keepAlive","Ping container"),e.post(r.ajaxUrl+n.ping).then(t))}}}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i,o,a,s,c,u,p,l){var d=s.register("hx.container.security.reauth");i.bindAsync(o.EVENTS.ON_AUTH_TOKENS_RECEIVED,(function(e,r,a,s){if(!e.actionParams||!0!==e.actionParams.isReauth)return void s();(function(e,r){if(!e||!e.diff)return;var a=new Array;if(p.activeAppInstances.forEach((function(t){var n=e.diff[t.launchInterface.uid];n&&(t.launchInterface.authRequired=!0,t.launchInterface.authUid=n,a.some((function(e){return e.authUid===n}))||a.push({authUid:n,appInterface:t.launchInterface}))})),a.length<1)return;!function e(){var s=a.pop();s?(d("stepping.up",s.authUid),n.doAuthStepUp(null,s.appInterface,c.navigate,(function(){d("steppedUp",s.authUid),e()}),(function(n){d("stepUp.error",s.authUid,n.code,n.details);var r=[];p.activeAppInstances.forEach((function(e){e.launchInterface.authUid===s.authUid&&r.push(t.closeApp(e))})),l.all(r),e()}),r)):i.doClientCallback(o.EVENTS.ON_REAUTH_COMPLETE)}()})(e.response,e.actionParams),r()})),i.bind(o.EVENTS.ON_SECURITY_SESSION_FAILED,(function(t){if(t.fault===a.SESSION_FAILED_REASON.EXPIRED){var n=e.get("reauth-initiated-request");n.isReauth=!0,u.requestBindingsAndTokens({actionParams:n,bindingsAuthOnly:!0})}}))}},function(e,t,n){var r=n(135).ArrayMap;e.exports=function(e,t,n){var i=t||{};return{activeAppInstances:new r([],"appInstanceId"),ajaxUrl:i.ajaxUrl?"/"+i.ajaxUrl.replace(/^\//,""):"/services",appCloseTimeout:i.appCloseTimeout||6e3,appManifestsByAppId:{},authStepUpWorkflowDetailsStack:[],basePath:i.basePath||n.getLocationBasePath(),config:i.config||{},containerId:i.containerId||"helix.container",containerAppBindings:null,containerThemeName:i.containerThemeName||null,containerThemeId:i.containerThemeId||null,containerThemeVersion:i.containerThemeVersion||null,dataAppParentDiv:null,dataServiceEndpoints:null,hasInit:!1,sharedContext:new e,supportedThemes:[],theme:null,tunnelUrl:i.tunnelUrl||"/Scripts/PageBus/t.html",viewPorts:new r([],"id")}}},function(e,t,n){"use strict";e.exports=function(e,t){void 0===t&&(t=!0);var n=t?e.sessionStorage:e.localStorage;return{getItem:function(e){return n.getItem(e)},isAvailable:function(){try{return"object"==typeof n&&(n.setItem("hxt",!0),n.removeItem("hxt"),!0)}catch(e){return!1}},removeItem:function(e){n.removeItem(e)},setItem:function(e,t){return n.setItem(e,t)},getSetting:function(e,t){try{return n.getItem(e)||t}catch(e){return t}},setSetting:function(e,t){try{return n.setItem(e,t),!0}catch(e){return!1}}}}},function(e,t){e.exports=function(e,t,n){var r=n.register("hx.container.themes");function i(e,n){if(t.isType(e,"object"))this.name=e.name,this.version=e.version;else if(t.isType(e,"string"))if(n)t.isType(n,"string")&&t.isType(e,"string")&&t.isType(n,"string")&&(this.name=e,this.version=n);else{var r=e.split(".");this.name=r[0],this.version=r.length>=2?r[1]:"v1"}else if(!this.name||!this.version)throw new Error("Error parsing themeId: "+e+"."+n);this.version=this.version.replace(/^([^v])/,"v$1"),this.id=this.name+"."+this.version}return i.prototype={clone:function(){return new i(this.id)},getThemeId:function(e){return this.name+"."+(e?e+this.version:this.version)}},{HelixTheme:i,setThemeId:function(n,o){if(n?e.theme=new i(n):t.isType(n,"null")&&(e.theme=new i("helix.v1")),r("theme.set",e.theme,o),o){if(!t.isType(o,"array"))throw new Error("supportedThemes expects array, "+typeof o+" given");e.supportedThemes=o}},getAppTheme:function(n){var r,o=t.isType(n.themes,"array")?n.themes:[],a=t.isType(e.supportedThemes,"array")?e.supportedThemes:[],s=e.theme;for(r=0;r<o.length;r++)if(s.name===o[r].name&&s.version===o[r].version)return s.clone();for(r=0;r<a.length;r++)for(var c=0;c<o.length;c++)if(a[r].name===o[c].name&&a[r].version===o[c].version)return new i(a[r].name,a[r].version);return o.length>=1?new i(o[0].name,o[0].version):s?s.clone():new i("helix.v1")},setDefaultTheme:function(){if(e.theme)this.setThemeId(e.theme.themeId);else if(t.isType(e.containerAppBindings.themes,"array")&&e.containerAppBindings.themes.length>0){var n=e.containerAppBindings.themes[0];this.setThemeId(n.name+"."+n.version,e.containerAppBindings.themes)}else this.setThemeId("helix.v1")}}}},function(e,t){e.exports=function(e,t){var n=!1,r=[],i=t.register("hx.tools");return{urlPattern:/hxtool=([^#&]+)/i,init:function(){try{var t=document.getElementById("helix-container-js");if(!t)return this.onReady(),!1;var n=function(e){if(!e)return null;try{return JSON.parse(e)}catch(e){i("exception.data-tools.invalid",e)}}(t.getAttribute("data-tools"));if(!n||!n.basePath)return i("load.noToolsDefined"),this.onReady(),!1;if(this.options=e,this.basePath=n.basePath,this.availableTools=n.tools||null,this.alignment=t.getAttribute("data-tools-display"),"true"===(t.getAttribute("data-tools-disable-implicit-load")||"").toLowerCase())return this.onReady(),!0;if(!this.load([]))return this.onReady(),!1}catch(e){return i("init.exception",e),this.onReady(),!1}return!0},load:function(e,t){if(!this.basePath)return i("load.failed","unable to load requested tools - no tools available to the container"),!1;var n,r,o,a,s=(e||[]).concat((n=this.urlPattern,!(r=window.location.href.match(n))||r.length<2?[]:decodeURIComponent(r[1]).split(",")));return this.requestedToolIds=Object.keys(this.availableTools||{}).filter((function(e){return s.indexOf(e)>=0})),t&&t.alignment&&(this.alignment=t.alignment),o=this.basePath+"helix.container.tools.js",(a=document.createElement("script")).src=o,a.charset="UTF-8",document.body.appendChild(a),i("helix.container.tools.js.injected",o),!0},onReady:function(){r.forEach((function(e){e()})),n=!0},ready:function(e){n?e():r.push(e)},getWindow:function(e){return e.window.contentWindow}}}},function(e,t){e.exports=function(){var e,t;return{require:function(t){e=t},init:function(n){t=e.initHub(n)},publish:function(e,n){t.publish(e,n)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(52),i=function(e,t,n){this.appInstance=t,this.exposedInterface=t?t.launchInterface:null,this.navigateType=e,this.previousExposedInterface=n};t.NavigateSuccessResponse=i;var o=function(){function e(e,t){this._ensureValidCode(e),this.code=e,this.details=t}return e.prototype._ensureValidCode=function(e){var t=!1;for(var n in r.NAVIGATE.ERROR){if(e===r.NAVIGATE.ERROR[n]){t=!0;break}}if(!t)throw new Error("The async error handler expects a valid error code from Constants.NAVIGATE.ERROR list. The supplied error code ("+e+") in not valid.")},e}();t.NavigateErrorResponse=o},function(e,t,n){"use strict";var r=function(){function e(e){this._element=e}return e.prototype.show=function(){this._element.style.display="block"},e.prototype.hide=function(){this._element.style.display="none"},e.prototype.appendChild=function(e){this._element.appendChild(e)},e.prototype.appendTo=function(e){e.appendChild(this._element)},e}(),i=function(){function e(e,t){this._document=e,this._log=t.register("hx.container.viewPortManager")}return e.prototype.getElementById=function(e,t){void 0===t&&(t=!1);var n=this._document.getElementById(e);return t&&!n&&((n=this._document.createElement("div")).setAttribute("id",e),n.style.display="none",this._document.body.appendChild(n)),new r(n)},e}();e.exports=i},function(e,t){e.exports=function(e,t,n,r){var i;function o(t,n,r){if(!t)throw new Error("The viewport id must be supplied");this.id=t,this.element=n,this.container=n,this.apps=new e([],"appInstanceId"),this.isAppService=!!r.isAppService,this.isModal=!!r.isModal}var a={constructor:o,add:function(e){this.apps.push(e)},closeAll:function(e,t,n){if(0!==this.apps.count()){var r=function(o){o.parentAppInstance?i.closeApp(o.parentAppInstance,n).then(r).fail(t):e()};i.closeApp(this.apps.lastItem(),n).then(r).fail(t)}else e()},hide:function(e,i){t.doClientCallbackAsync(n.EVENTS.ON_VIEWPORT_HIDE,new r.ViewPortHide(this,i),e,null,function(){this.element.hide(),e()}.bind(this))},remove:function(e){this.apps.remove(e)},show:function(e,i){t.doClientCallbackAsync(n.EVENTS.ON_VIEWPORT_SHOW,new r.ViewPortShow(this,i),e,null,function(){this.isAppService||this.element.show(),e()}.bind(this))}};return o.prototype=a,o.require=function(e){i=e},o}},function(e,t){e.exports=function(e,t,n,r,i){i.addMessageHandler(t.TOPIC.FROM_APP.SHOW_WAIT_INDICATOR,(function(t,i){e.doClientCallback(n.EVENTS.ON_SHOW_WAIT_INDICATOR,new r.ShowWaitIndicator(i.payload.waitType,i.appInstance))})),i.addMessageHandler(t.TOPIC.FROM_APP.HIDE_WAIT_INDICATOR,(function(t,i){e.doClientCallback(n.EVENTS.ON_HIDE_WAIT_INDICATOR,new r.HideWaitIndicator(i.payload.waitType,i.appInstanceId))}))}},function(e,t,n){"use strict";e.exports=function(){var e={defer:function(){var e,t;return{promise:new Promise((function(n,r){e=n,t=r})),resolve:e,reject:t}},reject:function(e){var t,n=new Promise((function(e,n){t=n}));return t(e),n},all:function(e){var t,n,r=new Promise((function(e,r){t=e,n=r})),i=[];return e.map((function(r){r.then((function(n){i.push(n),i.length===e.length&&t(i)})).catch((function(e){n(e)}))})),r},Promise:Promise};return e.Promise.prototype.fail=e.Promise.prototype.catch,e.Promise.prototype.success=e.Promise.prototype.then,e.Promise.prototype.error=e.Promise.prototype.catch,e}},function(e,t){e.exports=function(e,t,n,r,i,o,a){function s(i,s){var c=a.activeAppInstances.getItemByKey(i);c&&s!==c.windowState&&e.doClientCallbackAsync(n.EVENTS.ON_APP_WINDOW_STATE_CHANGE,new r.AppWindowStateChange(s,c.windowState,c),(function(){var e={state:s,previousState:c.windowState};c.windowState=s,o.publish(t.TOPIC.FROM_CONTAINER.WINDOW_STATE_CHANGED,i,e)}))}return i.addMessageHandler(t.TOPIC.FROM_APP.WINDOW_STATE_CHANGE,(function(e,t){s(t.appInstanceId,t.payload.state)})),{setAppWindowState:s}}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});var i=n(434);t.CommonUtils=i,r(n(437)),r(n(438)),r(n(142))},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(435)),r(n(139)),r(n(140)),r(n(436))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deepAssign=function e(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++)for(var a=o[i],s=0,c=Object.keys(a);s<c.length;s++){var u=c[s],p=a[u];"object"==typeof p?(Array.isArray(p)?t[u]=Array.isArray(t[u])?t[u]:[]:t[u]=t[u]&&"object"==typeof t[u]?t[u]:{},t[u]=e(t[u],p)):t[u]=p}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLocalStorageAvailable=function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(e){return!1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.base64DecodeUrl=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}var n=atob(t);try{return decodeURIComponent(n)}catch(e){return n}}}(t.Base64Utils||(t.Base64Utils={}))},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(439)),r(n(137)),r(n(440)),r(n(441)),r(n(141))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.GET="get",e.POST="post",e.PUT="put",e.PATCH="patch",e.DELETE="delete",e.COPY="copy",e.HEAD="head",e.OPTIONS="options",e.LINK="link",e.UNLINK="unlink",e.PURGE="purge",e.LOCK="lock",e.UNLOCK="unlock",e.PROPFIND="propfind",e.VIEW="view"}(t.HttpMethod||(t.HttpMethod={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.success=200]="success",e[e.accepted=202]="accepted",e[e.badRequest=400]="badRequest",e[e.unauthorized=401]="unauthorized",e[e.forbidden=403]="forbidden",e[e.notFound=404]="notFound",e[e.methodNotAllowed=405]="methodNotAllowed",e[e.internalError=500]="internalError",e[e.notImplemented=501]="notImplemented",e[e.serviceUnavailable=503]="serviceUnavailable",e[e.timeout=408]="timeout"}(t.StatusCode||(t.StatusCode={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(137),i=function(){function e(e,t){void 0===e&&(e=""),void 0===t&&(t=!1),this.preserveSearchCase=t,this.location=this.scrubLocation(e||window.location.href),this.domain=this.getDomain(this.location),this.setSearch(this.location),this.baseUri=this.location.split("?")[0],this.protocol=this.extractProtocolFrom(this.location),this.pathName=this.extractPathNameFrom(this.location)}return e.prototype.scrubLocation=function(e){var t=this.scrubMultipleEncoding(e);return t=this.sanitizeUrl(t)},e.prototype.extractProtocolFrom=function(e){var t=/([a-zA-Z]+):\/\//.exec(e);return t?t[1]:""},e.prototype.extractPathNameFrom=function(e){return 0===e.indexOf("http")?/http(s)?:\/\/([^\/]+)(.+)/.exec(e)[3]:e},e.prototype.scrubMultipleEncoding=function(e){for(var t=e;/%(25)\1+/.test(t);)t=decodeURI(t);return t=t.replace(/%25/g,"%")},e.prototype.sanitizeUrl=function(e){return e.replace(/[;<>]|(%3[BCE])/g,"")},e.prototype.getDomain=function(e){var t="",n=/:\/\/([^\/]+)/.exec(e);return n&&n.length>=2&&(t=n[1]),t},e.prototype.setSearch=function(e){var t=this;this.search={},this.absSearch={},this.searchKeys=[],e.slice(e.indexOf("?")+1).split("&").map((function(e){var n=e.split("=");if(2===n.length){var r=t.preserveSearchCase?n[0]:n[0].toLowerCase(),i=n[1];t.search[r]=decodeURIComponent(i),t.absSearch[r]=t.absSearch[r]||[],t.absSearch[r].push(t.search[r]),1===t.absSearch[r].length&&t.searchKeys.push(r)}})),this.hasSearch=this.searchKeys.length>0},e.prototype.toString=function(){return new o(this).toString()},e.prototype.addQsParameter=function(e,t){this.absSearch[e]||this.searchKeys.push(e),this.absSearch[e]=this.absSearch[e]||[],this.absSearch[e]=[t],this.search[e]=t},e}();t.Uri=i;var o=function(){function e(e){this.uri=e}return e.prototype.toString=function(){return""+this.uri.baseUri+this.getQS()},e.prototype.getQS=function(){var e=this.getQSParts();return this.sortQSParts(e),this.concatQSParts(e)},e.prototype.getQSParts=function(){var e=this,t=[];return this.uri.searchKeys.forEach((function(n){e.uri.absSearch[n].forEach((function(e){t.push([r.HttpUtils.fixedEncodeURIComponent(n),r.HttpUtils.fixedEncodeURIComponent(e)])}))})),t},e.prototype.sortQSParts=function(e){e.sort((function(e,t){return e[0]===t[0]?e[1]===t[1]?0:e[1]>t[1]?1:-1:e[0]>t[0]?1:-1}))},e.prototype.concatQSParts=function(e){var t=e.map((function(e){return e[0]+"="+e[1]})).reduce((function(e,t){return e+"&"+t}));return t.length>0&&(t="?"+t),t},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(443))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(444),i=function(){function e(e,t){this.topicHandlers={},this.bus=e,this.channel=t}return e.prototype.subscribe=function(e,t){var n=this.bus.channels[this.channel].topicHandlers[e];n||(n=[]),n.push(t),this.bus.channels[this.channel].topicHandlers[e]=n},e.prototype.unsubscribe=function(e){this.bus.channels[this.channel].topicHandlers[e]=[]},e.prototype.publish=function(e,t){var n=null;"string"==typeof e?((n={}).topic=e,n.data=t):"object"==typeof e&&(n=e),n&&(n.channel||(n.channel=this.channel),this.bus.publish(n))},e}(),o=function(){function e(){var e=this;this.ChannelDefinition=i,this.postalClients={},this.handshakedClients={},this.origin=location.origin||location.protocol+"//"+location.host,this.isTopWindow=window.self===window.top,this.defaultChannel="/",this.channels={PostMessageModuleDefaultChannel:{topicHandlers:{}}},this.postMessageFilters={in:{},out:{}},this.postMessageFilterState={enabled:!0,filterMode:"whitelist",filterDirection:"both"},this._istanceId="",this.wiredTapHandlers=[],this.instanceId.bind(this),this.channel.bind(this),this.receiveWindowMessageHandler.bind(this),this.addWireTap.bind(this),this.publish.bind(this),this.linkChannels.bind(this),this.packingSlips=new r.default(this._istanceId),this.fedx={addFilter:this.addFilter.bind(this),signalReady:function(){e.postalClients[e.instanceId()]=!0,e.publish({channel:e.instanceId(),topic:"",data:""},"ping")}},window.addEventListener&&addEventListener("message",this.receiveWindowMessageHandler.bind(this))}return e.prototype.instanceId=function(e){if(!e)return this._istanceId;this._istanceId=e,this.packingSlips.instanceId=e},e.prototype.channel=function(e,t){var n=e,r=this.channels[n];return r&&!t||(r=new this.ChannelDefinition(this,n),this.channels[n]=r),r},e.prototype.linkChannels=function(e,t){},e.prototype.receiveWindowMessageHandler=function(e){var t=e.data;t&&(t.postal&&t.packingSlip?this.handleReceivedPackingSlip(e):t.channel&&t.topic&&this.handleReceivedPayload(t))},e.prototype.handleReceivedPackingSlip=function(e){var t=this,n=e.data.packingSlip,r=n.type,i={postal:!0},o=null,a=null,s=e.origin?e.origin:e.source.location.origin;switch("null"===s&&e.source.location.ancestorOrigins&&e.source.location.ancestorOrigins.length>0&&(s=e.source.location.ancestorOrigins[1]),r){case this.packingSlips.getPackingSlipTypeKey("ping"):i.packingSlip=this.packingSlips.getPackingSlip("pong",n),e.source.postMessage(i,s),n.instanceId&&!this.handshakedClients[n.instanceId]&&(i.packingSlip=this.packingSlips.getPackingSlip("ping"),e.source.postMessage(i,s));break;case this.packingSlips.getPackingSlipTypeKey("pong"):this.handshakedClients[n.instanceId]=!0,a={channel:"postal.federation",topic:"client.federated",data:{remoteId:n.instanceId,localId:this.instanceId(),transport:e.transport}},this.postalClients[n.instanceId]?(i.packingSlip={type:this.packingSlips.getPackingSlipTypeKey("message"),instanceId:this.instanceId(),envelope:a},e.source.postMessage(i,s)):e.source.postMessage(a,s);break;case this.packingSlips.getPackingSlipTypeKey("message"):(o=n.envelope).lastSender=n.instanceId,"postal.federation"===o.channel?this.instanceId()&&this.instanceId()!==o.lastSender&&(this.postalClients[n.instanceId]=!0,o.originId=o.originId||this.instanceId(),this.receiveWindowMessageHandler({data:o})):this.receiveWindowMessageHandler({data:o});break;case this.packingSlips.getPackingSlipTypeKey("bundle"):n.packingSlips.map((function(n){e.data.packingSlip=n,t.handleReceivedPackingSlip(e)}))}},e.prototype.handleReceivedPayload=function(e){var t=e.channel,n=e.topic,r=e.data,i=this.channels[t];if(this.wiredTapHandlers.length&&this.wiredTapHandlers.map((function(t){t(r,e)})),i){if(!this.matchesFilter(t,n,"in"))return;var o="";Object.keys(i.topicHandlers).map((function(e){if(-1!==e.indexOf(".#",e.length-".#".length)){var t=e.substr(0,e.length-2);0===n.indexOf(t,0)&&(o=e)}else e===n&&(o=e)}));var a=i.topicHandlers[o];Array.isArray(a)&&a.forEach((function(t){t(r,e)}))}},e.prototype.addFilter=function(e){var t=this;e.map((function(e){"both"===e.direction?(t.postMessageFilters.in[e.channel]||(t.postMessageFilters.in[e.channel]=[]),t.postMessageFilters.out[e.channel]||(t.postMessageFilters.out[e.channel]=[]),t.postMessageFilters.in[e.channel].push(e.topic),t.postMessageFilters.out[e.channel].push(e.topic)):(t.postMessageFilters[e.direction][e.channel]||(t.postMessageFilters[e.direction][e.channel]=[]),t.postMessageFilters[e.direction][e.channel].push(e.topic))}))},e.prototype.matchesFilter=function(e,t,n){if(!this.postMessageFilterState.enabled)return!0;var r=this.postMessageFilters[n][e],i=r&&this.postMessageFilters[n][e].reduce((function(e,n){if(-1===n.indexOf("#")&&-1===n.indexOf("*"))t===n&&(e=!0);else{var r,i="^"+n.split(".").map((function(e){var t="";return r&&(t="#"!==r?"\\.\\b":"\\b"),r=e,t+="#"===e?"[\\s\\S]*":"*"===e?"[^.]+":e})).join("")+"$";new RegExp(i).test(t)&&(e=!0)}return e}),!1),o="blacklist"===this.postMessageFilterState.filterMode;return o&&(!r||r&&!i)||!o&&r&&i},e.prototype.addWireTap=function(e){this.wiredTapHandlers.push(e)},e.prototype.publish=function(e,t){var n=this;e.channel=e.channel||this.defaultChannel;var r=[],i=window.Helix;if(!i||i&&i.isApp)r=[{window:window.top,frame:null}];else{var o=document.querySelectorAll("iframe");Array.from(o).forEach((function(t){t.getAttribute("id")===e.channel&&r.push({window:t.contentWindow,frame:t})}))}r.forEach((function(r){try{var i=r.window,o=r.frame?r.frame.src:i.location.origin;"null"===o&&i.location.ancestorOrigins&&i.location.ancestorOrigins.length>0&&(o=i.location.ancestorOrigins[1]),n.postalClients[e.channel]||n.postalClients.container?"ping"===t?i.postMessage({postal:!0,packingSlip:n.packingSlips.getPackingSlip("ping")},o):i.postMessage({postal:!0,packingSlip:n.packingSlips.getPackingSlip("message",e)},o):i.postMessage(e,o)}catch(e){console.error(e)}}))},e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.instanceId=e,this.packingSlips={},this.packingSlips={ping:this.ping,pong:this.pong,message:this.message,disconnect:this.disconnect,bundle:this.bundle}}return e.prototype.getPackingSlip=function(e,t){if(Object.prototype.hasOwnProperty.call(this.packingSlips,e))return this.packingSlips[e].apply(this,Array.prototype.slice.call(arguments,1))},e.prototype.getPackingSlipTypeKey=function(e){switch(e){case"ping":return"federation.ping";case"pong":return"federation.pong";case"message":return"federation.message";case"disconnect":return"federation.disconnect";case"bundle":return"federation.bundle";default:return""}},e.prototype.ping=function(){return{type:this.getPackingSlipTypeKey("ping"),instanceId:this.instanceId,timeStamp:new Date,ticket:this.createUUID()}},e.prototype.pong=function(e){return{type:this.getPackingSlipTypeKey("pong"),instanceId:this.instanceId,timeStamp:new Date,pingData:{instanceId:e.instanceId,timeStamp:e.timeStamp,ticket:e.ticket}}},e.prototype.message=function(e){return{type:this.getPackingSlipTypeKey("message"),instanceId:this.instanceId,timeStamp:new Date,envelope:e}},e.prototype.disconnect=function(){return{type:this.getPackingSlipTypeKey("disconnect"),instanceId:this.instanceId,timeStamp:new Date}},e.prototype.bundle=function(e){return{type:this.getPackingSlipTypeKey("bundle"),instanceId:this.instanceId,timeStamp:new Date,packingSlips:e}},e.prototype.createUUID=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},e}();t.default=r},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(446)),r(n(447))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this._log=e.register("hx.asb.online.notificationhandler.helix")}return e.prototype.registerNotificationHandler=function(e){e.helix=this.handleHelixNotification.bind(this)},e.prototype.handleHelixNotification=function(e){this._log("notification.info",e.name),Helix.Container.doClientCallback(e.name)},e}();t.HelixNotificationHandler=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.processedElementHashes=[],this.notificationHandlers={},this._log=e.register("hx.asb.notificationService")}return e.prototype.getNotificationHandler=function(){return this.notificationHandlers},e.prototype.registerHelixCallback=function(){Helix.Container.bind(Helix.Container.EVENTS.ON_CONTEXT_CHANGE,this.onContextChange,this,null)},e.prototype.registerNotificationHandler=function(e,t){this._log("register.notificationHandler.info",e),this.notificationHandlers[e]=t},e.prototype.onContextChange=function(e){var t=this;this._log("notificationHandler.onContextChange",e),this.getNotificationElementsFromContext(e.newContext).forEach((function(n){var r=t.getElementHash(n,e.appInstance);t.processedElementHashes.find((function(e){return e===r}))||(t.notificationHandlers[n.type]&&t.notificationHandlers[n.type](n.data,e.appInstance),t.processedElementHashes.push(r))})),e.prevContext._elements=e.newContext._elements,e.newContext._elements=[]},e.prototype.getElementHash=function(e,t){var n=t.appId+e.type+e.data.__timestamp;return this.processedElementHashes.length>1e5&&(this.processedElementHashes=[]),n},e.prototype.getNotificationElementsFromContext=function(e){var t=(new Date).getTime();return e.getElements().filter((function(e){return"feature.notification"==e.ns&&t-e.data.__timestamp<5e3}))},e}();t.NotificationService=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Performance=void 0;var r=n(449);t.Performance=function(e,t,n){var i="hx.container.online.inittime";e.console.timeEnd(i);var o=new Date,a=new Date;e.console.time("hx.container.online.configure");var s={label:"hx.container.online.configure",startTime:a};function c(e){if("Performance"===e.messageType&&e.detail)try{var t=JSON.parse(e.detail);t.containerId=this,e.detail=JSON.stringify(t)}catch(e){return}}return{startUpSetup:function(e,t){e.addListener(c.bind(t));var n="hx.container.online.loadtime",r=window.__InstrumentationTimeEntry;if(r&&r[n]&&e.timePreloaded(r[n].startTime,r[n].label),e.timePreloaded(s.startTime,s.label),e.timePreloaded(r["hx.container.online.landingtime"].startTime,"hx.container.online.landingtime"),e.timePreloaded(r["hx.container.online.first-domainapi-landingtime"].startTime,"hx.container.online.first-domainapi-landingtime"),r&&r[i]){var a={containerId:t};e.sendPerformance(o,r[i].startTime,r[i].label,a)}},appReadyHandle:function(e){for(var t,n=0;n<arguments.length;n++){var r=arguments[n];r&&r.State&&r.Instrumentation&&(t=r)}var i=t.State,o=t.Instrumentation,a=i.activeAppInstances.lastItem(),s=a.appId,c=a.appInstanceId;o.timeEnd("hx.container.online.container-feature-loading"),o.timeEnd("hx.container.online.feature-only-loading");try{var u=document.getElementById(c).contentWindow.performance,p=new Date(u.timeOrigin),l=new Date(u.timing.domComplete);o.sendPerformance(l,p,"hx.framework.feature.dom-complete",{appId:s},!1);for(var d=u.getEntries(),f=0,h=d;f<h.length;f++){var E=h[f];if("first-paint"===E.name){var g=new Date(u.timeOrigin+E.startTime);o.sendPerformance(g,p,"hx.framework.feature.first-paint",{appId:s},!1)}if("first-contentful-paint"===E.name){g=new Date(u.timeOrigin+E.startTime);o.sendPerformance(g,p,"hx.framework.feature.first-contentful-paint",{appId:s},!1)}}}catch(e){return}},loadFeature:function(){for(var e,t=0;t<arguments.length;t++){var n=arguments[t];n&&n.State&&n.Instrumentation&&(e=n)}var r=e.Instrumentation,i={containerId:e.containerId};r.time("hx.container.online.container-feature-loading"),r.timeEnd("hx.container.online.configure",{content:i},!1),r.timeEnd("hx.container.online.loadtime",{content:i},!1)},launchFeature:function(){for(var e,t=0;t<arguments.length;t++){var n=arguments[t];n&&n.State&&n.Instrumentation&&(e=n)}var r=e.Instrumentation;r.time("hx.container.online.feature-only-loading")},performanceObserver:r,instrumentationEventHandler:c}}},function(e,t,n){"use strict";function r(e){e.getEntries().forEach((function(e){try{if(Helix&&Helix.Container._state){var t,n=Helix.Container;console.log("PerformanceEntry: ",e);for(var r=n._state.activeAppInstances._array,i=r.length-1;i>=0;i--)if(r[i].viewPort.id.indexOf("global")<0){t=r[i].appId;break}}}catch(e){}if("mark"===e.entryType)try{Helix.Instrumentation&&Helix.Instrumentation.timeEnd(e.name,{content:{appId:t}},!1)}catch(e){console.log("Error in sending performance to Elastic: ",e)}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.attachPerformanceObserver=void 0,t.attachPerformanceObserver=function(){var e,t=window.top;function n(e){window.console.time(e),Helix.Instrumentation.timePreloaded(new Date,e)}if(-1==(e=t.navigator.userAgent.toLowerCase()).indexOf("safari")||-1!=e.indexOf("chrome"))try{new t.PerformanceObserver(r).observe({entryTypes:["mark"]}),window.__InstrumentationTimeEntry&&Helix.Container&&!Helix.Container.getCurrentApp()&&(n("asb.feature.mark.constructor"),n("asb.feature.mark.apidata.completed"),n("asb.feature.mark.fmp"),n("asb.feature.mark.loaded"))}catch(e){console.log("Could not load performance observer: ",e)}}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.FeatureHistory=void 0;var i=function(){function e(e,t,n,r,i,o,a){var s=this;this.Uri=e,this.ContainerConfigMgr=t,this.HttpUtils=n,this.navigateToNotificationHandler=r,this.defaultGotoJunction=i,this.Log=o,this.regionManager=a,this.featureHistory=[],this.lastPushDate=0,this.lastLoadedFeatureId="",this._log=o.register("hx.asb.client.FeatureHistory"),this.onBackButtonClick=this.onBackButtonClick.bind(this),window.onpopstate=function(e){s._log("window.onpopstate.info",e);var t=Date.now()-s.lastPushDate,n=e.state,r=!1;t<1e3&&(s._log("feature-history skipping onpopstate event: fired too soon after last push state"),r=!0),n&&n.featureId===s.lastLoadedFeatureId&&location.href===s.lastUrl&&(s._log("feature-history skipping onpopstate event: same feature as last loaded"),r=!0),s.lastUrl=location.href,r||(s.featureHistory.pop(),s.onBackButtonClick(n))}}return e.prototype.onBackButtonClick=function(e){if(this._log("registerHelixCallback.featurehistory.info","eBack button handler fired with state:",e),e){var t=e.launchData&&e.launchData.params?e.launchData.params:{};e.ctx&&(t=Object.assign(t,e.ctx)),this.regionManager.loadAppByExposedInterfaceId(e.featureId,null,t,!1,"")}else window.history.back()},e.prototype.push=function(e){if(e){var t=this.generateStateInfo(e);this.isSameFeature(e)?0===this.featureHistory.length&&!this.lastLoadedFeatureId&&e.featureId&&(this.lastPushDate=Date.now(),this.lastLoadedFeatureId=e.featureId,this.featureHistory.push(e)):(e.stateId=t.stateId,window.history.pushState(e,e.featureName,t.params),this.lastPushDate=Date.now(),this.lastLoadedFeatureId=e.featureId,this.featureHistory.push(e))}},e.prototype.generateStateInfo=function(e){var t,n="";if(e.layoutName){var r=window.location.search,i=this.HttpUtils.getQsParamsFrom(e.launchData.params);i.length>0&&(i=0===r.length?"?"+i:"&"+i),n=e.featureName+"_"+e.layoutName+r+i,t=e.layoutName+r+i}else n=e.featureName;return{stateId:n,params:t}},e.prototype.pushCtx=function(e){var t=new this.Uri;Object.keys(e).map((function(n){var r=e[n];t.addQsParameter(n,r)}));var n=this.featureHistory[this.featureHistory.length-1],r={appName:n.appName,stateId:n.stateId,featureId:n.featureId,featureName:n.featureName,launchData:n.launchData,layoutName:n.layoutName,ctx:e};this.featureHistory.push(r),window.history.pushState(r,r.featureName,t.toString())},e.prototype.isSameFeature=function(e){var t=this.generateStateInfo(e),n=window.history.state;return!(!n||!n.stateId)&&n.stateId===t.stateId},e.prototype.setLastLoadedFeatureId=function(e){e&&e.actionParams&&!0===e.actionParams.isGlobal||(this.lastLoadedFeatureId=e.destination.uid)},e.prototype.back=function(e){void 0===e&&(e=!0),this.goBackToPreviousFeature()||this.goBackToGotoUrl()||this.goBackToReferrerJunction()||this.goBackToLastFncUrl()||this.goBackToDefaultUrl()},e.prototype.goBackToPreviousFeature=function(){return this.featureHistory.length>1&&(this._log("goBackToPreviousFeature.info"),window.history.back(),!0)},e.prototype.goBackToLastFncUrl=function(){if(document.referrer){var e=new this.Uri(document.referrer).pathName.split("/")[1];if(/fnc/.test(e))return this._log("goBackToLastFncUrl.info",""+e),window.location.assign(document.referrer),!0}return!1},e.prototype.goBackToGotoUrl=function(){return this.goBackUsingQueryString("gotourl")},e.prototype.goBackToReferrerJunction=function(){return this.goBackUsingQueryString("referrer")},e.prototype.queryStringValueIsValid=function(e){var t=this,n=!1,r=e.replace(/\\/g,"/").toLowerCase();return["/*","mojo*","asbmobile*","*mobilebanking*"].forEach((function(e){return n=n||t.HttpUtils.patternMatchesUrl(e,r)})),n},e.prototype.goBackUsingQueryString=function(e){var t=new this.Uri,n=r(r({},this.ContainerConfigMgr.getTokenisedDataFor(this._log)),t.search),i=n[e]||this.HttpUtils.tryToGetParamLowerCase(n,e);if(i&&this.queryStringValueIsValid(i)){this._log("goBackUsingQueryString.info",""+e);var o=i;return-1!==i.indexOf("://")||i.startsWith("/")||(o="/"+i),window.location.assign(o),!0}return!1},e.prototype.goBackToDefaultUrl=function(){this.navigateToNotificationHandler.navigateTo({url:"/"+this.defaultGotoJunction+"/"})},e.prototype.setReferrer=function(e,t,n){var i=this.ContainerConfigMgr.getTokenisedDataFor(t),o=r(r({},i),n);if(this.featureHistory.length){var a=this.featureHistory[this.featureHistory.length-1];e.customLaunchData.params.referrer=a.featureName,e.customLaunchData.params.referrerName=a.appName}else e.customLaunchData.params.referrer=o.referrer},e}();t.FeatureHistory=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NavigateToNotificationHandler=void 0;var r=function(){function e(e,t,n){this.Uri=t,this.HttpUtils=n,this._log=e.register("hx.asb.online.notificationhandler.navigateTo")}return e.prototype.registerNotificationHandler=function(e){e["navigate.to"]=this.handleNavigateToNotification.bind(this)},e.prototype.handleNavigateToNotification=function(e){this._log("notification.info"),this.navigateTo(e)},e.prototype.navigateTo=function(e){if(e&&e.url){var t=e.url;t=this.alignWithFncJunction(t),!0===e.redirect?window.location.replace(t):window.location.assign(t)}},e.prototype.alignWithFncJunction=function(e){var t=window.location.href,n=function(t){e=e.replace("/fnc/",t)};return this.HttpUtils.isFST()&&(t.indexOf("fnc102")>0?n("/fnc102/"):n("/fnc104/")),this.HttpUtils.isQA()&&(t.indexOf("fnc2")>0?n("/fnc2/"):t.indexOf("fnc3")>0?n("/fnc3/"):n("/fnc1/")),e},e}();t.NavigateToNotificationHandler=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NavigateBackNotificationHandler=void 0;var r=function(){function e(e,t){this.FeatureHistory=e,this._log=t.register("hx.asb.online.notificationhandler.NavigateBack")}return e.prototype.registerNotificationHandler=function(e){e["navigate.back"]=this.handleNavigateBackNotification.bind(this)},e.prototype.handleNavigateBackNotification=function(){this._log("notification.info"),this.FeatureHistory.back()},e}();t.NavigateBackNotificationHandler=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PushHistoryNotificationHandler=void 0;var r=function(){function e(e,t){this.FeatureHistory=e,this._log=t.register("hx.asb.online.notificationhandler.pushHistory")}return e.prototype.registerNotificationHandler=function(e){e["navigate.pushHistory"]=this.handlePushHistoryNotification.bind(this)},e.prototype.handlePushHistoryNotification=function(e){this._log("notification.info");var t={};Object.keys(e).map((function(n){var r=e[n];/^[a-zA-Z]/.test(n)&&(t[n]=r)})),this.FeatureHistory.pushCtx(t)},e}();t.PushHistoryNotificationHandler=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegionManager=void 0;var r=n(455),i=function(){function e(e){this.layoutLoader=new r.LayoutLoader(e)}return e.prototype.compose=function(e,t){this.layoutLoader.compose(e,t.components.asbContainerConfigMgr),this.options=t,this._log=e.register("hx.asb.client.RegionManager"),this._Instrumentation=t.components.Instrumentation,this.FeatureHistory=t.components.asbFeatureHistory},Object.defineProperty(e.prototype,"regions",{get:function(){return Helix.Container.getContainerAppBindings().exposes.regions},enumerable:!1,configurable:!0}),e.prototype.back=function(){this.FeatureHistory.back()},e.prototype.loadFeature=function(){this._Instrumentation.time("hx.container.online.container-feature-loading");var e=this.getLayout();e&&e.layout&&this.load(e.layout,!1,"")},e.prototype.launchFeature=function(e){this._log("launch.request.info",e),this._Instrumentation.time("hx.container.online.feature-only-loading"),"modal"===e.launchMode?this.loadAppByExposedInterfaceId(e.destinationInterface.uid,e.parentAppInstance,e.appParams,!1,e.launchMode):this.loadAppByExposedInterfaceId(e.destinationInterface.uid,null,e.appParams,!1,e.launchMode),window.scrollTo(0,0),e.handled=!0},e.prototype.load=function(e,t,n){var r=this,i=this.getRegionsForLayoutPage(e.toLowerCase());Array.isArray(i)&&i.forEach((function(e){r.loadAppByExposedInterfaceId(e.uid[0],null,{},t,n)}))},e.prototype.loadAppByExposedInterfaceId=function(e,t,n,r,i){void 0===n&&(n={});var o=Helix.Container.getExposedInterfaceByUid(e);return this.loadAppByBinding(o,t,n,r,i),o},e.prototype.pushHistoryFor=function(e,t){var n=this.getRegionForExposedInterface(e.uid),r=this.getLayout();n&&r&&this.FeatureHistory.push({appName:e.app.appName,featureId:e.uid,featureName:e.app.appId,launchData:t,layoutName:"/"+r.junction+"/"+n.layoutPage+r.max})},e.prototype.loadAppByBinding=function(e,t,n,r,i){if(void 0===n&&(n={}),e){var o=this.layoutLoader.getLaunchDataFor(e,n);this.FeatureHistory.setReferrer(o,e,this.layoutLoader.locationSearch),"modal"===i||r||this.pushHistoryFor(e,o.customLaunchData),this.layoutLoader.loadApp(o,e,t,n,r,i)}return e},e.prototype.getUIBindingForFeature=function(e){return Helix.Container.getExposedInterfaceByUid(e+"_ContainerLaunch")||Helix.Container.getExposedInterfaceByUid(e+"_FeatureLaunch")},e.prototype.containerLaunch=function(e){this._log("container.launch.request.info",e),this.loadAppByExposedInterfaceId(e,null,{},!1,"")},e.prototype.containerLaunchLayout=function(e){this._log("container.launch.request.info",e),this.load(e,!1,"")},e.prototype.getRegionsForLayoutPage=function(e){return e=e||this.getLayout().layout,this.regions.filter((function(t){return t.layoutPage.toLowerCase()===decodeURIComponent(e).toLowerCase()}))},e.prototype.getRegionForExposedInterface=function(e){return this.regions.filter((function(t){return t.uid[0].toLowerCase()===e.toLowerCase()}))[0]},e.prototype.lookupLayoutRegionFor=function(e){if(e){var t=e.uid;return this.getRegionForExposedInterface(t)}return null},e.prototype.getLayout=function(e){var t=e||window.location.pathname,n=t.split("/"),r="",i="",o="",a="";n&&(n.length>1&&(r=n[1]),n.length>2&&(i=n[2]),n.length>3&&(o=n[3]),n.length>4&&(a=n[4]));var s="",c=i;return o&&(c+="/"+o),/\/max$/.test(t)&&(s="/max"),{pathname:t,junction:r,namespace:i,feature:o,view:a,layout:c,max:s}},e}();t.RegionManager=i},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutLoader=void 0,function(e){e.Lightbox="lightbox",e.Takeover="takeover"}(r||(r={}));var i=function(){function e(e,t){this.Uri=e,this.ContainerConfigMgr=t,this.location=new this.Uri}return Object.defineProperty(e.prototype,"locationSearch",{get:function(){return this.location.search},enumerable:!1,configurable:!0}),e.prototype.compose=function(e,t){this._log=e.register("hx.asb.client.LayoutLoader"),this.ContainerConfigMgr=t},e.prototype.loadApp=function(e,t,n,i,o,a){if(void 0===i&&(i={}),t)try{e.customLaunchData.containerUrl=(new this.Uri).pathName;var s=function(e){this._log("_navigate.Error",e)}.bind(this);if(Helix.Container._state.activeAppInstances.filter((function(e){if(!o)return e.appId===t.app.appId&&e.version===t.app.version?(e.window.style.display="block",!0):("modal"!==a&&(e.window.style.display="none"),!1)})).length>0)return;Helix.Container.navigate({publisherId:t.app.publisherId,appId:t.app.appId,appVersion:t.app.version,interfaceId:t.interfaceId,interfaceVersion:t.interfaceVersion,actionParams:{isGlobal:o},params:e,appLaunchMode:a,openerAppInstance:n,openerAppInstanceId:n&&n.appInstanceId},(function(){if(a===Helix.Constants.LAUNCH_MODE.MODAL){switch(i.showModalType){case r.Lightbox:document.body.classList.add("lightbox");break;default:document.body.classList.add("takeover")}document.body.classList.add("modal"),document.body.classList.add("loading")}}),s)}catch(e){this._log("loadApp.error","Error loading Feature",e)}},e.prototype.getLaunchDataFor=function(e,t){void 0===t&&(t={}),this.location=new this.Uri;var n=this.location.search,r=this.ContainerConfigMgr.getTokenisedDataFor(e);return Object.assign(n,r),{customLaunchData:{containerUrl:this.location.pathName,urlVars:n,userDetails:this.ContainerConfigMgr.getUserDetails(),settings:this.ContainerConfigMgr.getFeatureSettingsFor(e),featureSettings:this.ContainerConfigMgr.getFeatureSettings(e),params:t}}},e}();t.LayoutLoader=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AppCloseEventModule=void 0,t.AppCloseEventModule=function(e,t,n){return function(r){r.returnValue&&"back"===r.returnValue.navigate&&(r.actionParams.isBack=!0),r.returnValue&&r.returnValue.returnTo&&n.activeAppInstances.map((function(n){n.appId===r.returnValue.returnTo&&e.publish(t.TOPIC.FROM_CONTAINER.NOTIFICATION,n.appInstanceId,{id:r.appInstance.appId,sourceId:r.appInstance.appId,message:JSON.stringify(r.returnValue)})}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AppClosedEventModule=void 0,t.AppClosedEventModule=function(e){return function(t){var n,r;if(document.body.classList.remove("modal"),document.body.classList.remove("takeover"),document.body.classList.remove("lightbox"),t.actionParams.isBack&&(t.returnValue=t.returnValue||{},t.returnValue.navigate="back"),t.returnValue&&"back"===t.returnValue.navigate){e.back(!1,t)}var i=(null===(r=null===(n=t.appInstance)||void 0===n?void 0:n.launchDetails)||void 0===r?void 0:r.launchMode)||"";"modal"!==i&&"hideCurrent"!==i||Helix.Container._state.activeAppInstances.map((function(e){var t;"hx_viewport_asb_global"!==((null===(t=e.viewPort)||void 0===t?void 0:t.id)||"")&&(e.window.style.display="block")}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AppReadyEventHandler=void 0,t.AppReadyEventHandler=function(){document.body.classList.remove("loading")}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(97),s=function(){function e(e,t,n,r,i,o,a,s,c,u,p,l,d){this.State=t,this.Messaging=n,this.Ajax=r,this.tokenManager=i,this.ContainerConfigMgr=a,this.ConstantsFromApp=s,this.ConstantsFromContainer=c,this.ConstantsAJAX=u,this.ConstantsTokenType=p,this.PerformanceLog=l,this.containerId=d,this._log=e.register("hx.asb.container.domainapi")}return e.prototype.setPreDataManager=function(e){this.preDataManager=e},e.prototype.makeApiCall=function(e,t){var n=e.apiEndpoint,r=e.apiSubUrl;Helix.Container.getContainerAppBindings().userDetail&&(r=r.replace(/\/cif\//,"/"+Helix.Container.getContainerAppBindings().userDetail.tokenisedCif+"/").replace(/\/cif$/,"/"+Helix.Container.getContainerAppBindings().userDetail.tokenisedCif+"/")),e.apiSubUrl=r;var i=this.ContainerConfigMgr.getBaseUrl(n),o={processorFlags:a.ProcessorFlagType.isDomainApiCall|a.ProcessorFlagType.usesConsumerToken,featureId:t.featureId,macing:new a.MACSettings(i,e)};return this.callApi(e,t,o,i)},e.prototype.messageHandlerOnCallDomainApi=function(e,t){return i(this,void 0,void 0,(function(){var e,n,r;return o(this,(function(i){switch(i.label){case 0:e=t.payload.apiEndpoint,t.payload.apiSubUrl,Helix.Instrumentation.time("hx.framework.domainapi."+e),n=null,i.label=1;case 1:return i.trys.push([1,6,7,8]),this.preDataManager?[4,this.preDataManager.getHelixResponse(t)]:[3,3];case 2:n=i.sent(),i.label=3;case 3:return n?[3,5]:[4,this.makeApiCall(t.payload,t.appInstance)];case 4:n=i.sent(),i.label=5;case 5:return n?(this.Messaging.publish(this.ConstantsFromContainer.CALL_API_SUCCESS_RESPONSE,t.appInstance.appInstanceId,{responseCode:n.status?n.status.toString():"unknown",responseBody:n.data,headers:n.headers,contentType:n.headers[this.ConstantsAJAX.CONTENT_TYPE]||"unknown",correlationId:n.headers[this.ConstantsAJAX.CORRELATION_ID],requestId:t.payload.requestId}),[3,8]):[2];case 6:return r=i.sent(),this.Messaging.publish(this.ConstantsFromContainer.CALL_API_FAILED_RESPONSE,t.appInstance.appInstanceId,{errorType:r.error||"unknown",responseCode:r.status?r.status.toString():r.error===this.ConstantsAJAX.ERROR.TIMEOUT?"408":"unknown",responseBody:r.responseText,errorDetail:r.data||r.responseText,headers:r.headers,contentType:r.headers?r.headers[this.ConstantsAJAX.CONTENT_TYPE]:"unknown",correlationId:r.headers?r.headers[this.ConstantsAJAX.CORRELATION_ID]:"unknown",requestId:t.payload?t.payload.requestId:"unknown"}),[3,8];case 7:return this.PerformanceLog.timeEnd("hx.framework.domainapi."+e,{containerId:this.containerId,content:{subUrl:t.payload.apiSubUrl,appId:t.appInstance.appId}}),Helix.Instrumentation.timeEnd("hx.container.online.first-domainapi-landingtime",{containerId:Helix.Container.getContainerId(),content:{subUrl:t.appInstance.apiSubUrl,appId:t.appInstance.appId},apiEndpoint:e},!1),[7];case 8:return[2]}}))}))},e.prototype.callApi=function(e,t,n,a){return i(this,void 0,void 0,(function(){var i,s,c;return o(this,(function(o){switch(o.label){case 0:return a=a||this.ContainerConfigMgr.getBaseUrl(e.apiEndpoint),[4,this.tokenManager.ensureCurrent()];case 1:return o.sent(),i=this.tokenManager.get(this.ConstantsTokenType.FEATURE_TOKEN),null===(s=i.getFeatureTokenDetail(t.publisherId,t.appId,t.version))?(this._log("callApi.exception",{appId:t.appId}),[2,null]):(c={type:e.verb.toUpperCase(),headers:e.headers,meta:r({},n,{jwtfeatureid:s})},[4,this.Ajax.send(c.type,a+e.apiSubUrl,e.requestBody,c)]);case 2:return[2,o.sent()]}}))}))},e}();t.AsbDomainApiModule=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(461),i=function(){function e(e,t,n,r,i){void 0===e&&(e=0),this.flags=e,this.Base64Utils=t,this.HttpUtils=n,this.Uri=r,this.RandomUtils=i}return e.prototype.generateMac=function(e,t,n){this.macingParameters=this.getMacingParameterFrom(n);var r=t.verb,i=t.apiSubUrl,o=this.getResourcePathFrom(e,i),a=this.getQueryStringFrom(i),s="";if("object"==typeof t.requestBody)try{s=JSON.stringify(t.requestBody).replace(/^\{\}$/,"")}catch(e){s=""}var c=this.macingParameters.timestamp+":"+this.macingParameters.nonce+":"+this.macingParameters.jti+":"+r+":"+o+":"+a+":"+s,u=CryptoJS.HmacSHA256(c,this.macingParameters.macSecret).toString().toUpperCase();return{macHeader:"v2:"+this.macingParameters.timestamp+":"+this.macingParameters.nonce+":"+u}},e.prototype.decodeJwt=function(e,t){return void 0===t&&(t=!0),JSON.parse(this.Base64Utils.base64DecodeUrl(e.split(".")[t?1:0]))},e.prototype.getResourcePathFrom=function(e,t){var n=e.split("/").filter((function(e){return e.length>0})).pop(),r=t.split("?")[0];return this.HttpUtils.fixedEncodeURIComponent(n+"/"+r)},e.prototype.getQueryStringFrom=function(e){var t=new this.Uri(e,!0),n="";return t.hasSearch&&(n=t.toString().split("?")[1]),n},e.prototype.unpackTokenString=function(e){void 0===e&&(e="");var t=e.split(":");return t.length<4?null:{version:t[0],timestamp:t[1],nonce:t[2],macToken:t[3]}},e.prototype.getMacingParameterFrom=function(e){var t=this.decodeJwt(e.jwt).jti||"";return{timestamp:Date.now(),nonce:this.RandomUtils.psuedoRandomString24(),macSecret:e.jwtMacSecret,jti:t}},e.prototype.validateApiResponse=function(e){if(this.HttpUtils.isDev())return{isValid:!0,reason:"hashes match"};if(!e)return{isValid:!0,reason:"No response"};var t=e.responseText||e.headers.responseText||"",n=e.headers?e.headers["asb-token"]:null,i=this.unpackTokenString(n);if(!i)return{isValid:!1,reason:"Empty ASB Token"};if("v2"!==i.version)return{isValid:!1,reason:"Token version not V2"};var o=i.timestamp+":"+i.nonce+":"+this.macingParameters.jti+":"+e.responseCode+":"+t,a=CryptoJS.HmacSHA256(o,this.macingParameters.macSecret).toString().toUpperCase();if(a===i.macToken)return{isValid:!0,reason:"hashes match"};var s="\n\t****Mac hashes do not match****\n\tResponseMac="+a+"\n\texpectedMac="+i.macToken+"\n\tResponseString="+o+"\n\tmacingParameters="+JSON.stringify(this.macingParameters)+"\n\t\t\t";return{isValid:!((r.ContainerFlags.ResponseMacExceptionsAreErrors&this.flags)===r.ContainerFlags.ResponseMacExceptionsAreErrors),reason:s}},e}();t.AsbMacService=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.ResponseMacExceptionsAreErrors=1]="ResponseMacExceptionsAreErrors"}(t.ContainerFlags||(t.ContainerFlags={}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(463),a=n(465),s=n(97),c=function(){function e(e,t,n,r,i,o){this.state=t,this.ajax=n,this.encryptionParams=r,this.constants=i,this.preloadManager=o,this.tokenManagers={}}return e.prototype.isCurrent=function(){var e=this;return 0!==Object.keys(this.tokenManagers).length&&((1!==Object.keys(this.tokenManagers).length||Object.keys(this.tokenManagers)[0]!==Helix.Container.TOKEN_TYPE.IDENTITY_TOKEN)&&Object.keys(this.tokenManagers).every((function(t){return e.tokenManagers[t].isCurrent()})))},e.prototype.set=function(e,t){this.tokenManagers[e]=t},e.prototype.get=function(e){return this.tokenManagers[e]},e.prototype.update=function(e){var t=new o.AsbConsumerTokenManager(Helix.Container.TOKEN_TYPE.CONSUMER_TOKEN,e.consumerToken,this.encryptionParams);this.set(Helix.Container.TOKEN_TYPE.CONSUMER_TOKEN,t);var n=new a.ASBFeatureTokensManager(e.features);this.set(Helix.Container.TOKEN_TYPE.FEATURE_TOKEN,n)},e.prototype.ensureCurrent=function(){return r(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return this.isCurrent()?[2]:[4,this.refresh()];case 1:return[2,e.sent()]}}))}))},e.prototype.refresh=function(){return r(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return e=null,this.preloadManager.hasPreloadedTokens?[4,this.preloadManager.retrieveTokens()]:[3,2];case 1:return e=t.sent(),[3,4];case 2:return[4,this.requestTokens()];case 3:e=t.sent(),t.label=4;case 4:return this.update(e.data),[2]}}))}))},e.prototype.requestTokens=function(){return r(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this.ajax.get(this.state.ajaxUrl+this.constants.ROUTES.TOKENS,null,{meta:{processorFlags:s.ProcessorFlagType.isConsumerTokenRequest},headers:{"cache-control":"no-cache, no-store, must-revalidate, post-check=0, pre-check=0",expires:"0",pragma:"no-cache"}})];case 1:return[2,e.sent()]}}))}))},e.prototype.getAppAuthToken=function(e,t,n,o){return r(this,void 0,void 0,(function(){var r,a,s;return i(this,(function(i){switch(i.label){case 0:e.appInstance||o(t,n),i.label=1;case 1:return i.trys.push([1,6,,7]),e.refresh?[4,this.refresh()]:[3,3];case 2:return i.sent(),[3,5];case 3:return[4,this.ensureCurrent()];case 4:i.sent(),i.label=5;case 5:return r=this.get(Helix.Container.TOKEN_TYPE.FEATURE_TOKEN),(a=r.getFeatureToken(e.appInstance.publisherId,e.appInstance.appId,e.appInstance.version))?[2,t(a)]:[2,n(null)];case 6:return s=i.sent(),[2,n(s)];case 7:return[2]}}))}))},e}();t.AsbTokenManager=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(464),i=function(){function e(e,t,n){this.source=e,this.jwt=t.token,this.token=t.token,this.duration=t.duration,this.expectedTokenExpiry=t.tokenExpiry,this.macSecret=r.Crypto.Symmetric.setPrivate(n.key,n.iv).doDecrypt(t.macSecret),this.jwtMacSecret=this.macSecret,this.expiry=Date.now()+this._getTokenRefreshLifespan(1e3*this.duration)}return e.prototype._getTokenRefreshLifespan=function(e){return e-.25*e},e.prototype.isCurrent=function(){return Date.now()<this.expiry},e}();t.AsbConsumerTokenManager=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){!function(e){var t=function(){function e(e){this.rsa=new RSA,this.rsa.setPublicKey(e)}return e.prototype.doEncrypt=function(e){return this.rsa.encrypt(e)},e.prototype.doDecrypt=function(e){return this.rsa.decrypt(e)},e}(),n=function(){function e(e,t){this.privateKey=e,this.iv=t}return e.prototype.doEncrypt=function(e){throw new Error("not implemented")},e.prototype.doDecrypt=function(e){var t={ciphertext:CryptoJS.enc.Base64.parse(e)},n={iv:CryptoJS.enc.Utf8.parse(this.iv)},r=CryptoJS.enc.Utf8.parse(this.privateKey);return CryptoJS.AES.decrypt(t,r,n).toString(CryptoJS.enc.Utf8)},e}();e.setPublic=function(e){return new t(e)},e.setPrivate=function(e,t){return new n(e,t)}}(e.Symmetric||(e.Symmetric={}))}(t.Crypto||(t.Crypto={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.featureTokens=e}return e.prototype.getFeatureTokens=function(){return this.featureTokens},e.prototype.getFeatureTokenDetail=function(e,t,n){var r=e+"."+t+","+n,i=this.featureTokens.find((function(e){return e.appId===r}));return i?i.detail:null},e.prototype.getFeatureToken=function(e,t,n){var r=e+"."+t+","+n,i=this.featureTokens.find((function(e){return e.appId===r}));return i&&i.token&&new Date(i.token.tokenExpiry).getTime()>Date.now()-5e3?i.token:null},e.prototype.isCurrent=function(){return!0},e}();t.ASBFeatureTokensManager=r},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t,n,r,i,o,a,s,c,u,p){this.asbSettings=e,this.state=t,this.xhrAdapter=n,this.clientCallbacks=r,this.appManagement=i,this.containerConstants=o,this.asbTokenManager=a,this.securityOptions=s,this.instrumentation=c,this.constants=u,this.preloadManager=p}return e.prototype.callbackAsyncOnAjaxRequest=function(e,t,n,o){return r(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return e.request.url.endsWith(this.securityOptions.getAuthTokens)?[4,this.onConfigurationRequestOverride(e,t)]:[3,2];case 1:return n.sent(),[3,3];case 2:o(),n.label=3;case 3:return[2]}}))}))},e.prototype.onConfigurationRequestOverride=function(e,t){return r(this,void 0,void 0,(function(){var n,r;return i(this,(function(i){switch(i.label){case 0:return e.request.url=this.state.ajaxUrl+this.constants.ROUTES.CONFIGURATION,e.request.type="Get",delete e.request.data,n=null,this.preloadManager.hasPreloadedConfiguration?[4,this.preloadManager.retrieveConfiguration()]:[3,2];case 1:return n=i.sent(),[3,4];case 2:return[4,this.xhrAdapter.send(e.request)];case 3:n=i.sent(),i.label=4;case 4:return[4,this.asbTokenManager.ensureCurrent()];case 5:return i.sent(),r=this.updateConfigurationResult(n.data),this.asbSettings.populateContainerSettings(r.bindings[r.containerOffset].settings),t(r),[2]}}))}))},e.prototype.updateConfigurationResult=function(e){var t=["SalesApi","SalesApiPublic","Enterprise.Audit","FNBApi","JoinApi","JoinApiPublic","KiwisaverExplorer.CustomerService","KiwisaverExplorer.Emails","KiwisaverExplorer.OnyxNotes","LinksV1","Mojo.DevAppService","SignalR.ContainerService","Test.Rates","ASB.API.HomeLoanApplyExp"];e.containerBinding.invokes=e.containerBinding.invokes||{},e.containerBinding.invokes.data=e.containerBinding.exposes.data,e.containerBinding.exposes.data=null;for(var n=0,r=e.containerBinding.invokes.data;n<r.length;n++){var i=r[n];i.id=i.uid,i.resolvesTo=i.resolvedTo}for(var o=this.appManagement.getAppDataServiceEndpoints(e.containerBinding),a=this.asbTokenManager.get(Helix.Container.TOKEN_TYPE.FEATURE_TOKEN),s=0,c=e.featureBindings;s<c.length;s++){var u=c[s];u.appName=u.appId,u.appId=u.featureId,u.consumes=u.consumes||[],u.consumes.context=u.consumes.context||[],u.invokes.data=u.invokes.data||[];for(var p=function(e){if(-1===t.indexOf(e.id))return"continue";if(u.exposes.ui.count>1)throw new Error("Too many UIs"+u.publisherId+"."+u.appId+", "+u.version);for(var n=0,r=u.exposes.ui;n<r.length;n++){r[n].tokenTransport="launch_data"}var i=o.find((function(t){return t.id==e.id}));e.resolvesTo=i?i.resolvesTo:"",u.invokes.data.push(e)},l=0,d=u.invokes.container;l<d.length;l++){p(d[l])}}return e.featureBindings.push(e.containerBinding),{appTokens:a.getFeatureTokens(),diff:e.diff,containerOffset:e.featureBindings.length-1,bindings:e.featureBindings,mappings:[]}},e}();t.AsbAjaxRequestsOverride=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){this.publicKey=e,this.key=t.psuedoRandomString16(),this.iv=t.psuedoRandomString16();var n=new RSA;n.setPublicKey(e),this.encrypted=n.encrypt(this.key+":"+this.iv)};t.AsbEncryptionParams=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){var t=this;this.preloadedConfiguration=i(e&&e.configurationRequest),this.preloadedTokens=i(e&&e.tokensRequest),this.preloadedConfiguration&&this.preloadedConfiguration.then((function(){return t.profileRequest("hx.framework.dpservice.configure","v4/configuration")})),this.preloadedTokens&&this.preloadedTokens.then((function(){return t.profileRequest("hx.framework.dpservice.tokens","v4/tokens")}))}return e.prototype.profileRequest=function(e,t){for(var n=window.performance.timeOrigin,r=0,i=window.performance.getEntries();r<i.length;r++){var o=i[r];if(o.name.indexOf(t)>0){var a=new Date(n+o.requestStart),s=new Date(n+o.responseEnd),c={containerId:Helix.Container.getContainerId()};Helix.Instrumentation.sendPerformance(s,a,e,c)}}},Object.defineProperty(e.prototype,"hasPreloadedConfiguration",{get:function(){return!!this.preloadedConfiguration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPreloadedTokens",{get:function(){return!!this.preloadedTokens},enumerable:!0,configurable:!0}),e.prototype.retrieveConfiguration=function(){var e=this.preloadedConfiguration;return this.preloadedConfiguration=null,e},e.prototype.retrieveTokens=function(){var e=this.preloadedTokens;return this.preloadedTokens=null,e},e}();function i(e){return e?new Promise((function(t,n){var r=function(){4===e.readyState&&(e.status>=200&&e.status<300?t({data:JSON.parse(e.responseText)}):n(e))};e.onreadystatechange=r,r()})):null}t.AsbPreloadManager=r,t.wrapRequestAsPromise=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,n,r){this.AsbDomainApiModule=e,this.ContainerConfigMgr=t,this.endpoints={},this.callbackOnAppLaunch.bind(this)}return e.prototype.getHelixResponse=function(e){var t=e.appInstance,n=e.payload;if(!this.endpoints[t.appInstanceId])return null;var r=this.getApiEndpointIdentifier(n),i=this.endpoints[t.appInstanceId][r];return i?delete this.endpoints[t.appInstanceId][r]:delete this.endpoints[t.appInstanceId],i},e.prototype.callbackOnAppLaunch=function(e){var t=e.appInstance,n=this.ContainerConfigMgr.getPreloadedDomainAPICalls(t);if(n.length){this.endpoints[t.appInstanceId]||(this.endpoints[t.appInstanceId]={});for(var r=0,i=n;r<i.length;r++){var o=i[r],a={verb:"GET",apiEndpoint:o.apiEndpoint,apiSubUrl:o.apiSubUrl,requestBody:{},headers:{},requestId:t.appInstanceId+"_0"},s=this.getApiEndpointIdentifier(o);this.endpoints[t.appInstanceId][s]=this.AsbDomainApiModule.makeApiCall(a,t)}}},e.prototype.getApiEndpointIdentifier=function(e){return(e.apiEndpoint+"|"+e.apiSubUrl).toLowerCase()},e}();t.AsbPreDataManager=r},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(471)),r(n(472)),r(n(473)),r(n(474)),r(n(475)),r(n(476)),r(n(477)),r(n(478)),r(n(479)),r(n(480)),r(n(481)),r(n(482)),r(n(483)),r(n(484)),r(n(485)),r(n(486))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsbContainerConstants={TokenManager:{},TOKEN_TYPE:{CONSUMER_TOKEN:"consumerToken",FEATURE_TOKEN:"featureToken",IDENTITY_TOKEN:"InternalIdentityProvider"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsbContainerClientEvents={ON_ASB_SHOW_DIALOG:function(e,t,n,r){},ON_PREPARE_LAUNCH_PARAMETERS:function(e,t,n,r){t({hxai:e.appInstance.appInstanceId})},ON_ASB_API_CALL:function(e,t,n,r){},ON_ASB_GET_LAST_ACTIVITY_TIME:function(e){},ON_ASB_TIMEOUT:function(e){},ON_ASB_TIMEOUT_INIT:function(e){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsbCommonConstants={ROUTES:{INSTRUMENT:"v1/instrumentation",CONFIGURATION:"v4/configuration",TOKENS:"v4/tokens",CONTAINER_SETTINGS:"v1/containersettings",PILOT:"v1/pilots"},PROCESSORS:{ASB_GET_URL:"getUrl",ASB_CONFIGURATION:"configuration",ASB_MAC_DEBUG:"macDebug",ASB_MAC_SERVICE:"macService",ASB_CSRF:"csrf",ASB_AJAX_API:"asbAjaxAPI",ASB_AJAX_MAC_HEADER:"asbAjaxMacHeader",ASB_CORRELATION:"asbCorrelation",ASB_ROUTING:"asbRouting",ASB_INSTRUMENTATION:"asbInstrumentation"},TOPIC:{FROM_CONTAINER:{ALL_POSTAL_JS:"helix.container.#",SHOW_DIALOG_RESPONSE:"helix.container.dialog.show.response",SHOW_DIALOG_CANCEL:"helix.container.dialog.cancel.response",SET_SETTING_SUCCESS_RESPONSE:"helix.container.setting.set.success.response",READ_SETTING_SUCCESS_RESPONSE:"helix.container.setting.read.success.response",SET_SETTING_FAIL_RESPONSE:"helix.container.setting.set.fail.response",GET_ALL_SETTINGS_SUCCESS_RESPONSE:"helix.container.setting.get.all.success.response",SETTING_CHANGED:"helix.container.setting.setting.changed",GET_SCROLL_INFO_RESPONSE:"helix.container.scroll.getscrollinfo.response",HISTORY_PUSH_STATE:"helix.container.history.pushState",HISTORY_REPLACE_STATE:"helix.container.history.replaceState",HISTORY_CHANGE_STATE:"helix.container.history.changeState",CALL_API_SUCCESS_RESPONSE:"helix.container.callApi.success.response",CALL_API_FAILED_RESPONSE:"helix.container.callApi.failed.response",GET_CLAIMS_RESPONSE:"helix.container.get.claims.response",SHOW_CUSTOM_WIDGET_MODAL_RESPONSE:"helix.container.customWidgetModal.show.response",CLOSE_CUSTOM_WIDGET_MODAL_RESPONSE:"helix.container.customWidgetModal.close.response"},FROM_APP:{ALL_POSTAL_JS:"helix.app.#",SHOW_DIALOG:"helix.app.dialog.show",SCROLLTO_SCROLL:"helix.app.scroll.scrollto",SCROLLBY_SCROLL:"helix.app.scroll.scrollby",GET_SCROLL_INFO:"helix.app.scroll.getscrollinfo",SET_SETTING:"helix.app.setting.set",READ_SETTING:"helix.app.setting.read",GET_ALL_SETTINGS:"helix.app.setting.get.all",HISTORY_ADD:"helix.app.history.add",HISTORY_REPLACE:"helix.app.history.replace",CALL_API_REQUEST:"helix.app.callApi.request",GET_CLAIMS:"helix.app.get.claims",SHOW_CUSTOM_WIDGET_MODAL:"helix.app.customWidgetModal.show",CLOSE_CUSTOM_WIDGET_MODAL:"helix.app.customWidgetModal.close"}},SCHEMA:{SETTING_BINDING:"helix.schema.settingBinding",DIALOG_ACTION:"helix.schema.dialogAction",DIALOG_BUTTONS:"helix.schema.dialogButtons",CALL_API_ERROR:"helix.schema.callApi.error",CALL_API_ERROR_DETAIL:"helix.schema.callApi.error.detail"},AJAX:{CSRF_TOKEN:"CsrfToken",AUTHORIZATION_HEADER:"Authorization",ACCEPT:"Accept",CONTENT_TYPE:"Content-Type",API_CONSUMER:"x-api-consumer",ASB_TOKEN:"asb-token",API_FEATURE:"x-api-feature",USERSESSION_CORRELATIONID:"X-UserSession-CorrelationId",XCORRELATION_ID:"X-CorrelationID",PLATFORM_SESSION_ID:"platform-session-id"},TRANSPORT:{NONE:"none",PAGEBUS:"pagebus",NATIVE_IFRAME:"native_iframe",NATIVE_OBJECT:"native_object",NATIVE_POST_MESSAGE:"native_post_message",POSTAL_JS:"POSTALJS",EVENTS:{ON_CONFIGURE_IFRAME:"onConfigureIframe",ON_CONNECT:"onConnect",ON_DISCONNECT:"onDisconnect",ON_ERROR:"onError",ON_MESSAGE_RECEIVED:"onMessageReceived",ON_WARNING:"onWarning"}},NOTIFICATION_ID:{APP_HIDDEN:"ASB_Notification_AppHidden",DIALOG_LINK_CLICKED:"ASB_Notification_DialogLinkClicked"},DIALOG:{PREDEFINED_BUTTONS:{OK:{buttons:[{text:"OK",id:"ok"}],closeButtonId:"ok"},OK_CANCEL:{buttons:[{text:"OK",id:"OK"},{text:"Cancel",id:"cancel"}],closeButtonId:"cancel"},YES_NO:{buttons:[{text:"Yes",id:"yes"},{text:"No",id:"no"}],closeButtonId:"no"},YES_NO_CANCEL:{buttons:[{text:"Yes",id:"yes"},{text:"No",id:"no"},{text:"Cancel",id:"cancel"}],closeButtonId:"cancel"}},LEVEL:{ERROR:"Error",WARNING:"Warning",INFORMATION:"Information",SUCCESS:"Success",QUESTION:"Question",NONE:"None"}},SETTINGS:{SCOPE:{THIS_CONTAINER:"ThisContainer",THIS_CONTAINER_TYPE:"ThisContainerType",THIS_USER:"ThisUser"},MINIMUM_NAME_LENGTH:15},POSTALJS_CHANNELS:{GLOBAL:"GlobalChannel",FEATURE:"FeatureChannel",POSTAL_FEDERATION:"postal.federation"},POSTALJS_TOPICS:{CLIENT_FEDERATED:"client.federated"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CP_1_2_1_Module=function(e,t){var n=e.version("1.2.1");return n.at(t.SCHEMA.UI_BINDING).add("featureName").type("string"),n.at(t.SCHEMA.CONTAINER_SERVICE_BINDING).add("resolvedTo").type("string"),n.at(t.SCHEMA.LAUNCH_DATA_SERVICES).remove("container").remove("ui").add("container").type("array").of(t.SCHEMA.CONTAINER_SERVICE_BINDING).add("ui").type("array").of(t.SCHEMA.UI_BINDING),n.at(t.LAUNCH_DATA.POST).remove("hx_services").add("hx_services").type(t.SCHEMA.LAUNCH_DATA_SERVICES),n.at(t.TOPIC.FROM_CONTAINER.SECURITY_USER_CONTEXT_CHANGED).remove("payload.services").add("payload.services").type(t.SCHEMA.LAUNCH_DATA_SERVICES),n.at(t.TOPIC.FROM_CONTAINER.LAUNCH_DATA_SET).remove("payload.services").add("payload.services").type(t.SCHEMA.LAUNCH_DATA_SERVICES).add("payload.ajaxUrl").type("string"),n.at(t.TOPIC.FROM_APP.SCROLLTO_SCROLL).extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.scrollPosition").type("int"),n.at(t.TOPIC.FROM_APP.SCROLLBY_SCROLL).extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.scrollOffset").type("int"),n.at(t.TOPIC.FROM_APP.GET_SCROLL_INFO).extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.requestId").type("string"),n.at(t.TOPIC.FROM_CONTAINER.GET_SCROLL_INFO_RESPONSE).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("payload.requestId").type("string").add("payload.scrollInfo").type("object"),n.at(t.TOPIC.FROM_APP.SET_SETTING).extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.scope").type("string").add("payload.requestId").type("string").add("payload.isPrivate").type("boolean").add("payload.settingName").type("string").add("payload.settingValue").type("object"),n.at(t.TOPIC.FROM_APP.READ_SETTING).extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.scope").type("string").add("payload.requestId").type("string").add("payload.isPrivate").type("boolean").add("payload.settingName").type("string"),n.at(t.TOPIC.FROM_APP.GET_ALL_SETTINGS).extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.requestId").type("string"),n.at(t.TOPIC.FROM_CONTAINER.SET_SETTING_SUCCESS_RESPONSE).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("payload.requestId").type("string"),n.at(t.TOPIC.FROM_CONTAINER.READ_SETTING_SUCCESS_RESPONSE).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("payload.requestId").type("string").add("payload.setting").type("*"),n.at(t.TOPIC.FROM_CONTAINER.SET_SETTING_FAIL_RESPONSE).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("payload.requestId").type("string").add("payload.developerMessage").type("string"),n.at(t.SCHEMA.SETTING_BINDING).add("isPrivate").type("boolean").add("scope").type("string").add("settingName").type("string").add("settingValue").type("object"),n.at(t.TOPIC.FROM_CONTAINER.GET_ALL_SETTINGS_SUCCESS_RESPONSE).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("payload.requestId").type("string").add("payload.settings").type("array").of(t.SCHEMA.SETTING_BINDING),n.at(t.TOPIC.FROM_CONTAINER.SETTING_CHANGED).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("payload.setting").type("object").add("payload.setting.scope").type("string").add("payload.setting.settingName").type("string").add("payload.setting.settingValue").type("object"),n.at(t.SCHEMA.DIALOG_ACTION).add("id").type("string").add("type").type("string").required(!1).add("text").type("string"),n.at(t.SCHEMA.DIALOG_BUTTONS).add("buttons").type("array").of(t.SCHEMA.DIALOG_ACTION).add("closeButtonId").type("string"),n.at(t.TOPIC.FROM_CONTAINER.SHOW_DIALOG_RESPONSE).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("payload.requestId").type("string").add("payload.actionId").type("string"),n.at(t.TOPIC.FROM_CONTAINER.SHOW_DIALOG_CANCEL).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("payload.requestId").type("string").add("payload.reason").type("string"),n.at(t.TOPIC.FROM_APP.SHOW_DIALOG).extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.requestId").type("string").add("payload.title").type("string").add("payload.message").type("string").add("payload.level").type("string").add("payload.links").type("array").of(t.SCHEMA.DIALOG_ACTION).add("payload.dialogButtons").type(t.SCHEMA.DIALOG_BUTTONS).add("payload.defaultActionId").type("string").add("payload.isModal").type("boolean"),n.at(t.TOPIC.FROM_APP.HISTORY_ADD).extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.state").type("object").add("payload.title").type("string").add("payload.URL").type("string"),n.at(t.TOPIC.FROM_APP.HISTORY_REPLACE).extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.state").type("object").add("payload.title").type("string").add("payload.URL").type("string"),n.at(t.TOPIC.FROM_CONTAINER.HISTORY_PUSH_STATE).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("payload.state").type("object"),n.at(t.TOPIC.FROM_CONTAINER.HISTORY_REPLACE_STATE).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("payload.state").type("object"),n.at(t.TOPIC.FROM_CONTAINER.HISTORY_CHANGE_STATE).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("payload.state").type("object"),n.at(t.LAUNCH_DATA.GET).add("hxai").type("string"),n.at(t.TOPIC.FROM_CONTAINER.SECURITY_REFRESH_APP_TOKEN_RECEIVED).remove("payload.token").add("payload.token").type("object"),n.at(t.SCHEMA.LAUNCH_DATA_SERVICES).add("ui").type("array").of(t.SCHEMA.UI_BINDING).add("data").type("array").of(t.SCHEMA.DATA_BINDING).add("app").type("array").of(t.SCHEMA.APP_BINDING).add("container").type("array").of(t.SCHEMA.CONTAINER_SERVICE_BINDING),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CP_1_2_2_Module=function(e,t){var n=e.version("1.2.2");return n.at(t.TOPIC.FROM_APP.CALL_API_REQUEST).extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.requestId").type("string").add("payload.verb").type("string").add("payload.apiEndpoint").type("string").add("payload.apiSubUrl").type("string").add("payload.requestBody").type("object").add("payload.headers").type("object"),n.at(t.TOPIC.FROM_CONTAINER.CALL_API_SUCCESS_RESPONSE).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("payload.requestId").type("string").add("payload.responseCode").type("string").add("payload.responseBody").type("object").add("payload.headers").type("object").add("payload.contentType").type("string").add("payload.correlationId").type("string").required(!1),n.at(t.SCHEMA.CALL_API_ERROR).add("errorCode").type("string").add("errorDesc").type("string").add("errorType").type("string").add("errorField").type("string"),n.at(t.SCHEMA.CALL_API_ERROR_DETAIL).add("errors").type("array").of(t.SCHEMA.CALL_API_ERROR),n.at(t.TOPIC.FROM_CONTAINER.CALL_API_FAILED_RESPONSE).extend(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("payload.requestId").type("string").add("payload.errorType").type("string").add("payload.responseCode").type("string").add("payload.responseBody").type("object").add("payload.errorDetail").type(t.SCHEMA.ERROR_DETAIL).required(!1).add("payload.headers").type("object").required(!1).add("payload.contentType").type("string").required(!1).add("payload.correlationId").type("string").required(!1),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CP_1_2_3_Module=function(e,t){var n=e.version("1.2.3");return n.at(t.TOPIC.FROM_APP.GET_CLAIMS,"Constants.TOPIC.FROM_APP.GET_CLAIMS").extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.requestId").type("string").add("payload.claims").type("array").of("string"),n.at(t.TOPIC.FROM_CONTAINER.GET_CLAIMS_RESPONSE,"Constants.TOPIC.FROM_CONTAINER.GET_CLAIMS_RESPONSE").extend(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("payload.requestId").type("string").add("payload.claims").type("array").of("object"),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CP_1_2_4_Module=function(e,t){var n=e.version("1.2.4");return n.at(t.TOPIC.FROM_APP.SHOW_CUSTOM_WIDGET_MODAL,"Constants.TOPIC.FROM_APP.SHOW_CUSTOM_WIDGET_MODAL").extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.requestId").type("int").add("payload.closeable").type("boolean").required(!1).add("payload.src").type("string").required(!1),n.at(t.TOPIC.FROM_APP.CLOSE_CUSTOM_WIDGET_MODAL,"Constants.TOPIC.FROM_APP.CLOSE_CUSTOM_WIDGET_MODAL").extend(t.SCHEMA.MESSAGE_FROM_APP).add("payload.requestId").type("int").add("payload.modalId").type("string"),n.at(t.TOPIC.FROM_CONTAINER.SHOW_CUSTOM_WIDGET_MODAL_RESPONSE,"Constants.TOPIC.FROM_CONTAINER.SHOW_CUSTOM_WIDGET_MODAL_RESPONSE").extend(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("payload.requestId").type("int").add("payload.modalId").type("string"),n.at(t.TOPIC.FROM_CONTAINER.CLOSE_CUSTOM_WIDGET_MODAL_RESPONSE,"Constants.TOPIC.FROM_CONTAINER.CLOSE_CUSTOM_WIDGET_MODAL_RESPONSE").extend(t.SCHEMA.MESSAGE_FROM_CONTAINER).add("payload.requestId").type("int").add("payload.modalId").type("string"),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CP_1_4_1_Module=function(e,t){var n=e.version("1.4.1");return n.at(t.TOPIC.FROM_APP.CONTEXT_UPDATE).upgrade((function(e,t){!function(e){(new Date).getTime();e.filter((function(e){return"feature.notification"==e.members.ns.value&&"helix"==e.members.type.value&&"sessionTimeoutManager.OnTimeout"==e.getValueAt("data.name")})).map((function(e){e.setValueAt("data.name","onAsbTimeout")}))}(e.getValueAt("payload.context"))})),n.at(t.TOPIC.FROM_CONTAINER.LAUNCH_DATA_SET).downgrade((function(e,t){e.getValueAt("payload.services.ui").map((function(e){return e.setValueAt("featureName","")})),e.getValueAt("payload.services.container").map((function(t){var n=e.getValueAt("payload.services.data").filter((function(e){return t.getValueAt("id")==e.getValueAt("id")})),r=n.length>0?n[0]:null,i=r?r.getValueAt("resolvesTo"):"";t.setValueAt("resolvedTo",i)}))})),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CP_1_4_2_Module=function(e,t){var n=e.version("1.4.2");return n.at(t.TOPIC.FROM_CONTAINER.LAUNCH_DATA_SET).downgrade((function(e,t){var n=e.getValueAt("payload.ajaxUrl");e.setValueAt("payload.ajaxUrl",n+"v1/")})),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsbContainerSessionTimeout=function(e,t,n,r,i,o,a){var s,c,u,p;function l(){n.doClientCallback(r.EVENTS.ON_ASB_TIMEOUT_INIT),f(c)}function d(){var e,t=!0;(p&&(t=(e=parseInt(o.localStorage.getItem("timeoutTime")))===u),t)?n.doClientCallback(r.EVENTS.ON_ASB_TIMEOUT):f(e-u)}function f(e){void 0!==s&&clearTimeout(s),s=o.setTimeout(d,e),u=(new Date).getTime()+e,p&&o.localStorage.setItem("timeoutTime",u)}return{init:function(e){c=e||6e5,p=t.isLocalStorageAvailable(),o.addEventListener("mousedown",l,!1),o.addEventListener("click",l,!1),o.addEventListener("scroll",l,!1),o.addEventListener("keypress",l,!1),l()},onAppReady:function(e,t){var n,r;r=e?e.appInstance.appInstanceId:t,(n=document.getElementById(r))&&n.contentWindow&&(n.contentWindow.addEventListener("mousedown",l,!1),n.contentWindow.addEventListener("click",l,!1),n.contentWindow.addEventListener("scroll",l,!1),n.contentWindow.addEventListener("keypress",l,!1))},onGetLastActivityTime:function(){var e=u;return p&&(e=o.localStorage.getItem("timeoutTime")),e-c},removeModalEventListeners:function(e){var t=document.getElementById(e);t&&t.contentWindow&&(t.contentWindow.removeEventListener("mousedown",l,!1),t.contentWindow.removeEventListener("click",l,!1),t.contentWindow.removeEventListener("scroll",l,!1),t.contentWindow.removeEventListener("keypress",l,!1))}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n,r,i,o,a){var s=this;this.State=e,this.Messaging=n,this.Constants=r,this.Ajax=i,this.When=o,this.Window=a,this._localStorageKey="thisContainerSettings",this.onSetSetting=function(e,t,n){var r=s.convertMessageToSetting(t);s.persistSetting(r).then((function(){s.updateSettings(r),s.publishSetSettingSuccessResponse(t),t.payload.isPrivate||s.broadcastSettingChanged(r)}),(function(e){s.publishSetSettingFailResponse(t,e)}))},this.onReadSetting=function(e,t,n){var r=s.findSetting(t)||{},i=s.convertSettingToSettingMessage(r);s.publishReadSettingSuccessResponse(t,i)},this.onGetAllSettings=function(e,t,n){var r=s.findAllSettings(t).map((function(e){return s.convertSettingToSettingMessage(e)}));s.publishGetAllSettingsSuccessResponse(t,r)},this.populateContainerSettings=function(e){s._settings=e.map((function(e){return s.convertSettingDtoToSetting(e)})).filter((function(e){return void 0!==e.settingValue})).concat(s.getContainerSettingsInLocalStorage())},this.setSettings=function(e){s._settings=e},this.getSettings=function(){return s._settings},this.convertMessageToSetting=function(e){var t={scope:e.payload.scope,settingName:e.payload.settingName,settingValue:e.payload.settingValue,featureId:null};return e.payload.isPrivate&&(t.featureId=e.appInstance.bindings.featureId),t},this.convertSettingToSettingMessage=function(e){return{scope:e.scope,settingName:e.settingName,settingValue:e.settingValue,isPrivate:!!e.settingValue&&"string"==typeof e.featureId}},this.publishSetSettingSuccessResponse=function(e){s.Messaging.publish(s.Constants.TOPIC.FROM_CONTAINER.SET_SETTING_SUCCESS_RESPONSE,e.appInstance.appInstanceId,{requestId:e.payload.requestId})},this.publishSetSettingFailResponse=function(e,t){s.Messaging.publish(s.Constants.TOPIC.FROM_CONTAINER.SET_SETTING_FAIL_RESPONSE,e.appInstance.appInstanceId,{requestId:e.payload.requestId,developerMessage:t})},this.publishReadSettingSuccessResponse=function(e,t){s.Messaging.publish(s.Constants.TOPIC.FROM_CONTAINER.READ_SETTING_SUCCESS_RESPONSE,e.appInstance.appInstanceId,{requestId:e.payload.requestId,setting:t})},this.publishGetAllSettingsSuccessResponse=function(e,t){s.Messaging.publish(s.Constants.TOPIC.FROM_CONTAINER.GET_ALL_SETTINGS_SUCCESS_RESPONSE,e.appInstance.appInstanceId,{requestId:e.payload.requestId,settings:t})},this.broadcastSettingChanged=function(e){s.Messaging.publish(s.Constants.TOPIC.FROM_CONTAINER.SETTING_CHANGED,void 0,{setting:e})},this.findSetting=function(e){return s._settings.find((function(t){return t.scope===e.payload.scope&&t.settingName===e.payload.settingName&&(!t.featureId&&!e.payload.isPrivate||e.payload.isPrivate&&t.featureId===e.appInstance.bindings.featureId)}))},this.persistSetting=function(e){return e.scope===s.Constants.SETTINGS.SCOPE.THIS_CONTAINER?s.saveSettingToLocalStorage(e):s.saveSettingToPlatformServices(e)},this.findAllSettings=function(e){return s._settings.filter((function(t){return!t.featureId||t.featureId===e.appInstance.bindings.featureId}))},this.saveSettingToPlatformServices=function(e){var t=s.When.defer(),n=t.promise,r=s.convertSettingToApiDTO(e);return s.Ajax.Ajax.post(s.State.ajaxUrl+s.Constants.ROUTES.CONTAINER_SETTINGS,r,{}).then((function(e){t.resolve(e)}),(function(e,n,r){t.reject(r)})),n},this.convertSettingToApiDTO=function(e){return{SettingName:e.settingName,SettingValue:JSON.stringify(e.settingValue),FeatureId:e.featureId}},this.convertSettingDtoToSetting=function(e){var t,n=e.containerTypeId?s.Constants.SETTINGS.SCOPE.THIS_CONTAINER_TYPE:s.Constants.SETTINGS.SCOPE.THIS_USER;try{t=JSON.parse(e.settingValue)}catch(r){t=void 0,s._log("convertSettingDtoToSetting.exception","Settings parse exception.  = "+r+", scope = "+n+", settingName= "+e.settingName+", settingValue= "+e.settingValue+", featureId= "+e.featureId)}return{scope:n,settingName:e.settingName,settingValue:t,featureId:e.featureId}},this.saveSettingToLocalStorage=function(e){var t=s.When.defer(),n=t.promise;if(s.isLocalStorageAvailable()){var r=s.getContainerSettingsInLocalStorage(),i=r.findIndex((function(t){return t.settingName===e.settingName&&t.featureId===e.featureId}));i>-1?r[i]=e:r.push(e),s.Window.localStorage.setItem(s._localStorageKey,JSON.stringify(r)),t.resolve("successfully updated "+s._localStorageKey+" in localStorage")}else t.reject("your browser does not support local storage");return n},this.isLocalStorageAvailable=function(){return void 0!==s.Window.Storage},this.getContainerSettingsInLocalStorage=function(){var e=s.Window.localStorage.getItem(s._localStorageKey);return e?JSON.parse(e):[]},this.updateSettings=function(e){var t=s._settings.find((function(t){return!(t.scope!==e.scope||t.settingName!==e.settingName||t.featureId!==e.featureId&&(null!=t.featureId&&void 0!==t.featureId||null!=e.featureId&&void 0!==e.featureId))}));t?t.settingValue=e.settingValue:s._settings.push(e)},this._log=t.register("hx.container.settings")};t.AsbContainerSettingsModule=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsbContainerScrollingModule=function(e,t,n,r,i,o){function a(){var e=n.body,t=n.documentElement;return Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)}return{_onScrollBy:function(e,t){var n=t.payload.scrollOffset;r.scrollBy(0,n)},_onScrollTo:function(e,t){var n=t.payload.scrollPosition;r.scroll(0,n)},_onGetScrollInfo:function(i,o,s){var c=(r.pageYOffset||n.documentElement.scrollTop)-(n.documentElement.clientTop||0),u=n.querySelector('iframe[id="'+o.appInstanceId+'"]').getBoundingClientRect().top+c,p={scrollTop:c,containerHeight:a(),featureTop:u,windowInnerHeight:r.innerHeight};e.publish(t.TOPIC.FROM_CONTAINER.GET_SCROLL_INFO_RESPONSE,o.appInstance.appInstanceId,{requestId:o.payload.requestId,scrollInfo:p})},_broadcastScrollYPosition:function(){var e=(r.pageYOffset||n.documentElement.scrollTop)-(n.documentElement.clientTop||0),t="feature.notification",s="scrollBroadcast";i.get(t,s)||i.add(t,s,0);var c=i;if(c.getElements().length>0){var u=a();c.getElements().filter((function(e){return e.ns===t&&e.type===s}))[0].data={scrollTop:e,containerHeight:u,windowInnerHeight:r.innerHeight}}o(c)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewportNotificationConst={namespace:"feature.notification",typeBroadcast:"viewportDimensionBroadcast",typeRequest:"viewportDimensionRequest"};t.AsbContainerViewportDimensionModule=function(e,n,r){return{handleViewportDimensionBroadcast:function(){var i=e.innerHeight-60,o=e.innerWidth;n.get(t.ViewportNotificationConst.namespace,t.ViewportNotificationConst.typeBroadcast)?n.get(t.ViewportNotificationConst.namespace,t.ViewportNotificationConst.typeBroadcast).data={width:o,height:i}:n.add(t.ViewportNotificationConst.namespace,t.ViewportNotificationConst.typeBroadcast,{width:o,height:i});r(n)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n,r){var i=this;this.bindings=e,this.containerConstants=n,this.containerServices=r,this.addContainerService=function(e){return i.initialized&&i.initializeService(e),i.services.push(e),i},this.initializeService=function(e){i.bindings.asbCreateContainerService(e.getBinding()),i.containerServices.bind(e.getInterfaceId(),e.getInterfaceVersion(),e.handler.bind(e))},this.init=function(){if(!i.initialized){for(var e=0,t=i.services;e<t.length;e++){var n=t[e];i.initializeService(n)}i.initialized=!0}},this.services=[],this.initialized=!1};t.AsbContainerServiceManager=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.components=e,this.log=this.components.Log.register("DocumentUploadContainerService"),this.requestCount=0}return e.prototype.getInterfaceId=function(){return"fee22181-6b3e-4884-8dc8-b217378e1d29"},e.prototype.getInterfaceVersion=function(){return"1.0.0"},e.prototype.getBinding=function(){return{authRequired:!1,id:"ContainerService.documentUploadService",uid:"ContainerService.documentUploadService",interfaceId:this.getInterfaceId(),interfaceVersion:this.getInterfaceVersion()}},e.prototype.handler=function(e,t,n){var r=this;this.log.info("handler","received request",e);var i={apiEndpoint:"Documents.DocumentReceiver",verb:"POST",apiSubUrl:"v1/customers/cif/documents",requestBody:e.params,requestId:"ContainerService.documentUploadService-"+this.requestCount++,headers:{}};return this.components.asbDomainAPI.callApi(i,e.appInstance,{processorFlags:8}).then((function(e){return t(r.wrapXhrResponse(e),!0)})).catch((function(e){return n(e.status,r.wrapXhrResponse(e))}))},e.prototype.wrapXhrResponse=function(e){return{responseCode:e.status?e.status.toString():"unknown",responseBody:e.data||e.responseText,headers:e.headers,errorType:e.error}},e}();t.AsbDocumentUploadContainerService=r},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,n){this.instrumentation=e,this.state=t,this.log=n.register("PerformanceLoggerContainerServices")}return e.prototype.getInterfaceId=function(){return"072c3b24-57b7-4415-855d-a719598d521f"},e.prototype.getInterfaceVersion=function(){return"1.0.0"},e.prototype.getBinding=function(){return{authRequired:!1,id:"ContainerService.performanceLogger",uid:"ContainerService.performanceLogger",interfaceId:this.getInterfaceId(),interfaceVersion:this.getInterfaceVersion()}},e.prototype.handler=function(e,t,n){try{for(var i=e.appInstance,o=e.params,a=this.validateRequestParameters(o),s={appId:i.featureId},c=0,u=a;c<u.length;c++){var p=u[c];this.instrumentation.writePerformance(p.type,JSON.stringify(r({},s,p.details)),p.duration)}t(!0,!0)}catch(e){var l="Invalid performance logger payload - "+e;this.log.warn(l),n(!1,l)}},e.prototype.validateRequestParameters=function(e){if(!Array.isArray(e))throw"payload should be an array";return e.map((function(e){var t=e.type,n=e.duration,r=e.details;if("string"!=typeof t)throw"entry type is not string";if("number"!=typeof n)throw"duration should be number";if("object"!=typeof r&&void 0!==r)throw"details must be an object if present";return{type:t,duration:n,details:r||{}}}))},e}();t.AsbPerformanceLoggerContainerService=i},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(488),t),i(n(490),t),i(n(492),t),i(n(494),t),i(n(496),t),i(n(500),t),i(n(503),t)},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.widgetModalModule=void 0;var o=n(67);i(n(489),t);var a=n(67);t.widgetModalModule=function(e){var t=e.components.ClientCallbacks,n=e.components.ContainerConstants;a.initWidgetModal(e.components.State);var r=o.getModalParentElement();t.bind(n.EVENTS.ON_APP_CLOSED,(function(e){var t=e.appInstance;o.closeModalsByAppId(r,t.appInstanceId)})),r.addEventListener("click",(function(e){var t=o.getOpenModals(r),n=t[t.length-1];n&&(n.contains(e.target)||o.modalIsBackgroundCloseable(n)&&o.closeModal(r,n))}),!1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWidgetModalEventHandlers=void 0;var r=n(67);t.getWidgetModalEventHandlers=function(e,t,n){return{showCustomWidgetModalMessageHandler:function(i,o){var a=r.getModalParentElement(),s=o.appInstance,c=o.payload,u=r.openModal(a,s.appInstanceId,c.src,c.closeable);n.onAppReady(!1,u),t.publish(e.TOPIC.FROM_CONTAINER.SHOW_CUSTOM_WIDGET_MODAL_RESPONSE,s.appInstanceId,{requestId:c.requestId,modalId:u})},closeCustomWidgetModalMessageHandler:function(i,o){var a=r.getModalParentElement(),s=o.appInstance,c=o.payload;n.removeModalEventListeners(c.modalId);var u=r.closeModalById(a,c.modalId);t.publish(e.TOPIC.FROM_CONTAINER.CLOSE_CUSTOM_WIDGET_MODAL_RESPONSE,s.appInstanceId,{requestId:c.requestId,modalId:u})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SiteCatHandler=void 0;var r=n(491);t.SiteCatHandler=function(e,t,n,i,o){var a=new r.SiteCatNotificationHandler(e,t,n,i);o.siteCat=a.handleSiteCatNotification.bind(this),a.init()}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.SiteCatNotificationHandler=void 0;var i={cif:"0",dtid:"",url:"",source:"Web Container",referrer:""},o=function(){function e(e,t,n,r){this.Uri=t,this.RandomUtils=n,this.HttpUtils=r,this.dtid="",this.containerLocation=new t,this.referrerLocation=new t(document.referrer),this._log=e.register("hx.asb.online.notificationhandler.sitecat")}return e.prototype.handleSiteCatNotification=function(e){this._log("notification.info");var t=this.prepareReportFrom(e);this.send(t)},e.prototype.init=function(){i.cif=this.getCif(),i.dtid=this.getDtid(),i.referrer=this.containerLocation.search.referrer||this.containerLocation.search.gotoUrl||"unknown",i.url=window.location.href},e.prototype.getDtid=function(){return this.getReferrer()+":"+this.getCif(this.RandomUtils.guid())+":"+this.formatDate(new Date)},e.prototype.getCif=function(e){return void 0===e&&(e="0"),Helix.Container.getContainerAppBindings()&&Helix.Container.getContainerAppBindings().userDetail?Helix.Container.getContainerAppBindings().userDetail.aid:e},e.prototype.getReferrer=function(){return this.containerLocation.search.originalReferrer||this.containerLocation.search.referrer||this.referrerLocation.domain||"unknown"},e.prototype.prepareReportFrom=function(e){(e=r(r({},i),e))[11]=this.getReferrer(),e[1]=e.cif,e[3]=this.getReportUrl(),e[61]=e.dtid;var t=this.buildReportFrom(e);return this.cleanReportFields(t),this.setReportFieldsToLowerCase(t),t},e.prototype.buildReportFrom=function(e){var t={};Object.keys(e).map((function(n){var r=e[n];/[0-9]{1,2}/.test(n)?(t["eVar"+n]=""+r,"16"!==n&&(t["prop"+n]=""+r)):n.startsWith("__")&&(t[n.substring(2)]=""+e[n])}));var n=e;if(n.additionalReportProps)for(var r=0,i=n.additionalReportProps;r<i.length;r++){var o=i[r];n.hasOwnProperty(o)&&(t[o]=e[o])}return t},e.prototype.getReportUrl=function(){return this.containerLocation.baseUri+"?layout="+this.containerLocation.search.layout+"&referrer="+this.containerLocation.search.referrer},e.prototype.cleanReportFields=function(e){for(var t in e)e.hasOwnProperty(t)&&void 0===e[t]&&(e[t]="");e.timestamp&&delete e.timestamp},e.prototype.setReportFieldsToLowerCase=function(e){for(var t in e)e.hasOwnProperty(t)&&(e[t]=e[t].toLowerCase())},e.prototype.send=function(e){if(Object.assign(window.s,e),this._log("sitecat.report.info",e),this.HttpUtils.isDev())this._log("sitecat.report.debug","report not sent as this is a Dev machine");else{var t=window.s.t();t&&document.write(t)}},e.prototype.formatDate=function(e){return e.getFullYear().toString().substr(2)+this.pad2(e.getMonth()+1)+this.pad2(e.getDate())+this.pad2(e.getHours())+this.pad2(e.getMinutes())+this.pad2(e.getSeconds())},e.prototype.pad2=function(e){return(e<10?"0":"")+e},e}();t.SiteCatNotificationHandler=o},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.sessionTimersInitialize=void 0,i(n(493),t),t.sessionTimersInitialize=function(e){var t=1e3*e.security.keepAliveInterval+500,n=!1;return setInterval((function(){n&&e.components.SessionMonitor.keepAlive(),n=!1}),t),{sessionKeepAlive:function(){n=!0,e.components.SessionMonitor.keepAlive()}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimeoutEventHandler=void 0,t.TimeoutEventHandler=function(e,t,n){var r=e.register("hx.asb.online.eventhandler.timeout");return{timeout:function(){n.featureSelfTimeoutCheck()||(r("timeout.info"),n.hasUserDetails()?function(){for(;document.body.hasChildNodes();)document.body.removeChild(document.body.lastChild);if(t.isLocalHost()){r("timeoutAuthenticated.debug");var e=document.createElement("h1");e.innerHTML="User session timed out",document.body.appendChild(e)}else window.location.assign("/pkmslogout?goto="+window.location.href)}():window.location.reload(),function(){var e=document.createEvent("HTMLEvents");e.initEvent("helix.timeout",!1,!0);try{document.querySelector("body").dispatchEvent(e)}catch(e){r("fireTimeoutEvent.exception",e)}}())}}}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalHeaderManager=void 0;var o=n(138);i(n(138),t),i(n(495),t);var a=function(){function e(e,t,n){this.headerManager=n,this.isFirstAppReady=!0,this.RegionManager=e,this.hasHeader=t}return e.prototype.appReadyHandler=function(e){var t=e.appInstance;if(this.hasHeader){if(this.isFirstAppReady){this.headerManager.attach(document.querySelector(".header-container"));for(var n=0,r=this.RegionManager.regions.filter((function(e){return"global"===e.regionName}));n<r.length;n++){var i=r[n];this.RegionManager.loadAppByExposedInterfaceId(i.uid[0],null,{},!0,"")}this.isFirstAppReady=!1}var a=this.RegionManager.getRegionForExposedInterface(t.launchInterface.uid);if(a&&!o.isAppInstanceGlobalViewport(t)){this.headerManager.setMode(a.regionName);var s=document.getElementById("Notifications-Preview"),c=document.getElementById("hx_viewport_asb_global");"form"==a.regionName?(s.style.display="none",c.style.display="none",c.style.visibility="hidden"):(s.style.display="block",c.style.display="block",c.style.visibility="visible")}}else{var u=document.querySelector(".header-container");u.parentNode.removeChild(u),document.getElementById("layouts").style.top="0px"}},e}();t.GlobalHeaderManager=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderManager=void 0;var r=function(){function e(e,t){this.headerUrl=e,this.mode=t,this.initlalizationAttempts=0,this.initializeFrame=this.initializeFrame.bind(this)}return e.prototype.attach=function(e){this.frame||(this.frame=document.createElement("iframe"),this.frame.src=this.headerUrl,this.frame.id="common-header",this.frame.frameBorder="0",this.frame.scrolling="no",this.frame.classList.add("loading"),this.frame.addEventListener("load",this.initializeFrame,!1),e.appendChild(this.frame))},e.prototype.setMode=function(e){this.mode=e,this.frame&&i(this.frame.contentWindow)&&this.frame.contentWindow.__header.setMode(this.mode)},e.prototype.initializeFrame=function(){if(this.initlalizationAttempts++,!i(this.frame.contentWindow))return this.initlalizationAttempts<30?setTimeout(this.initializeFrame,25):void 0;this.frame.classList.remove("loading"),this.frame.contentWindow.__header.setMode(this.mode)},e}();function i(e){var t=e;return e&&t.__header&&t.__header.setMode}t.HeaderManager=r},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(497),t),i(n(498),t),i(n(499),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContainerConfigMgr=void 0,t.ContainerConfigMgr=function(e){var t=e.register("hx.asb.online.ContainerConfigMgr");function n(){return Helix.Container.getContainerAppBindings().userDetail}function r(e){return(Helix.Container.getContainerAppBindings().containerSettings||[]).find((function(t){return t.name===e}))}function i(e){var t=Helix.Container.getCurrentApp();if(t&&t.featureSettings)return t.featureSettings.find((function(t){return t.name===e}))}return{getBaseUrl:function(e){var t=Helix.Container.getContainerAppBindings().invokes.data.find((function(t){return t.uid===e}));if(!t)throw new Error("apiEndpoint "+e+" is not resolved by the container");var n=t.resolvesTo;return"/"!==n.slice(-1)&&(n+="/"),n},getTokenisedDataFor:function(e,t){var n=Helix.Container.getContainerAppBindings().launchData;if(n&&n.data){if(t&&n.featureId&&n.featureId!==t.app.featureId)return{};try{return JSON.parse(n.data)}catch(t){e("getTokenisedDataFor.warn","getTokenisedData: launch data not in expected format")}}return{data:n?n.data:""}},getFeatureSettingsFor:function(e){return Helix.Container.getContainerAppBindings().settings.filter((function(t){return t.featureId===e.app.featureId}))},getUserDetails:n,getFeatureSettings:function(e){return e.app.featureSettings},hasUserDetails:function(){var e=n();return e&&e.un},featureSelfTimeoutCheck:function(){var e=i("TimeoutRequired");if(!(e&&"false"===e.value))return!1;var t=r("NoTimeOutFeatures");return!(!t||!t.value)&&t.value.includes(Helix.Container.getCurrentApp().appId)},getContainerSetting:r,getFeatureSetting:i,getPreloadedDomainAPICalls:function(e){var n=[],r=e.featureSettings.find((function(e){return"PreloadDomainAPICalls"===e.name}));if(!r)return[];try{var i=JSON.parse(r.value);Array.isArray(i)||(i=[i]);for(var o=0,a=i;o<a.length;o++){var s=a[o];s.apiEndpoint&&s.apiSubUrl?n.push(s):t("getPreloadedDomainAPICalls, setting missing required fields",s)}}catch(e){t("getPreloadedDomainAPICalls, setting is not valid JSON",e)}return n},getTokenisedCif:function(){return n().tokenisedCif}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Asb_OpenAjax_PostMessage=void 0;var r=function(){function e(e,t){this._onPublishCallbacks=[],this.postMessageModule=t,this.AppManagement=e.AppManagement,this.ClientCallbacks=e.ClientCallbacks,this.Constants=e.Constants,this.ContainerConstants=e.ContainerConstants,this.EventArgs=e.EventArgs,this.State=e.State,this._log=e.Log.register("hx.container.postMessage")}return e.prototype.createIframeContainer=function(e,t,n,r,i){var o=e[0],a=n,s=i,c=document.createElement("iframe");if(s.id=t,s.name=t,s)for(var u in s)if("style"===u)for(var p in s.style)c.style[p]=s.style[p];else c[u]=s[u];return c.src='javascript:"<html></html>"',o.appendChild(c),c.src=a,c.getIframe=function(){return this},this.postMessageModule.linkChannels({channel:this.Constants.POSTALJS_CHANNELS.GLOBAL,topic:this.Constants.TOPIC.FROM_CONTAINER.ALL_POSTAL_JS},{channel:t}),this.postMessageModule.fedx.addFilter([{channel:t,topic:this.Constants.TOPIC.FROM_CONTAINER.ALL_POSTAL_JS,direction:"out"}]),c},e.prototype.initHub=function(e){var t=this;this.postMessageModule.instanceId("container"),this.postMessageModule.addFilter([{channel:this.Constants.POSTALJS_CHANNELS.FEATURE,topic:this.Constants.TOPIC.FROM_APP.ALL_POSTAL_JS,direction:"in"},{channel:this.Constants.POSTALJS_CHANNELS.GLOBAL,topic:this.Constants.TOPIC.FROM_CONTAINER.ALL_POSTAL_JS,direction:"out"},{channel:this.Constants.POSTALJS_CHANNELS.POSTAL_FEDERATION,topic:this.Constants.POSTALJS_TOPICS.CLIENT_FEDERATED,direction:"both"}]);var n=this._log;return this.postMessageModule.addWireTap((function(e,r){n("ID: "+t.postMessageModule.instanceId(),r)})),this.postMessageModule.channel(this.Constants.POSTALJS_CHANNELS.FEATURE).subscribe(this.Constants.TOPIC.FROM_APP.ALL_POSTAL_JS,(function(t,n){t&&n.topic&&e(n.topic,t)})),this},e.prototype.publish=function(e,t){var n=t.appInstanceId||this.Constants.POSTALJS_CHANNELS.GLOBAL;this.postMessageModule.channel(n).publish(e,t)},e.prototype.removeIframeContainer=function(e){void 0!==e.container.remove?e.container.remove(e.container):e.container.parentNode.removeChild(e.container)},e}();t.Asb_OpenAjax_PostMessage=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncEventHandler=void 0;var r=function(){function e(e){e.register("hx.asb.online.eventhandler.async")}return e.prototype.onPrepareLaunchParameters=function(e,t,n,r){t({hxai:e.appInstance.appInstanceId})},e.prototype.onQueueAppMessages=function(e,t,n,r){void 0===e.appInstance.container.isConnected&&(e.appInstance.container.isConnected=document.body.contains(e.appInstance.container)),t(!e.appInstance.container.isConnected)},e}();t.AsyncEventHandler=r},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(501),t),i(n(502),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DialogEventHandler=void 0;var r=function(){function e(t,n){this._log=t.register("hx.asb.online.eventhandler.Dialog"),e.EventArgs=n}return e.prototype._onShowDialog=function(t,n){this._log("showdialog");var r=function(e){},i=new e.EventArgs.ShowContainerMessage(n.payload,n.payload.isModal,null);n.payload.isModal&&(i.appInstanceId=n.appInstance.appInstanceId,r=function(e){var t=null;e&&(i.messages.dialogButtons.buttons[0].text===e?t=i.messages.dialogButtons.buttons[0].id:i.messages.dialogButtons.buttons[1].text===e&&(t=i.messages.dialogButtons.buttons[1].id)),Helix.Container.publish(Helix.Constants.TOPIC.FROM_CONTAINER.SHOW_DIALOG_RESPONSE,i.appInstanceId,{requestId:i.messages.requestId,actionId:t})}),Helix.Container.doClientCallbackAsync(Helix.Container.EVENTS.ON_ASB_SHOW_DIALOG,i,r,null,(function(){r(null)}))},e}();t.DialogEventHandler=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModalFeatureHandler=void 0;var r=n(67),i=function(){function e(e,t){this.state=e,this.appManagement=t,document.getElementById("modal-layout").addEventListener("click",this.onModalBackgroundClicked.bind(this),!1)}return e.prototype.onModalBackgroundClicked=function(e){var t=this,n=this.state.viewPorts.find((function(e){return e.isModal}));n&&(document.getElementById(n.id).contains(e.target)||n.apps.forEach((function(e,n){"false"!==e.window.getAttribute("data-background-closeable")&&t.appManagement.closeApp(e,{})})))},e.prototype.onModalAppLaunchHandler=function(e){var t=e.appInstance;if(t.viewPort.isModal&&t.window){var n=t.params.customLaunchData.params;!1===(null==n?void 0:n.closeable)&&t.window.setAttribute("data-background-closeable","false"),document.body.style.overflow="hidden"}},e.prototype.onModalFeatureClosedHandler=function(){var e=this.state.activeAppInstances.filter((function(e){return e.viewPort.isModal})),t=r.getOpenModals(r.getModalParentElement());Array.isArray(e)&&0===e.length&&0===t.length&&(document.body.style.overflow="")},e}();t.ModalFeatureHandler=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SetCookie=void 0;var r=function(){function e(e){this.CommonUtils=e}return e.prototype.checkUserDetailsAid=function(){var e,t,n;return!!(null===(n=null===(t=null===(e=null===Helix||void 0===Helix?void 0:Helix.Container)||void 0===e?void 0:e.getContainerAppBindings())||void 0===t?void 0:t.userDetail)||void 0===n?void 0:n.aid)},e.prototype.setExpiryDate=function(){var e=new Date;return e.setMonth(e.getMonth()+6),e.toUTCString()},e.prototype.setVisitInfoCookie=function(){if(window.location.href.indexOf("service")>0&&!this.CommonUtils.getCookie("VisitInfo")&&this.checkUserDetailsAid()){var e="hashedCIF="+Helix.Container.getContainerAppBindings().userDetail.aid,t=this.setExpiryDate();this.CommonUtils.setCookie("VisitInfo",e,t,!0)}},e}();t.SetCookie=r},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(505)),r(n(506)),r(n(507)),r(n(508)),r(n(509)),r(n(510)),r(n(511))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.storeCif=this.storeCif.bind(this),this.fireInitialisedEvent=this.fireInitialisedEvent.bind(this)}return e.prototype.handleInitComplete=function(){this.storeCif(),this.fireInitialisedEvent()},e.prototype.storeCif=function(){var e=Helix.Container.getContainerAppBindings().userDetail,t=e&&e.aid;if(t)try{window.sessionStorage.setItem("cif",t)}catch(e){console.warn("session storage access failed",e)}},e.prototype.fireInitialisedEvent=function(){var e=document.createEvent("HTMLEvents");e.initEvent("helix.initialised",!1,!0),document.querySelector("body").dispatchEvent(e)},e}();t.HelixInitCompleteHandlerModule=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.hasHeader=e,this.handleAppViewResize=this.handleAppViewResize.bind(this)}return e.prototype.handleAppViewResize=function(e,t,n,r){var i=document.querySelector("#modal-layout");i&&(i.style.webkitOverflowScrolling="unset",setTimeout((function(){i.style.webkitOverflowScrolling="touch"}),0));var o=e.appInstance,a=e.height;if(!o.window)return r();if(o.viewPort.id!==Helix.Constants.VIEW_PORT.MAIN_ID)return r();var s=window.innerHeight-(this.hasHeader?document.querySelector("header").clientHeight:0);return a<s&&(a=s),o.window.style.height=a+"px",t()},e}();t.AppViewResizeHandlerModule=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.onEvent=this.onEvent.bind(this)}return e.prototype.init=function(e){this.container=e.querySelector(".container")},e.prototype.onEvent=function(e){e.backgroundImageKey&&(this.container.style.backgroundImage="url('https://www.asb.co.nz/"+e.backgroundImageKey+"')")},e}();t.BackgroundCustomisation=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.onButtonActioned=null,this.onEvent=this.onEvent.bind(this)}return e.prototype.init=function(e){this.dialogElement=e.querySelector("#dialog"),this.dialogElement.addEventListener("click",this.onBackgroundClick.bind(this),!1),this.okButtonElement=e.querySelector(".button.primary"),this.okButtonElement.addEventListener("click",this.onOkClick.bind(this),!1),this.cancelButtonElement=e.querySelector(".button.secondary"),this.cancelButtonElement.addEventListener("click",this.onCancelClick.bind(this),!1),this.titleElement=e.querySelector("#dialog .dialog-title"),this.messageElement=e.querySelector("#dialog .message"),this.theDialogElement=e.querySelector("#dialog .dialog")},e.prototype.onEvent=function(e,t){var n=e.messages;return this.onShow(n,t)},e.prototype.onShow=function(e,t){if(!e)return console.warn("No options supplied to show dialog");if(2!==e.dialogButtons.buttons.length)return console.warn("Dialog button configuration not supported");this.onButtonActioned=t;var n=e.dialogButtons.buttons,r=n[0].text,i=n[1].text;this.titleElement.innerHTML=e.title,this.messageElement.innerHTML=e.message,this.cancelButtonElement.innerHTML=r,this.okButtonElement.innerHTML=i,i.indexOf(" ")>0&&this.dialogElement.classList.add("wide"),this.dialogElement.classList.add("open"),this.okButtonElement.focus()},e.prototype.onBackgroundClick=function(e){this.theDialogElement.contains(e.target)||this.close()},e.prototype.onOkClick=function(e){this.onButtonActioned&&this.onButtonActioned(this.okButtonElement.textContent),this.close()},e.prototype.onCancelClick=function(e){this.onButtonActioned&&this.onButtonActioned(this.cancelButtonElement.textContent),this.close()},e.prototype.close=function(){this.dialogElement.classList.remove("open"),this.dialogElement.classList.remove("wide")},e}();t.Dialog=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.defaultPageTitle=e}return e.prototype.init=function(){Helix.Container.bind(Helix.Container.EVENTS.ON_APP_READY,this.onAppChanged,this,null),Helix.Container.bind(Helix.Container.EVENTS.ON_APP_CLOSED,this.onAppChanged,this,null)},e.prototype.onAppChanged=function(){var e=Helix.Container.getCurrentApp();this.isGlobalFeature(e)||(document.title=this.getPageTitleFromApp(e))},e.prototype.getPageTitleFromApp=function(e){return e&&e.featureSettings&&e.featureSettings.filter((function(e){return"PageTitle"==e.name})).map((function(e){return e.value}))[0]||this.defaultPageTitle},e.prototype.isGlobalFeature=function(e){return!!e&&(!!e.viewPort&&e.viewPort.id.includes("global"))},e}();t.PageTitleUpdater=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.onEvent=this.onEvent.bind(this)}return e.prototype.init=function(e){this.indicatorElement=e.querySelector(".completion-progress-indicator-wrapper"),this.barElement=e.querySelector(".completion-progress-indicator .bar")},e.prototype.onEvent=function(e){for(this.indicatorElement.classList.add("show");this.barElement.childNodes.length>0;)this.barElement.removeChild(this.barElement.lastChild);for(var t=0;t<e.numberOfSteps;t++){var n=document.createElement("div");n.classList.add("step"),t<e.currentStep&&n.classList.add("done"),this.barElement.appendChild(n)}},e}();t.ProgressIndicator=r},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=60,a=20,s=30,c=function(){function e(e,t,n){this.options=e,this.AppDescriptor=t,this.getQueryParam=n,this.flagPilotOn=!1,this.createFeaturePilotButton(),this.patchAsbTokenManager()}return e.prototype.patchAsbTokenManager=function(){var e=this,t=this.options.components.asbTokenManager,n=t.update.bind(t);t.update=function(t){var r=e.flagPilotOn?e.featurePilotInfo:e.originalFeatureInfo;if(Array.isArray(r)&&r.length){var i=t.features;t.features=i.map((function(e){for(var t=0;t<r.length;t++){var n=r[t];n.featureId===e.featureId&&(e.appId=n.publisherId+"."+n.featureId+","+n.version)}return e}))}n(t)}},e.prototype.handleInitComplete=function(){var e=this,t=this.options.components.Ajax.Ajax,n=Helix.Container.getContainerAppBindings().containerSettings,o=!!n.find((function(e){return e.name.toLowerCase()==="enablePilot".toLowerCase()&&"true"===e.value})),a=this.getPilotUrl(),s=n.reduce((function(e,t){if(t.name.toLowerCase()==="enablePilot".toLowerCase()&&t.value,t.name.toLowerCase()==="pilotRequestDefaultDelay".toLowerCase()){var n=parseInt(t.value,10);isNaN(n)||(e=n)}return e}),3e3);o&&a&&setTimeout((function(){return r(e,void 0,void 0,(function(){var e,n,r=this;return i(this,(function(i){switch(i.label){case 0:return[4,t.get(a,null,{meta:{processorFlags:0},headers:{Accept:"application/json",ContainerTypeId:Helix.Container.getContainerId()}})];case 1:return e=i.sent(),Array.isArray(e.data)&&e.data.length>0&&(this.featurePilotInfo=this.getFeaturePilotInfo(e.data),n=Helix.Container._state.config.bindings,this.originalFeatureInfo=n.reduce((function(e,t){var n;return r.featurePilotInfo.map((function(e){e.appId===t.appId&&(n=t)})),n&&e.push(n),e}),[]),Helix.Container._state.activeAppInstances.map((function(e){"58856f007c9d150564318e1c"!==e.appId&&r.handlePioltIconVisibilityOnAppCreate({destination:{uid:e.appId,app:e}})}))),[2]}}))}))}),s)},e.prototype.handlePioltIconVisibilityOnAppCreate=function(e){var t=this;if(!(e&&e.actionParams&&e.actionParams.isGlobal)){var n=e.destination;if(n&&n.uid&&this.featurePilotInfo){var r,i=!1,o=!1,a="true"===this.getQueryParam("showPilotButton")||"true"===this.getQueryParam("showPilotButton".toLowerCase());r=!!Helix.Container.getContainerAppBindings().containerSettings.find((function(e){return e.name.toLowerCase()==="showPilotButton".toLowerCase()&&"true"===e.value})),o=!!n.app.featureSettings.find((function(e){return e.name.toLowerCase()==="showPilotButton".toLowerCase()&&"true"===e.value})),this.featurePilotInfo.map((function(e){n.uid.indexOf(e.appId)>=0&&(i=!0,o||(o=e.featureSettings.find((function(e){return e.name.toLowerCase()==="showPilotButton".toLowerCase()&&"true"===e.value}))))})),i?a||o||r?this.showPilotButton():setTimeout((function(){t.flagPilotOn=!0,t.handlePilotFeatures(t.flagPilotOn)}),50):this.hidePilotButton()}else this.hidePilotButton()}},e.prototype.handlePilotFeatures=function(e){var t=this.options.components,n=t.Bindings,r=t.regionManager,i=t.asbTokenManager,o=e?this.featurePilotInfo:this.originalFeatureInfo;if(Array.isArray(o)&&o.length){var a=i.get(Helix.Container.TOKEN_TYPE.FEATURE_TOKEN);Helix.Container._state.config.bindings=Helix.Container._state.config.bindings.map((function(e){for(var t=0;t<o.length;t++){var n=o[t];if(n.appId===e.appId)return n}return e})),a.featureTokens=a.featureTokens.map((function(e){for(var t=0;t<o.length;t++){var n=o[t];n.featureId===e.featureId&&(e.appId=n.publisherId+"."+n.featureId+","+n.version)}return e})),n.setExposedInterfacesByUid(Helix.Container._state.config.bindings),Helix.Container._state.activeAppInstances.toArray().map((function(e){var t=!1;o.map((function(n){n.appId===e.appId&&n.version!==e.version&&(t=!0)})),t&&r.loadFeature()}))}},e.prototype.getPilotUrl=function(){var e=this.options.components,t=e.Constants,n=e.State,r=Helix.Container.getContainerAppBindings().userDetail;return r&&t.ROUTES.PILOT&&r.tokenisedCif?""+n.ajaxUrl+t.ROUTES.PILOT+"/"+r.tokenisedCif:void 0},e.prototype.getFeaturePilotInfo=function(e){var t=this,n=this.options.components.AppManagement,r=["SalesApi","SalesApiPublic","Enterprise.Audit","FNBApi","JoinApi","JoinApiPublic","KiwisaverExplorer.CustomerService","KiwisaverExplorer.Emails","KiwisaverExplorer.OnyxNotes","LinksV1","Mojo.DevAppService","SignalR.ContainerService","Test.Rates"],i=Helix.Container.getContainerAppBindings(),o=n.getAppDataServiceEndpoints(i);return e.map((function(e){var n=e.featureBinding;n.appId=n.featureId,n.consumes=n.consumes||[],n.consumes.context=n.consumes.context||[],n.invokes.data=n.invokes.data||[],n.invokes.container.map((function(e){if(-1!==r.indexOf(e.id)){if(n.exposes.ui.count>1)throw new Error("Too many UIs"+n.publisherId+"."+n.appId+", "+n.version);n.exposes.ui.map((function(e){e.tokenTransport="launch_data"}));var t=o.find((function(t){return t.id==e.id}));e.resolvesTo=t?t.resolvesTo:"",n.invokes.data.push(e)}})),n=t.ensureBindingDefaults(n);var i=new t.AppDescriptor(n.publisherId,n.appId,n.version);return n.appDescriptor=i,n.invokes.ui.map((function(e){e.appDescriptor=i})),n}))},e.prototype.ensureBindingDefaults=function(e){return e.exposes=e.exposes||{},e.exposes.ui=e.exposes.ui||[],e.exposes.data=e.exposes.data||[],e.invokes=e.invokes||{},e.invokes.ui=e.invokes.ui||[],e.invokes.data=e.invokes.data||[],e.invokes.container=e.invokes.container||[],e.demands=e.demands||{},e.demands.notifications=e.demands.notifications||[],e.demands.features=e.demands.features||[],e.provides=e.provides||{},e.provides.features=e.provides.features||[],e},e.prototype.createFeaturePilotButton=function(){var e=this,t=document.createElement("div");t.setAttribute("id","feature-pilot-button"),t.style.position="fixed",t.style.cursor="pointer",t.style.width=o+"px",t.style.height=o+"px",t.style.right=a+"px",t.style.bottom=a+"px",t.style.borderRadius=s+"px",t.onclick=function(){e.flagPilotOn=!e.flagPilotOn,e.flagPilotOn?e.displayPilotOnIcon():e.displayPilotOffIcon(),e.handlePilotFeatures(e.flagPilotOn)},document.body.appendChild(t),this.featurePilotButton=t,this.displayPilotOffIcon(),this.hidePilotButton()},e.prototype.showPilotButton=function(){this.featurePilotButton.style.display="block",this.featurePilotButton.removeAttribute("aria-hidden")},e.prototype.hidePilotButton=function(){this.featurePilotButton.style.display="none",this.featurePilotButton.setAttribute("aria-hidden","true")},e.prototype.displayPilotOffIcon=function(){this.featurePilotButton.innerHTML='\n        <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="50.000000px" height="50.000000px" viewBox="0 0 50.000000 50.000000" preserveAspectRatio="xMidYMid meet">\n            <g fill="#fcbd1b" stroke="none">\n                <path transform="translate(0.000000,50.000000) scale(0.100000,-0.100000)" d="M155 469 c-33 -16 -75 -32 -92 -35 -33 -6 -33 -7 -33 -64 0 -77 31 -175 80 -247 38 -58 114 -123 143 -123 23 0 111 84 147 140 42 65 70 157 70 230 0 57 0 58 -32 64 -18 3 -62 19 -96 36 -78 37 -110 37 -187 -1z m158 -21 c23 -12 60 -27 82 -33 37 -11 40 -15 43 -52 7 -89 -70 -244 -151 -303 l-41 -30 -40 34 c-83 68 -152 212 -144 301 3 35 7 39 43 50 22 6 58 21 80 33 51 27 76 27 128 0z"/>\n                <path transform="translate(6.000000,0.000000) scale(1.50000,1.50000)" d="M21.2692308,17.715332 C21.6834443,17.715332 22.0192308,18.0511185 22.0192308,18.465332 C22.0192308,18.8450278 21.7370769,19.158823 21.3710013,19.2084854 L21.2692308,19.215332 L3.73076923,19.215332 C3.31655567,19.215332 2.98076923,18.8795456 2.98076923,18.465332 C2.98076923,18.0856363 3.26292311,17.7718411 3.62899867,17.7221786 L3.73076923,17.715332 L21.2692308,17.715332 Z M6.91566775,4.0817669 L10.6299993,4.47215888 L13.9910832,7.0874828 L17.2379523,6.45433797 C18.439153,6.2198849 19.6786977,6.36413919 20.7878461,6.85966265 L21.0414119,6.98023728 L21.2898875,7.11320806 C21.6156146,7.29761502 21.870712,7.58517559 22.0149712,7.9305644 C22.3538887,8.74200917 22.0109394,9.6678338 21.2479992,10.0705048 L21.1090562,10.136004 L10.3667655,14.6227546 C9.21562323,15.1035541 7.96206796,15.287198 6.7213858,15.156797 C6.34167317,15.1168876 5.99212379,14.931624 5.74592872,14.639798 C5.31815203,14.1327352 5.29016664,13.4219182 5.62945184,12.8907888 L5.71425322,12.7715847 L5.76955246,12.707888 L3.42791466,9.2803437 L8.27223686,9.7895025 L8.92833973,10.2254722 L9.97348615,9.7239725 L6.91566775,4.0817669 Z M9.59114744,5.8708997 L12.0439151,10.3950474 L8.80800884,11.9477104 L7.74666055,11.2415191 L6.49455749,11.1099178 L7.76318013,12.9662308 L6.92940165,13.6693925 L7.17556377,13.6887394 C7.86975264,13.7266097 8.56446751,13.642281 9.22813704,13.4403785 L9.51057405,13.346664 L9.78865733,13.2386336 L20.5309481,8.75188296 C20.625696,8.71230945 20.6704237,8.60342043 20.6308502,8.50867254 C20.6149416,8.47058392 20.5868101,8.43887245 20.5508897,8.41853651 C19.7038656,7.93900284 18.7243969,7.75344261 17.7647217,7.88661066 L17.5253033,7.92655717 L13.6093995,8.69087209 L10.0466385,5.91877374 L9.59114744,5.8708997 Z"/>\n            </g>\n        </svg>\n        '},e.prototype.displayPilotOnIcon=function(){this.featurePilotButton.innerHTML='\n        <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="50.000000px" height="50.000000px" viewBox="0 0 50.000000 50.000000" preserveAspectRatio="xMidYMid meet">\n            <g fill="#33691e" stroke="none">\n                <path transform="translate(0.000000,50.000000) scale(0.100000,-0.100000)" d="M155 469 c-33 -16 -75 -32 -94 -35 l-33 -7 4 -76 c8 -127 69 -246 163 -319 23 -18 49 -32 57 -32 24 0 112 83 148 140 42 65 70 157 70 230 0 57 0 58 -32 64 -18 3 -62 19 -96 36 -78 37 -110 37 -187 -1z"/>\n                <path transform="translate(6.000000,0.000000) scale(1.50000,1.50000)" fill="#fcbd1b" d="M21.2692308,17.715332 C21.6834443,17.715332 22.0192308,18.0511185 22.0192308,18.465332 C22.0192308,18.8450278 21.7370769,19.158823 21.3710013,19.2084854 L21.2692308,19.215332 L3.73076923,19.215332 C3.31655567,19.215332 2.98076923,18.8795456 2.98076923,18.465332 C2.98076923,18.0856363 3.26292311,17.7718411 3.62899867,17.7221786 L3.73076923,17.715332 L21.2692308,17.715332 Z M6.91566775,4.0817669 L10.6299993,4.47215888 L13.9910832,7.0874828 L17.2379523,6.45433797 C18.439153,6.2198849 19.6786977,6.36413919 20.7878461,6.85966265 L21.0414119,6.98023728 L21.2898875,7.11320806 C21.6156146,7.29761502 21.870712,7.58517559 22.0149712,7.9305644 C22.3538887,8.74200917 22.0109394,9.6678338 21.2479992,10.0705048 L21.1090562,10.136004 L10.3667655,14.6227546 C9.21562323,15.1035541 7.96206796,15.287198 6.7213858,15.156797 C6.34167317,15.1168876 5.99212379,14.931624 5.74592872,14.639798 C5.31815203,14.1327352 5.29016664,13.4219182 5.62945184,12.8907888 L5.71425322,12.7715847 L5.76955246,12.707888 L3.42791466,9.2803437 L8.27223686,9.7895025 L8.92833973,10.2254722 L9.97348615,9.7239725 L6.91566775,4.0817669 Z M9.59114744,5.8708997 L12.0439151,10.3950474 L8.80800884,11.9477104 L7.74666055,11.2415191 L6.49455749,11.1099178 L7.76318013,12.9662308 L6.92940165,13.6693925 L7.17556377,13.6887394 C7.86975264,13.7266097 8.56446751,13.642281 9.22813704,13.4403785 L9.51057405,13.346664 L9.78865733,13.2386336 L20.5309481,8.75188296 C20.625696,8.71230945 20.6704237,8.60342043 20.6308502,8.50867254 C20.6149416,8.47058392 20.5868101,8.43887245 20.5508897,8.41853651 C19.7038656,7.93900284 18.7243969,7.75344261 17.7647217,7.88661066 L17.5253033,7.92655717 L13.6093995,8.69087209 L10.0466385,5.91877374 L9.59114744,5.8708997 Z"></path>\n            </g>\n        </svg>\n        '},e}();t.FeaturePilotModule=c},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(145);var r=n(347),i=n(514);r.default(window,"Helix",null);var o=window.__platformConfig;new i.AsbHelixComposer(o).configureHelixContainer(),Helix.Container.start()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsbHelixComposer=void 0;var r=n(433),i=n(442),o=n(445),a=n(448),s=n(143),c=n(144),u=n(470),p=n(487),l=n(504),d=n(68),f=function(){function e(e){this.configuration=e}return e.prototype.configureHelixContainer=function(e){void 0===e&&(e={});var t=this.configure(e),n=t.components;return n.preloadedData&&n.preloadedData.correlationId?n.Instrumentation.setCorrelationId(n.preloadedData.correlationId):n.Instrumentation.newCorrelationId(),this.instantiateHelixContainerOnlinePerformanceModule(t),this.instantiateHelixFrameworkContainerComposeModule(t),n.asbContainerConfigMgr=p.ContainerConfigMgr(n.Log),this.instantiateHelixContainerSharedNotificationServiceModule(t),this.instantiateHelixContainerSharedNavigationModule(t),this.instantiateHelixFrameworkContainerApiModule(t,this.configuration.preloadedData),this.instantiateHelixContainerOnlineUiHandlerModule(t,this.configuration.hasHeader),this.instantiateHelixContainerOnlineExtensionsModule(t),n.regionManager.compose(n.Log,t),this.attachClientCallbackEventHandlers(t),this.attachClientCallbackAsyncEventHandlers(t),this.attachHelixMessageHandlers(t),this.attachAjaxEventHandlersAndFilters(t),this.exposeGlobalInterfaces(t),t},e.prototype.exposeGlobalInterfaces=function(e){var t=e.components;Helix.Container.TokenManager=t.asbTokenManager,window.__ContainerApp={component:{backToOnClick:function(){return t.regionManager.back()},isModal:function(){return window.location.href.indexOf("ismodal=")>0},navigateLayout:function(e){e=e.toLowerCase().replace(/^\/service\//,""),t.regionManager.containerLaunchLayout(e)}}}},e.prototype.instantiateHelixContainerOnlinePerformanceModule=function(e){var t=e.components,n=Helix.Container.getContainerId();t.asbPerformanceModule=a.Performance(window,t.Instrumentation,t.State),"function"==typeof window.__HelixLogExt&&window.__HelixLogExt(e),t.asbPerformanceModule.startUpSetup(t.Instrumentation,n)},e.prototype.instantiateHelixFrameworkContainerComposeModule=function(e){var t=e.components,n=r.CommonUtils;t.asbScrollingModule=u.AsbContainerScrollingModule(t.Messaging,t.Constants,document,window,t.State.sharedContext,t.ContextManager.setSharedContext),document.addEventListener("scroll",t.asbScrollingModule._broadcastScrollYPosition),t.asbViewportDimensionModule=u.AsbContainerViewportDimensionModule(window,t.State.sharedContext,t.ContextManager.setSharedContext),window.addEventListener("resize",t.asbViewportDimensionModule.handleViewportDimensionBroadcast),t.asbSessionTimeout=u.AsbContainerSessionTimeout(t.Log,n,t.ClientCallbacks,t.ContainerConstants,t.State,window,document),t.asbSessionTimeout.init(),t.asbSettings=new u.AsbContainerSettingsModule(t.State,t.Log,t.Messaging,t.Constants,t.Ajax,t.When,window),t.asbContainerServiceManager=new u.AsbContainerServiceManager(t.Bindings,t.ClientCallbacks,t.ContainerConstants,t.ContainerServices),t.asbContainerServiceManager.addContainerService(new u.AsbDocumentUploadContainerService(t)).addContainerService(new u.AsbPerformanceLoggerContainerService(t.Instrumentation,t.State,t.Log))},e.prototype.instantiateHelixContainerSharedNotificationServiceModule=function(e){var t=e.components;t.notificationService=new o.NotificationService(t.Log);var n=t.notificationService.getNotificationHandler();new o.HelixNotificationHandler(t.Log).registerNotificationHandler(n)},e.prototype.instantiateHelixContainerSharedNavigationModule=function(e){var t=r.Uri,n=r.HttpUtils,i=e.components;i.regionManager=new s.RegionManager(t);var o=i.regionManager,a=i.Log,c=i.notificationService,u=i.asbContainerConfigMgr,p=c.getNotificationHandler(),l=new s.NavigateToNotificationHandler(a,t,n);l.registerNotificationHandler(p);var d=new s.FeatureHistory(t,u,n,l,e.defaultGotoJunction,a,o);new s.NavigateBackNotificationHandler(d,a).registerNotificationHandler(p),new s.PushHistoryNotificationHandler(d,a).registerNotificationHandler(p),i.asbFeatureHistory=d},e.prototype.instantiateHelixFrameworkContainerApiModule=function(e,t){var n=e.components;t&&t.encryptionParams?n.asbEncryptionParams=t.encryptionParams:n.asbEncryptionParams=new c.AsbEncryptionParams(e.macKey,r.RandomUtils),n.asbMacService=new c.AsbMacService(e.flags,r.Base64Utils,r.HttpUtils,r.Uri,r.RandomUtils),n.asbPreloadManager=new c.AsbPreloadManager(t),n.asbTokenManager=new c.AsbTokenManager(n.ClientCallbacks,n.State,n.Ajax.Ajax,n.asbEncryptionParams,n.Constants,n.asbPreloadManager),n.asbDomainAPI=new c.AsbDomainApiModule(n.Log,n.State,n.Messaging,n.Ajax.Ajax,n.asbTokenManager,n.Handlers,n.asbContainerConfigMgr,n.Constants.TOPIC.FROM_APP,n.Constants.TOPIC.FROM_CONTAINER,n.Constants.AJAX,n.ContainerConstants.TOKEN_TYPE,Helix.Instrumentation,Helix.Container.getContainerId()),n.asbPreDataManager=new c.AsbPreDataManager(n.asbDomainAPI,n.asbContainerConfigMgr,n.ClientCallbacks,n.ContainerConstants.EVENTS),n.asbDomainAPI.setPreDataManager(n.asbPreDataManager),n.asbAjaxProcessorModule=new c.AsbAjaxProcessorModule(n.Log,n.asbTokenManager,n.asbMacService,n.State,e.security,n.Instrumentation,n.asbEncryptionParams,r.Uri,r.CommonUtils,r.HttpUtils),n.asbAjaxRequestsOverride=new c.AsbAjaxRequestsOverride(n.asbSettings,n.State,n.Ajax.XhrAdapter,n.ClientCallbacks,n.AppManagement,n.ContainerConstants,n.asbTokenManager,e.security,n.Instrumentation,n.Constants,n.asbPreloadManager)},e.prototype.instantiateHelixContainerOnlineUiHandlerModule=function(e,t){var n=e.components;n.asbBackgroundCustomisation=new l.BackgroundCustomisation,n.asbDialog=new l.Dialog,n.asbProgressIndicator=new l.ProgressIndicator,n.asbPageTitleUpdater=new l.PageTitleUpdater(document.title),n.asbUiInitCompleteHandlerModule=new l.HelixInitCompleteHandlerModule,n.asbAppViewResizeHandlerModule=new l.AppViewResizeHandlerModule(t),n.asbFeaturePilotModule=new l.FeaturePilotModule(e,d.AppDescriptor,r.getQueryParam),n.asbBackgroundCustomisation.init(document.body),n.asbDialog.init(document.body),n.asbProgressIndicator.init(document.body),n.asbPageTitleUpdater.init(),n.notificationService.registerNotificationHandler("progress",n.asbProgressIndicator.onEvent.bind(n.asbProgressIndicator)),n.notificationService.registerNotificationHandler("customisation",n.asbBackgroundCustomisation.onEvent.bind(n.asbBackgroundCustomisation)),n.notificationService.registerNotificationHandler(u.ViewportNotificationConst.typeRequest,n.asbViewportDimensionModule.handleViewportDimensionBroadcast.bind(n.asbViewportDimensionModule))},e.prototype.instantiateHelixContainerOnlineExtensionsModule=function(e){var t=e.components;t.modalFeatureHandler=new p.ModalFeatureHandler(t.State,t.AppManagement),p.widgetModalModule(e),t.setCookie=new p.SetCookie(r.CommonUtils),t.dialogEventHandler=new p.DialogEventHandler(t.Log,t.EventArgs),t.globalViewPortHandler=new p.GlobalViewportHandler(t.Constants,t.ViewPortManager,Helix.Container),t.asyncEventHandler=new p.AsyncEventHandler(t.Log),t.headerManager=window.__platformConfig.isMainYellow?new p.HeaderManager("/header2/header.aspx","form"):new p.HeaderManager("/header/header.aspx","form"),t.globalHeaderManager=new p.GlobalHeaderManager(t.regionManager,window.__platformConfig.hasHeader,t.headerManager),t.timeoutEventHandler=p.TimeoutEventHandler(t.Log,r.HttpUtils,t.asbContainerConfigMgr),t.getWidgetModalEventHandlers=p.getWidgetModalEventHandlers(t.Constants,t.Messaging,t.asbSessionTimeout),t.SessionTimersInitialize=p.sessionTimersInitialize(e),p.SiteCatHandler(t.Log,r.Uri,r.RandomUtils,r.HttpUtils,t.notificationService.getNotificationHandler())},e.prototype.attachClientCallbackEventHandlers=function(e){var t=Helix.Container.getContainerId(),n=e.components,r=n.ClientCallbacks,i=n.ContainerConstants,o=n.asbPreDataManager,a=n.State,c=n.Instrumentation,u=n.asbPerformanceModule,p=n.asbSessionTimeout,l=n.asbContainerServiceManager,d=n.regionManager,f=n.asbFeatureHistory,h=n.notificationService,E=n.asbUiInitCompleteHandlerModule,g=n.timeoutEventHandler,A=n.globalHeaderManager,v=n.SessionTimersInitialize,_=n.setCookie,I=n.asbFeaturePilotModule,S=n.Messaging,O=n.Constants,y=n.modalFeatureHandler;r.bind(i.EVENTS.ON_APP_CREATE_WINDOW,u.performanceObserver.attachPerformanceObserver,this),r.bind(i.EVENTS.ON_APP_LAUNCH_REQUEST,u.launchFeature,this,{State:a,Instrumentation:c,containerId:t}),r.bind(i.EVENTS.ON_APP_READY,u.appReadyHandle,this,{State:a,Instrumentation:c,containerId:t}),r.bind(i.EVENTS.ON_INIT_COMPLETE,_.setVisitInfoCookie,_,null),r.bind(i.EVENTS.ON_APP_LAUNCHED,o.callbackOnAppLaunch.bind(o)),r.bind(i.EVENTS.ON_INIT_COMPLETE,u.loadFeature,this,{State:a,Instrumentation:c,containerId:t},Helix.Constants.BINDINGS.APPEND),r.bind(i.EVENTS.ON_APP_READY,p.onAppReady,null,null),r.bind(i.EVENTS.ON_ASB_GET_LAST_ACTIVITY_TIME,p.onGetLastActivityTime,null,null),r.bind(i.EVENTS.ON_INIT_COMPLETE,l.init,l,null),r.bind(i.EVENTS.ON_APP_CLOSE,s.AppCloseEventModule(S,O,a),null,null);var m=s.AppClosedEventModule(f);r.bind(i.EVENTS.ON_APP_CLOSED,m,null,null),r.bind(i.EVENTS.ON_APP_READY,s.AppReadyEventHandler,null,null),r.bind(i.EVENTS.ON_INIT_COMPLETE,d.loadFeature,d,null,Helix.Constants.BINDINGS.PREPEND),r.bind(i.EVENTS.ON_APP_CREATE,(function(e){f.setLastLoadedFeatureId(e,e.destination.uid)}),f,null),r.bind(i.EVENTS.ON_CONTEXT_CHANGE,h.onContextChange,h,null),r.bind(i.EVENTS.ON_INIT_COMPLETE,E.handleInitComplete,E,null),r.bind(i.EVENTS.ON_INIT_COMPLETE,I.handleInitComplete,I,null),r.bind(i.EVENTS.ON_APP_CREATE,I.handlePioltIconVisibilityOnAppCreate,I,null),r.bind(i.EVENTS.ON_APP_READY,A.appReadyHandler,A,null),r.bind(i.EVENTS.ON_APP_LAUNCHED,y.onModalAppLaunchHandler,y,null),r.bind(i.EVENTS.ON_APP_CLOSED,y.onModalFeatureClosedHandler,y,null),r.bind(i.EVENTS.ON_ASB_TIMEOUT_INIT,v.sessionKeepAlive),r.bind(i.EVENTS.ON_ASB_TIMEOUT,g.timeout,null,null)},e.prototype.attachClientCallbackAsyncEventHandlers=function(e){var t=e.components,n=t.ClientCallbacks,r=t.ContainerConstants,i=t.asbAjaxRequestsOverride,o=t.asbTokenManager,a=t.regionManager,s=t.asbDialog,c=t.asyncEventHandler,u=t.globalViewPortHandler,p=t.asbAppViewResizeHandlerModule;n.bindAsync(r.EVENTS.ON_AJAX_REQUEST,i.callbackAsyncOnAjaxRequest.bind(i)),n.bindAsync(r.EVENTS.ON_APP_AUTH_TOKEN_REQUEST,o.getAppAuthToken.bind(o)),n.bindAsync(r.EVENTS.ON_APP_LAUNCH_REQUEST,a.launchFeature.bind(a)),n.bindAsync(r.EVENTS.ON_ASB_SHOW_DIALOG,s.onEvent.bind(s)),n.bindAsync(r.EVENTS.ON_PROVIDE_APP_VIEW_PORT_ID,u.onProvideAppViewPortId.bind(u)),n.bindAsync(r.EVENTS.ON_CREATE_VIEWPORTS,u.onCreateViewports.bind(u)),n.bindAsync(r.EVENTS.ON_QUEUE_APP_MESSAGES,c.onQueueAppMessages.bind(c)),n.bindAsync(r.EVENTS.ON_PREPARE_LAUNCH_PARAMETERS,c.onPrepareLaunchParameters.bind(c)),n.bindAsync(r.EVENTS.ON_APP_VIEW_RESIZE,p.handleAppViewResize.bind(p))},e.prototype.attachHelixMessageHandlers=function(e){var t=e.components,n=t.Handlers,r=t.Constants,i=t.asbDomainAPI,o=t.asbScrollingModule,a=t.asbSettings,s=t.dialogEventHandler,c=t.getWidgetModalEventHandlers,u=t.ContextManager;n.addMessageHandler(r.TOPIC.FROM_APP.CALL_API_REQUEST,i.messageHandlerOnCallDomainApi.bind(i)),n.addMessageHandler(r.TOPIC.FROM_APP.SCROLLBY_SCROLL,o._onScrollBy.bind(o)),n.addMessageHandler(r.TOPIC.FROM_APP.SCROLLTO_SCROLL,o._onScrollTo.bind(o)),n.addMessageHandler(r.TOPIC.FROM_APP.GET_SCROLL_INFO,o._onGetScrollInfo.bind(o)),n.addMessageHandler(r.TOPIC.FROM_APP.SET_SETTING,a.onSetSetting.bind(a)),n.addMessageHandler(r.TOPIC.FROM_APP.READ_SETTING,a.onReadSetting.bind(a)),n.addMessageHandler(r.TOPIC.FROM_APP.GET_ALL_SETTINGS,a.onGetAllSettings.bind(a)),n.addMessageHandler(r.TOPIC.FROM_APP.SHOW_DIALOG,s._onShowDialog.bind(s)),n.addMessageHandler(r.TOPIC.FROM_APP.SHOW_CUSTOM_WIDGET_MODAL,c.showCustomWidgetModalMessageHandler),n.addMessageHandler(r.TOPIC.FROM_APP.CLOSE_CUSTOM_WIDGET_MODAL,c.closeCustomWidgetModalMessageHandler),n.addMessageHandler(r.TOPIC.FROM_APP.CONTEXT_UPDATE,u.onContextUpdate)},e.prototype.attachAjaxEventHandlersAndFilters=function(e){var t=e.components,n=t.Constants,r=t.asbAjaxProcessorModule,i=e.components.Ajax.Ajax;i.registerRequestProcessor(n.PROCESSORS.ASB_AJAX_API,r.requestProcessorAsbAjaxApi.bind(r)),i.registerRequestProcessor(n.PROCESSORS.ASB_AJAX_MAC_HEADER,r.requestProcessorAsbAjaxMacHeader.bind(r)),i.registerRequestProcessor(n.PROCESSORS.ASB_CONFIGURATION,r.requestProcessorAsbConfiguration.bind(r)),i.registerRequestProcessor(n.PROCESSORS.ASB_CORRELATION,r.requestProcessorAsbCorrelation.bind(r)),i.registerRequestProcessor(n.PROCESSORS.ASB_CSRF,r.requestProcessorAsbCsrf.bind(r)),i.registerRequestProcessor(n.PROCESSORS.ASB_GET_URL,r.requestProcessorAsbGetUrl.bind(r)),i.registerRequestProcessor(n.PROCESSORS.ASB_MAC_DEBUG,r.requestProcessorAsbMacDebug.bind(r)),i.registerRequestProcessor(n.PROCESSORS.ASB_MAC_SERVICE,r.requestProcessorAsbMacService.bind(r)),i.registerRequestProcessor(n.PROCESSORS.ASB_INSTRUMENTATION,r.requestProcessorAsbInstrumentation.bind(r)),i.registerRequestProcessorFilter(n.PROCESSORS.ASB_AJAX_API,r.requestProcessorFilterAsbAjaxApi.bind(r)),i.registerRequestProcessorFilter(n.PROCESSORS.ASB_AJAX_MAC_HEADER,r.requestProcessorFilterAsbAjaxMacHeader.bind(r)),i.registerRequestProcessorFilter(n.PROCESSORS.ASB_CONFIGURATION,r.requestProcessorFilterAsbConfiguration1.bind(r)),i.registerRequestProcessorFilter(n.PROCESSORS.ASB_CONFIGURATION,r.requestProcessorFilterAsbConfiguration2.bind(r)),i.registerRequestProcessorFilter(n.PROCESSORS.ASB_CSRF,r.requestProcessorFilterAsbCsrf.bind(r)),i.registerRequestProcessorFilter(n.PROCESSORS.ASB_GET_URL,r.requestProcessorFilterAsbGetUrl.bind(r)),i.registerRequestProcessorFilter(n.PROCESSORS.ASB_MAC_DEBUG,r.requestProcessorFilterAsbMacDebugAndService.bind(r)),i.registerRequestProcessorFilter(n.PROCESSORS.ASB_MAC_SERVICE,r.requestProcessorFilterAsbMacDebugAndService.bind(r)),i.registerRequestProcessorFilter(n.PROCESSORS.ASB_INSTRUMENTATION,r.requestProcessorFilterAsbInstrumentation.bind(r)),i.registerRequestProcessorFilter(n.PROCESSORS.INSTRUMENTATION,r.requestProcessorFilterInstrumentation.bind(r)),i.registerSuccessProcessor(n.PROCESSORS.ASB_MAC_SERVICE,r.successProcessorAsbMacService.bind(r)),i.registerSuccessProcessorFilter(n.PROCESSORS.CONTAINER_SESSION,r.successProcessorFilterContainerSession.bind(r)),i.registerSuccessProcessorFilter(n.PROCESSORS.ASB_MAC_SERVICE,r.successProcessorFilterAsbMacService.bind(r))},e.prototype.configure=function(e){return void 0===e&&(e={}),e=Object.assign({containerId:this.configuration.containerId,ajaxUrl:"/",flags:parseInt(this.configuration.containerFlags||"0"),macKey:this.configuration.macKey,defaultGotoJunction:this.configuration.defaultGotoJunction,useGetForConfiguration:!0,sessionTimeoutDuration:66e4,basePath:this.configuration.containerServicesUrl,components:{},modules:{},callbacks:{}},e),e=this.attachOnComposingHandlers(e),this.overrideParametersIn(e),Helix.Container.configure(e),e},e.prototype.attachOnComposingHandlers=function(e){var t=this,n=r.CommonUtils;return e.onComposing=Object.assign({Authentication:function(e){return e.components.OpenAjax=new p.Asb_OpenAjax_PostMessage(e.components,new i.default)},DefaultLogging:function(e){var n=e.components,r=n.DefaultLogging,i=n.Log;t.configuration.consoleLoggerEnabled||i.removeListener(".*",r.Console)},ActionParameters:function(e){n.deepAssign(e.components.Constants,u.AsbCommonConstants)},ProtocolLib:function(e){var t=e.components.ProtocolLib.Protocol.get("Consumer");u.CP_1_2_1_Module(t,e.components.Constants),u.CP_1_2_2_Module(t,e.components.Constants),u.CP_1_2_3_Module(t,e.components.Constants),u.CP_1_2_4_Module(t,e.components.Constants),u.CP_1_4_1_Module(t,e.components.Constants),u.CP_1_4_2_Module(t,e.components.Constants),n.deepAssign(e.components.ClientEvents,u.AsbContainerClientEvents)},AjaxProcessorsContainer:function(e){e.components.AjaxProcessorsHeaders=function(){}},Themes:function(e){n.deepAssign(e.components.ContainerConstants,u.AsbContainerConstants)}},e.onComposing),e},e.prototype.overrideParametersIn=function(e){e.security=e.security||{},e.security.asbGetTokens=u.AsbCommonConstants.ROUTES.TOKENS,e.security.asbGetContainerSettings=u.AsbCommonConstants.ROUTES.CONTAINER_SETTINGS,e.security.asbGetConfiguration=u.AsbCommonConstants.ROUTES.CONFIGURATION,e.security.asbPostInstrumentation=u.AsbCommonConstants.ROUTES.INSTRUMENT,e.security.ping=u.AsbCommonConstants.ROUTES.INSTRUMENT,e.security.keepAliveInterval=120},e}();t.AsbHelixComposer=f},function(e,t,n){"use strict";n.r(t)},,function(e,t,n){n(513),n(518),n(512),e.exports=n(515)},function(e,t,n){"use strict";n.r(t)}]);