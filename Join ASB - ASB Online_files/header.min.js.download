!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./build/",n(n.s=26)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChildFrame=t.ChildFrameType=void 0,function(e){e[e.mainMenu=1]="mainMenu",e[e.notifications=2]="notifications",e[e.userMenu=4]="userMenu",e[e.all=7]="all",e[e.back=8]="back"}(t.ChildFrameType||(t.ChildFrameType={}));var o=function(){function e(){}return e.prototype.setHeaderFrame=function(){window.frameElement&&(this.headerFrame=window.frameElement.parentElement)},e.prototype.showHeaderFrame=function(){this.headerFrame&&(this.headerFrame.setAttribute("aria-hidden","false"),this.headerFrame.style.display="block")},e.prototype.hideHeaderFrame=function(){this.headerFrame&&(this.headerFrame.setAttribute("aria-hidden","true"),this.headerFrame.style.display="none")},e.prototype.handleFrameOpened=function(e){(e&this.type)===e?(this.onFrameOpened(!0,e),this.showHeaderFrame()):(this.onFrameOpened(!1,e),this.hideHeaderFrame())},e.prototype.handleFrameClosed=function(e){(e&this.type)===e?(this.onFrameClosed(!0,e),this.hideHeaderFrame()):this.onFrameClosed(!1,e)},e.prototype.handleTabIn=function(e){(e&this.type)===e?this.onTabIn(!0,e):this.onTabIn(!1,e)},e.prototype.handleTabOut=function(e){(e&this.type)===e?this.onTabOut(!0,e):this.onTabOut(!1,e)},e}();t.ChildFrame=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAffinity=t.getQueryString=t.isFNC=t.isQA=t.getFstJunction=t.isFST=void 0;var o=n(2);function i(e,t){void 0===t&&(t=o.getLocation()),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}t.isFST=function(e){return void 0===e&&(e=o.getLocation()),/^http(s)?:\/\/webappisamdev/.test(e)},t.getFstJunction=function(e){void 0===e&&(e=o.getLocation());var t=/^https:\/\/webappisamdev\.asbbank\.co\.nz\/([\w]+)\//.exec(e);return t?t[1]:""},t.isQA=function(e){return void 0===e&&(e=o.getLocation()),/^http(s)?:\/\/qaonline.asb.co.nz/.test(e)},t.isFNC=function(e){return void 0===e&&(e=o.getLocation()),/^http(s)?:\/\/[a-zA-Z\.]+\/fnc/.test(e)},t.getQueryString=i,t.getAffinity=function(e){return void 0===e&&(e=o.getLocation()),i("affinity",e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLocation=t.setLocation=void 0;var o="undefined"!=typeof window?window.top.location.href:"";t.setLocation=function(e){o=e},t.getLocation=function(){return o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceUtils=t.DomHelper=t.isDevice=void 0,t.isDevice=function(){return"orientation"in window};var o=function(){function e(e){this.arDomRefs=e,this.domRefs={}}return e.prototype.init=function(){console.log("common-header::dom-help:init"),this.setDomRefsFrom(this.arDomRefs)},e.prototype.log=function(e,t){t=t||"log",console[t]&&console[t](e)},e.prototype.setDomRefsFrom=function(e){var t=this;e.forEach((function(e){if(e&&e.name&&e.selector){if(t.domRefs[e.name]=document.querySelectorAll(e.selector),!t.domRefs[e.name])throw new Error("Could not set DOM ref for "+e.name);t.attachHandlersFor(e.events,t.domRefs[e.name])}}))},e.prototype.enumerateElements=function(e,t){for(var n=0;n<e.length;n++)t(e[n])},e.prototype.attachHandlersFor=function(e,t){var n=this;e&&t&&e.forEach((function(e){e&&e.name&&e.handler&&n.enumerateElements(t,(function(t){t&&t.addEventListener(e.name,e.handler)}))}))},e.prototype.addClass=function(e,t){e&&t&&this.enumerateElements(e,(function(e){e&&(e.classList.contains(t)||e.classList.add(t))}))},e.prototype.addAttribute=function(e,t,n){e&&t&&this.enumerateElements(e,(function(e){e&&e.setAttribute(t,n)}))},e.prototype.hasClass=function(e,t){return e&&t&&this.enumerateElements(e,(function(e){if(e&&e.classList.contains(t))return!0})),!1},e.prototype.focus=function(e){e&&e[0]&&e[0].focus()},e.prototype.removeClass=function(e,t){e&&t&&this.enumerateElements(e,(function(e){t.split(" ").forEach((function(t){e&&e.classList.remove(t)}))}))},e.prototype.setText=function(e,t){e&&t&&this.enumerateElements(e,(function(e){e&&(e.innerHTML=t)}))},e.prototype.getRequiredOffcanvasHeight=function(){var e,t;return e=window.innerHeight,t=document.body.offsetHeight,Math.max(e,t)-60},e.prototype.openFrame=function(e,t){void 0===t&&(t=0),e&&(e.style.maxHeight="none",t&&(e.style.height=t+"px"))},e.prototype.closeFrame=function(e){e&&(e.style.maxHeight="0")},e}();t.DomHelper=o;var i=function(){function e(){this.userAgent=navigator.userAgent,this.isWindowsPhone()?(this.removeClass("appleios ipod ipad iphone"),this.addClass("no-android"),this.addClass("windowsphone")):(this.addClass("no-windowsphone"),this.addClass(this.isAndroid()?"android":"no-android")),this.isMacOs()?this.addClass("macos"):this.addClass("no-macos")}return e.prototype.addClass=function(e){document.querySelector("html").classList.add(e)},e.prototype.removeClass=function(e){document.querySelector("html").classList.remove(e)},e.prototype.isAndroid=function(){return this.userAgent.indexOf("Mozilla/5.0")>-1&&this.userAgent.indexOf("Android ")>-1&&this.userAgent.indexOf("AppleWebKit")>-1},e.prototype.isMacOs=function(){return this.userAgent.indexOf("Mac OS")>-1&&this.userAgent.indexOf("Macintosh")>-1&&this.userAgent.indexOf("AppleWebKit")>-1},e.prototype.isAppleIos=function(){return this.userAgent.indexOf("iPhone OS")>-1&&this.userAgent.indexOf("AppleWebKit")>-1},e.prototype.getIosVersion=function(){var e=-1;if(this.isAppleIos())try{e=parseInt(/OS\s(\d+)_\d+/.exec(this.userAgent)[1])}catch(e){}return e},e.prototype.getIeVersion=function(){var e=-1;return this.isWindowsNT()&&(null!==/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(this.userAgent)&&(e=parseInt(RegExp.$1)),-1===e&&null!==/Trident.*rv:([\d.]+)/.exec(this.userAgent)&&(e=parseInt(RegExp.$1))),e},e.prototype.isWindowsPhone=function(){return this.userAgent.indexOf("Windows Phone")>-1},e.prototype.isWindowsNT=function(){return this.userAgent.indexOf("Windows NT")>-1},e}();t.DeviceUtils=i},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setSessionCookie=t.getCookie=void 0,t.getCookie=function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),o=0;o<n.length;o++){for(var i=n[o];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""},t.setSessionCookie=function(e,t){document.cookie=e+"="+t+"; path=/"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFncJunction=t.init=void 0;var o,i=n(1),r=n(2);function a(e){void 0===e&&(e=r.getLocation());var t="";if(i.isFNC(e)){var n=/^http(?:s)?:\/\/[a-zA-Z\.]+\/(fnc[_a-zA-Z\d]*)/.exec(e);n[1]&&(t=n[1])}var o=i.getAffinity(e);if(o&&""!=o&&(t=o),!t){var a=i.getQueryString(e,"referrer");/fnc[_a-zA-Z\d]*/.test(a)&&(t=a)}return t||(t=i.isFST(e)?"fnc104":i.isQA(e)?"fnc1":"fnc"),t}t.init=function(e){o=a(e)},t.getFncJunction=function(){return o||(o=a()),o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addReferrerTo=t.ensureJunction=t.mapToEnvironment=void 0;var o=n(6),i=n(1);function r(e){return e.length&&"/"!==e[0]&&0!==e.indexOf("http")&&(e="/"+e),e}function a(e){return i.isFNC()&&(e.indexOf("?")<0?e+="?":e+="&",e+="referrer="+o.getFncJunction()),e}t.mapToEnvironment=function(e){if(e.indexOf("/fnc/")>-1){var t=o.getFncJunction();e=a(e=e.replace("/fnc/","/"+t+"/"))}return e=r(e)},t.ensureJunction=r,t.addReferrerTo=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Navigation=void 0;var o=n(9),i=n(10),r=n(7);!function(e){function t(){return/^http(s)?:\/\/online.asb.co.nz/.test(parent.location.href)}function n(){return t()?"https://www.asb.co.nz":"https://qa.asb.co.nz"}function a(){return t()?"https://online.asb.co.nz":"https://qaonline.asb.co.nz"}e.getAsbWebUrl=n,e.getAsbIamUrl=a,e.init=function(t){var u;s===t&&0!==t||(u=i.UserContext.getInstance(),e.mainMenu.length=0,e.mainMenu.push({name:"Everyday banking",url:r.mapToEnvironment("/fnc/1/goto/balances"),children:[{name:"Accounts",url:r.mapToEnvironment("/fnc/1/goto/balances")},{name:"Make a payment",url:r.mapToEnvironment("/fnc/1/goto/oneOffPayment")},{name:"Transfer money",url:r.mapToEnvironment("/fnc/1/goto/transfers")},{name:"Upcoming payments",url:r.mapToEnvironment("/fnc/1/goto/upcomingPayments")},u.isTwoToSign?{name:"Approve payments",url:r.mapToEnvironment("/service/payments/approvals")}:null,{name:"Search and export transactions",url:r.mapToEnvironment("/fnc/1/goto/statements")}]}),e.mainMenu.push({name:"Cards",url:r.mapToEnvironment("/fnc/1/goto/balances"),children:[{name:"Apply for a credit card",url:r.mapToEnvironment("/service/forms/ChooseCard")},u.hasPayTagOrCreditCard||u.hasPayTagOrDebitCard?{name:"Replace card",url:r.mapToEnvironment("/service/forms/cr")}:null,u.allowBalanceTransfer?{name:"Change card type",url:r.mapToEnvironment("/fnc/1/goto/feature/changeMyCardType")}:null,u.allowBalanceTransfer?{name:"Balance transfer",url:r.mapToEnvironment("/fnc/1/goto/feature/balanceTransfer")}:null,u.hasPayTag?{name:"ASB PayTag",url:r.mapToEnvironment("/fnc/1/goto/myPayTag")}:null]}),e.mainMenu.push({name:"Home loans",url:r.mapToEnvironment("/fnc/1/goto/homecentral")}),e.mainMenu.push({name:"KiwiSaver and investments",url:r.mapToEnvironment("/fnc/1/goto/wealthcentral")}),e.mainMenu.push({name:"Insurance",url:r.mapToEnvironment("/service/insurance/hub")}),e.mainMenu.push({name:"Share trading",url:r.mapToEnvironment("/ost")}),e.mainMenu.push({name:"Financial wellbeing",url:r.mapToEnvironment("/fnc/1/goto/balances"),children:[{name:"Financial wellbeing tool",url:n()+"/banking-with-asb/financial-wellbeing-tool.html"},{name:"Rainy Day Savings Planner",url:a()+"/digital/learn/rainydaysavingsplanner"},{name:"Support Finder",url:n()+"/banking-with-asb/support-finder.html"},{name:"Save the Change",url:r.mapToEnvironment("/fnc/1/goto/savethechange")},{name:"Track My Spending",url:r.mapToEnvironment("/fnc/1/goto/opf")},{name:"Budget calculator",url:r.mapToEnvironment("/fnc/1/goto/budgetcalculator")},{name:"Net worth calculator",url:r.mapToEnvironment("/fnc/1/goto/balancesheet")}]}),function e(t,n){void 0===n&&(n=void 0),t.forEach((function(t){t&&(n&&(t.parent=n),t.children&&e(t.children,t))}))}(e.mainMenu),e.otherMainMenu.length=0,e.otherMainMenu.push({name:"Documents",url:r.mapToEnvironment("/fnc/1/goto/documents")}),e.otherMainMenu.push({name:"How to Hub",url:r.mapToEnvironment(n()+"/how-to")}),e.otherMainMenu.push({name:"My messages",url:r.mapToEnvironment("/fnc/1/goto/messageCentre")}),e.otherMainMenu.push({name:"Help",url:n()+"/help/tag.fastnet-classic.html"}),e.otherMainMenu.push({name:"Notifications",url:r.mapToEnvironment("/service/notifications")}),e.otherMainMenu.push({name:"Contact us",url:r.mapToEnvironment("/service/customer/contactus")}),e.otherMainMenu.push({name:"About security",url:n()+"/banking-with-asb/protecting-yourself-online.html"}),e.otherMainMenu.push({name:"Leave feedback",url:n()+"/feedback/feedback.fastnet-classic.html"}),function(t){e.userMenuL.length=0,e.userMenuR.length=0;var n=(t&o.Switch.alertsFeatureEnabled)===o.Switch.alertsFeatureEnabled?"/service/alerts":"/fnc/1/goto/alerts";e.userMenuL.push({name:"Personal profile",url:r.mapToEnvironment("/service/customer/profile")}),e.userMenuL.push({name:"Update tax details",url:r.mapToEnvironment("/service/customer/taxdetails")}),e.userMenuL.push({name:"Manage alerts",url:r.mapToEnvironment(n)}),e.userMenuL.push({name:"Communications",url:r.mapToEnvironment("/service/customer/Communications")}),e.userMenuL.push({name:"Hide or show accounts",url:r.mapToEnvironment("/fnc/1/goto/hideShowAccounts")}),e.userMenuL.push({name:"Set default account",url:r.mapToEnvironment("/fnc/1/goto/defaultAccount")}),e.userMenuL.push({name:"ATM favourite",url:r.mapToEnvironment("/fnc/1/goto/ATMFavourite")}),e.userMenuR.push({name:"Security Checkup",url:r.mapToEnvironment("/service/customer/security")}),e.userMenuR.push({name:"Change password",url:r.mapToEnvironment("/fnc/1/goto/changePassword")}),e.userMenuR.push({name:"Card PIN",url:r.mapToEnvironment("/fnc/1/goto/PINSelect")}),e.userMenuR.push({name:"Set Netcode limit",url:r.mapToEnvironment("/fnc/1/goto/netcodeLimit")}),e.userMenuR.push({name:"Set Netcode at login",url:r.mapToEnvironment("/fnc/1/goto/netcodeAtSignon")}),e.userMenuR.push({name:"Set Netcode fee account",url:r.mapToEnvironment("/fnc/1/goto/netcodeAccount")}),e.userMenuR.push({name:"Accounting set up",url:r.mapToEnvironment("/fnc/1/goto/AccountingSetup")}),e.userMenuR.push({name:"Manage devices",url:r.mapToEnvironment("/fnc/1/goto/manageDevices")}),e.userMenuL.length>e.userMenuR.length?e.userMenuR.push({name:"",url:""}):e.userMenuL.length<e.userMenuR.length&&e.userMenuL.push({name:"",url:""})}(t||s),t>0&&(s=t))};var s=-1;e.misc={pkmslogout:"/pkmslogout?goto="+n()+"/logout/logout-fnc.html"},e.mainMenu=[],e.otherMainMenu=[],e.userMenuL=[],e.userMenuR=[]}(t.Navigation||(t.Navigation={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Switch=void 0,function(e){e[e.alertsFeatureEnabled=2]="alertsFeatureEnabled",e[e.insuranceEnabled=4]="insuranceEnabled"}(t.Switch||(t.Switch={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserContext=void 0;var o,i=n(5);!function(e){e[e.hasTrueRewards=1]="hasTrueRewards",e[e.hasCreditCards=2]="hasCreditCards",e[e.hasNetcode=4]="hasNetcode",e[e.isSTCRegistered=8]="isSTCRegistered",e[e.hasLoanProductsEligibleForPayment=16]="hasLoanProductsEligibleForPayment",e[e.hasMobileNetcode=32]="hasMobileNetcode",e[e.isPaymentMenuLocked=64]="isPaymentMenuLocked",e[e.hasPayTag=128]="hasPayTag",e[e.hasPayTagOrCreditCard=256]="hasPayTagOrCreditCard",e[e.hasPayTagOrDebitCard=512]="hasPayTagOrDebitCard",e[e.allowBalanceTransfer=1024]="allowBalanceTransfer",e[e.isEligibleForForeignCurrencyAccount=2048]="isEligibleForForeignCurrencyAccount",e[e.isEligibleForInvestmentFund=4096]="isEligibleForInvestmentFund",e[e.isHomeLoanAppRewriteEnabled=8192]="isHomeLoanAppRewriteEnabled",e[e.isCustomerAsbBranded=16384]="isCustomerAsbBranded",e[e.isBankingHubEnabled=32768]="isBankingHubEnabled",e[e.isOrderForeignCurrencyEnabled=65536]="isOrderForeignCurrencyEnabled",e[e.isTwoToSign=131072]="isTwoToSign"}(o||(o={}));var r="products="+(o.hasTrueRewards|o.hasCreditCards|o.hasNetcode|o.isSTCRegistered|o.hasLoanProductsEligibleForPayment|o.hasMobileNetcode|o.isPaymentMenuLocked|o.hasPayTag|o.hasPayTagOrCreditCard|o.hasPayTagOrDebitCard|o.allowBalanceTransfer|o.isEligibleForForeignCurrencyAccount|o.isEligibleForInvestmentFund|o.isHomeLoanAppRewriteEnabled|o.isCustomerAsbBranded|o.isBankingHubEnabled|o.isOrderForeignCurrencyEnabled|o.isTwoToSign)+"&switches=0",a=function(){function e(t){void 0===t&&(t=e.getUserContext()),this.ctx={products:0,switches:0},this.rawCtx="",this.setContextFrom(t)}return e.getInstance=function(){return this._instance},e.getUserContext=function(){return this.getUserContextFromCookie()||r},e.getUserContextFromCookie=function(){var e=i.getCookie("usermenucontext");return e&&console.log("usermenucontext retrieved from cookie",e),e},e.prototype.printContext=function(){console.log("\n            =====================================================\n            User Context: "+this.rawCtx+"\n            =====================================================\n            hasTrueRewards: "+this.hasTrueRewards+"\n            hasCreditCards: "+this.hasCreditCards+"\n            hasNetcode: "+this.hasNetcode+"\n            isSTCRegistered: "+this.isSTCRegistered+" \n            hasLoanProductsEligibleForPayment: "+this.hasLoanProductsEligibleForPayment+" \n            hasMobileNetcode: "+this.hasMobileNetcode+" \n            isPaymentMenuLocked: "+this.isPaymentMenuLocked+" \n            hasPayTag: "+this.hasPayTag+" \n            hasPayTagOrCreditCard: "+this.hasPayTagOrCreditCard+" \n            hasPayTagOrDebitCard: "+this.hasPayTagOrDebitCard+" \n            allowBalanceTransfer: "+this.allowBalanceTransfer+" \n            isEligibleForForeignCurrencyAccount: "+this.isEligibleForForeignCurrencyAccount+" \n            isEligibleForInvestmentFund: "+this.isEligibleForInvestmentFund+" \n            isHomeLoanAppRewriteEnabled: "+this.isHomeLoanAppRewriteEnabled+" \n            isCustomerAsbBranded: "+this.isCustomerAsbBranded+" \n            isBankingHubEnabled: "+this.isBankingHubEnabled+"\n            isOrderForeignCurrencyEnabled: "+this.isOrderForeignCurrencyEnabled+"\n            isTwoToSign: "+this.isTwoToSign+"\n            =====================================================\n        ")},e.prototype.setContextFrom=function(e){var t=/products=(\d+)(&switches=(\d+))?/.exec(e);return t&&(this.rawCtx=e,t[1]&&(this.ctx.products=parseInt(t[1])),t[2]&&(this.ctx.switches=parseInt(t[3])),console.log("user context set",this.ctx)),this},Object.defineProperty(e.prototype,"hasContext",{get:function(){return this.ctx.products+this.ctx.switches>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasTrueRewards",{get:function(){return(this.ctx.products&o.hasTrueRewards)===o.hasTrueRewards},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasCreditCards",{get:function(){return(this.ctx.products&o.hasCreditCards)===o.hasCreditCards},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasNetcode",{get:function(){return(this.ctx.products&o.hasNetcode)===o.hasNetcode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSTCRegistered",{get:function(){return(this.ctx.products&o.isSTCRegistered)===o.isSTCRegistered},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasLoanProductsEligibleForPayment",{get:function(){return(this.ctx.products&o.hasLoanProductsEligibleForPayment)===o.hasLoanProductsEligibleForPayment},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasMobileNetcode",{get:function(){return(this.ctx.products&o.hasMobileNetcode)===o.hasMobileNetcode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPaymentMenuLocked",{get:function(){return(this.ctx.products&o.isPaymentMenuLocked)===o.isPaymentMenuLocked},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPayTag",{get:function(){return(this.ctx.products&o.hasPayTag)===o.hasPayTag},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPayTagOrCreditCard",{get:function(){return(this.ctx.products&o.hasPayTagOrCreditCard)===o.hasPayTagOrCreditCard},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPayTagOrDebitCard",{get:function(){return(this.ctx.products&o.hasPayTagOrDebitCard)===o.hasPayTagOrDebitCard},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allowBalanceTransfer",{get:function(){return(this.ctx.products&o.allowBalanceTransfer)===o.allowBalanceTransfer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEligibleForForeignCurrencyAccount",{get:function(){return(this.ctx.products&o.isEligibleForForeignCurrencyAccount)===o.isEligibleForForeignCurrencyAccount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEligibleForInvestmentFund",{get:function(){return(this.ctx.products&o.isEligibleForInvestmentFund)===o.isEligibleForInvestmentFund},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isHomeLoanAppRewriteEnabled",{get:function(){return(this.ctx.products&o.isHomeLoanAppRewriteEnabled)===o.isHomeLoanAppRewriteEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isCustomerAsbBranded",{get:function(){return(this.ctx.products&o.isCustomerAsbBranded)===o.isCustomerAsbBranded},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isBankingHubEnabled",{get:function(){return(this.ctx.products&o.isBankingHubEnabled)===o.isBankingHubEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOrderForeignCurrencyEnabled",{get:function(){return(this.ctx.products&o.isOrderForeignCurrencyEnabled)===o.isOrderForeignCurrencyEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isTwoToSign",{get:function(){return(this.ctx.products&o.isTwoToSign)===o.isTwoToSign},enumerable:!1,configurable:!0}),e._instance=new e,e}();t.UserContext=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TabHelper=void 0;var o=n(14),i="",r=!1,a=o.debounce(c,100),s=!0,u=!0;function c(){var e;null===(e=document.querySelector(".key-focus"))||void 0===e||e.classList.remove("key-focus")}function l(){u=!1}function d(e,t){s?(e.preventDefault(),t&&t()):(c(),l())}function p(e){var t=h(),n=t.links[t.activeLinkIndex+e];n&&n.focus()}function h(e){var t,n;void 0===e&&(e=i+".link");for(var o=document.querySelectorAll(e),r=[],a=0;a<o.length;a++){((s=o[a]).hasAttribute("href")||"BUTTON"===s.tagName)&&r.push(s)}for(a=0;a<r.length;a++){var s;if((s=r[a])===document.activeElement){n=a,t=s;break}}return{activeLink:t,activeLinkIndex:n,links:r,isFirst:function(){return 0===n||t.classList.contains("first")},isLast:function(){return n===o.length-1||t.classList.contains("last")}}}t.TabHelper={init:function(){document.body.addEventListener("mousemove",a)},onKeyPress:function(e,t){if(u)if("ArrowUp"===e.key||"ArrowLeft"===e.key)r=!0,p(-1);else if("ArrowDown"===e.key||"ArrowRight"===e.key)r=!0,p(1);else if("Tab"===e.key){r=!0;var n=h();(n.isFirst()&&e.shiftKey||n.isLast()&&!e.shiftKey)&&d(e,t)}else r=!1},onMouseDown:function(){r=!1},onFocus:function(e){var t;r&&(t=e.srcElement,c(),t.classList.add("key-focus"))},setScopeClass:function(e){i="."+e+" "},resetScope:function(){i=""},tabWasPressed:function(){return r},allowPromiscuousTabbing:function(){s=!1},setEnabled:function(){u=!0},setDisabled:l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DL=void 0;t.DL={schema:{page:{abort:"page.abort",name:"page.name",brand:"page.brand",id:"page.id",platform:"page.platform",section:"page.section",subSection:"page.subSection",subsubsection:"page.subsubsection",type:"page.type",url:"page.url",components:"page.components"},product:{category:"product.category",name:"product.name",code:"product.code"},form:{access:"form.access",dtid:"form.dtid",name:"form.name",option1:"form.option1",option2:"form.option2",stage:"form.stage",step:"form.step",version:"form.version"},error:{description:"error.description",message:"error.message",type:"error.type"},user:{cif:"user.cif",state:"user.state"},interaction:{category:"interaction.category",text:"interaction.text",type:"interaction.type",location:"interaction.location"},tool:{category:"tool.category",name:"tool.name",type:"tool.type",step:"tool.step",version:"tool.version"}},formStage:{prestart:"prestart",start:"start",submit:"submit"},pageType:{form:"form",error:"error",hub:"hub",interaction:"interaction",tool:"tool"},errorType:{business:"business",technical:"technical"},access:{authenticated:"authenticated",unauthenticated:"unauthenticated"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyPressHelper=void 0,function(e){var t;function n(e){t.forEach((function(t){return t(e)}))}e.listenForWindowEvents=function(e){t=e,window.addEventListener("keydown",n)},e.stopListeningForWindowEvents=function(){window.removeEventListener("keydown",n)}}(t.KeyPressHelper||(t.KeyPressHelper={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=void 0,t.debounce=function(e,t,n){var o;return void 0===n&&(n=!0),function(){var i=this,r=arguments,a=function(){o=null,n||e.apply(i,r)},s=n&&!o;clearTimeout(o),o=setTimeout(a,t),s&&e.apply(i,r)}}},function(e,t,n){"use strict";function o(e){"Tab"===e.key&&i()}function i(){document.body.classList.add("tabbing")}Object.defineProperty(t,"__esModule",{value:!0}),t.default={init:function(){window.addEventListener("keydown",o)},unmount:function(){window.removeEventListener("keydown",o)},set:i,reset:function(){document.body.classList.remove("tabbing")}}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PopupManager=void 0;var o;!function(e){e.track=function(e){var t=o.get();t.push(e),o.set(t.join(","))},e.closeAll=function(){o.get().forEach((function(e){var t=window.open("",e,"width=1, height=1, menubar=0, location=0, status=no, toolbar=0, scrollbars=0, resizable=0");t&&!t.closed&&t.close()}))}}(t.PopupManager||(t.PopupManager={})),function(e){e.set=function(e){var t=new Date;t.setDate(t.getDate()+1),document.cookie=encodeURIComponent("OpenedWindowNamesCookieKey")+"="+encodeURIComponent(e)+";expires="+t.toUTCString()+"; path=/"},e.get=function(){var e=[];return document.cookie.split(";").forEach((function(t){var n=t.split("=");2===n.length&&"OpenedWindowNamesCookieKey"===decodeURIComponent(n[0]).trim()&&(e=decodeURIComponent(n[1]).split(","))})),e}}(o||(o={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimeoutManager=void 0,function(e){e.isFncTimeout=!1}(t.TimeoutManager||(t.TimeoutManager={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Orchestration=void 0;var o=n(0),i=n(17),r=n(18),a=n(20),s=n(8),u=n(22),c=n(5),l=n(6),d=function(){function e(){this.mainMenuOpen=!1,this.userMenuOpen=!1,this.notificationsOpen=!1,this.childFrames=[],this.isOnlineContainer=!1,this.enabledFrames=15,this.registeredFrames=0,this.pendingChildFrameRegistered=[],this.switches=0,this.headerJunctionName=this.deriveHeaderJunction(),this.mainMenuLinkOnClickLastDateTime=0}return e.prototype.init=function(e,t){var n=this;console.log("header orchestration init"),this.switches=e,this.orchestrationDelegate=t,this.isOnlineContainer=/^\/service(preview)?/.test(parent.location.pathname)||/^\/apply(preview)?/.test(parent.location.pathname)||/^\/digital(preview)?/.test(parent.location.pathname),t&&this.pendingChildFrameRegistered.length&&this.pendingChildFrameRegistered.forEach((function(e){n.orchestrationDelegate.onChildFrameRegistered(e)})),a.initAnalytics(),u.WindowMessageGateway.instance.onMessage((function(e,t){"usermenucontext"==e&&(c.setSessionCookie("usermenucontext",t.ctx),n.mainMenu?n.mainMenu.onUserContextSet(t.ctx):n.onMainMenuRegistered=function(){n.mainMenu.onUserContextSet(t.ctx)})})),u.WindowMessageGateway.instance.send("header-ready")},e.prototype.deriveHeaderJunction=function(e){void 0===e&&(e=window.location.pathname);var t=e.split("/");return t.length>1?t[1]:"header"},e.prototype.reportInteraction=function(e,t,n){void 0===t&&(t="click"),a.reportInteraction(e,t,n)},e.prototype.registerChildFrame=function(e){console.info("frame registered",e.type),e.type!==o.ChildFrameType.all&&((this.registeredFrames&e.type)===e.type&&this.deRegisterChildFrame(e),this.registeredFrames|=e.type),this.childFrames.push(e),this.orchestrationDelegate?this.orchestrationDelegate.onChildFrameRegistered(e.type):this.pendingChildFrameRegistered.push(e.type),e.type===o.ChildFrameType.mainMenu&&(this.mainMenu=e,this.onMainMenuRegistered&&this.onMainMenuRegistered())},e.prototype.deRegisterChildFrame=function(e){for(var t=-1,n=0;n<this.childFrames.length;n++){if(this.childFrames[n].type===e.type){t=n;break}}t>=0&&(console.info("deregistering frame",e.type),this.childFrames.splice(t,1))},e.prototype.notifyFrameOpened=function(e){var t=this;this.childFrames.forEach((function(n){(t.enabledFrames&n.type)===n.type&&(n.handleFrameOpened(e),n.type===o.ChildFrameType.notifications&&t.hackToOpenAndCloseNotificationsFrame(!1))})),this.applyHostTweaksForFrameOpen()},e.prototype.notifyFrameClosed=function(e){var t=this;this.childFrames.forEach((function(n){(t.enabledFrames&n.type)===n.type&&n.handleFrameClosed(e)})),this.removeHostTweaksForFrameOpen()},e.prototype.notifyTabIn=function(e){var t=this;this.childFrames.forEach((function(n){(t.enabledFrames&n.type)===n.type&&n.handleTabIn(e)}))},e.prototype.notifyTabOut=function(e){var t=this;this.childFrames.forEach((function(n){(t.enabledFrames&n.type)===n.type&&n.handleTabOut(e)}))},e.prototype.applyHostTweaksForFrameOpen=function(){this.isOnlineContainer||window.top===window||(window.top.document.body.style.overflow="hidden")},e.prototype.removeHostTweaksForFrameOpen=function(){this.isOnlineContainer||window.top===window||window.top.document.body.style.removeProperty("overflow")},e.prototype.addHeaderFrames=function(){if(console.log("adding header frames"),this.createFrame("/"+this.headerJunctionName+"/MainMenu.aspx","main-menu"),this.createFrame("/"+this.headerJunctionName+"/UserMenu.aspx","user-menu"),this.createFrame("/"+this.headerJunctionName+"/Back.aspx","back",60),!this.isOnlineContainer&&window!==top){var e="/features/58856f007c9d150564318e1c/"+document.querySelector("body").getAttribute("-data-PreviewVersion")+"/Index2.html";"http://localhost"===location.origin&&(e="/"+this.headerJunctionName+"/UnifiedMessaging.aspx"),this.createFrame(e,"notifications")}},e.prototype.addMenuFrame=function(){this.createFrame("/"+this.headerJunctionName+"/MainMenu.aspx","main-menu")},e.prototype.createFrame=function(e,t,n){void 0===n&&(n=0);var o="position:absolute; top:"+n+"px; height:0; max-height:0; z-index:10000;",i=parent.document.createElement("iframe");i.setAttribute("src",e),i.setAttribute("width","100%"),i.setAttribute("height","100%"),i.setAttribute("frameborder","0"),i.setAttribute("scrolling","no"),i.setAttribute("id",t.replace(/-/g,"")),i.setAttribute("style",o),i.setAttribute("title",t.replace(/-/g,""));var r=parent.document.createElement("div");r.setAttribute("aria-hidden","true"),r.style.display="none",r.appendChild(i),parent.document.body.appendChild(r)},e.prototype.asbLogoOnClick=function(){var e="/"+l.getFncJunction()+"/";this.navigate(e)},e.prototype.mainMenuLinkOnClick=function(){var e=Date.now(),t=this.mainMenuLinkOnClickLastDateTime;this.mainMenuLinkOnClickLastDateTime=e,e-t<250||(this.mainMenuOpen=!this.mainMenuOpen,this.userMenuOpen=!1,this.notificationsOpen=!1,this.mainMenuOpen?this.notifyFrameOpened(o.ChildFrameType.mainMenu):this.notifyFrameClosed(o.ChildFrameType.mainMenu))},e.prototype.notificationsLinkOnClick=function(){var e;r.TimeoutManager.isFncTimeout&&window.top.location.reload(),this.notificationsOpen=!this.notificationsOpen,this.userMenuOpen=!1,this.mainMenuOpen=!1;var t=null===(e=top.document.querySelector("#notifications"))||void 0===e?void 0:e.parentElement;if(this.notificationsOpen?(this.notifyFrameOpened(o.ChildFrameType.notifications),t&&(t.style.display="block")):(this.notifyFrameClosed(o.ChildFrameType.notifications),t&&(t.style.display="none")),this.notificationsOpen){this.reportInteraction(void 0,"image",{category:"navigation",location:"hb-s",text:"notifications"})}this.hackToOpenAndCloseNotificationsFrame(!0)},e.prototype.hackToOpenAndCloseNotificationsFrame=function(e){var t=top.document.querySelector("#notifications");t&&(t.style.maxHeight=e?"none":"0")},e.prototype.fncNotificationsLinkOnClick=function(){this.notificationsOpen&&(this.notificationsOpen=!this.notificationsOpen,this.userMenuOpen=!1,this.mainMenuOpen=!1,this.notificationsOpen?this.notifyFrameOpened(o.ChildFrameType.notifications):this.notifyFrameClosed(o.ChildFrameType.notifications))},e.prototype.userMenuLinkOnClick=function(){this.userMenuOpen=!this.userMenuOpen,this.mainMenuOpen=!1,this.notificationsOpen=!1,this.userMenuOpen?this.notifyFrameOpened(o.ChildFrameType.userMenu):this.notifyFrameClosed(o.ChildFrameType.userMenu)},e.prototype.logoutLinkOnClick=function(e){void 0===e&&(e=""),this.isOnlineContainer?i.PopupManager.closeAll():parent.ASB&&parent.ASB.CommonHeader&&parent.ASB.CommonHeader.onLogout(),parent.location.href="/pkmslogout?goto="+s.Navigation.getAsbWebUrl()+"/logout/logout-fnc.html"+(e?"?"+e:"")},e.prototype.backToOnClick=function(){console.log("HEADER: going back..."),parent.__ContainerApp?parent.__ContainerApp.component.backToOnClick():window.history.back()},e.prototype.navigate=function(e){console.log("navigate to "+e),/^\/service/.test(e)&&this.isOnlineContainer?parent.__ContainerApp&&parent.__ContainerApp.component.navigateLayout(e):parent.window.location.href=e},e}();t.Orchestration=d},function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(21),t),i(n(12),t)},function(e,t,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.reportInteraction=t.initAnalytics=void 0;var i,r=n(12),a=function(e,t){var n,o,r=function(e){for(var t=e.split("."),n=i,o=0,r=t;o<r.length;o++){var a=r[o];n&&"object"==typeof n[a]&&(n=n[a])}return n}(e);r&&void 0!==t&&(r[(n=e,o=n.split("."),o.length?o[o.length-1]:"")]=t.toLowerCase())},s=function(e,t){t&&(u(t).forEach((function(t){e[t.name]=e[t.name]||t.value})),s(e,t.parentElement))},u=function(e){var t=[];if(e)for(var n in e.attributes)e.attributes[n]&&/^data-dl-/.test(e.attributes[n].nodeName)&&t.push({name:e.attributes[n].nodeName.replace(/^data-dl-/,""),value:e.attributes[n].nodeValue});return t},c=function(e){if(e){var t=e.digitalData,n=e.s||{};t&&t.page&&t.user?(a(r.DL.schema.page.url,t.page.url),a(r.DL.schema.page.name,t.page.name),o="pageName",i=t.page.name||n.pageName||"",window.s&&(window.s[o]=i),a(r.DL.schema.user.cif,t.user.cif),a(r.DL.schema.error.message,""),a(r.DL.schema.error.description,"")):(a(r.DL.schema.error.message,"Header analytics error"),a(r.DL.schema.error.description,"Could not find Host digitalData"),a(r.DL.schema.page.url,top.location.href))}var o,i},l=function(e){return e.isFnc?top:function(){var e=top.document.querySelector("#hx_viewport_main");if(e){var t=e.querySelector("iFrame");if(t)return t.contentWindow}}()};t.initAnalytics=function(){window&&(window.digitalData=window.digitalData||{page:{abort:"true",brand:"asb",url:"",section:"",subSection:"",subsubsection:""},product:{},form:{version:""},error:{},user:{},interaction:{},tool:{}},i=window.digitalData)};t.reportInteraction=function(e,n,a){void 0===n&&(n="click"),t.initAnalytics();var u,d,p=(u=top.location.href.replace("https://","").split("/"),{junction:d=u[1],page:u.length>=2?u[2]:"",isFnc:0===d.indexOf("fnc")||0===d.indexOf("dev")}),h=l(p),f="hub"===i.page.type?"asb-site-interact":void 0;"string"==typeof e&&(e=document.getElementById("#"+e));var m,g=window,y=i;y.interaction={type:n},c(h),s(y.interaction,e),a&&(y.interaction=o(o({},y.interaction),a)),function(e,t){e._satellite&&e._satellite.track(t)}(g,f||"asb-feature-tl"),m=r.DL.pageType.interaction,i[m]={},y.interaction={}},window.digitalData={page:{abort:"true",brand:"asb",url:"",section:"",subSection:"",subsubsection:""},product:{},form:{version:""},error:{},user:{},interaction:{},tool:{}}},function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.WindowMessageGateway=t.sendMessage=t.setThrowNoTopWindowError=t.NoTopWindowError=t.MessageData=void 0;var r=function(e,t){this.type=e,this.payload=t};t.MessageData=r;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(Error);t.NoTopWindowError=a;t.setThrowNoTopWindowError=function(e){void 0===e&&(e=!0),e},t.sendMessage=function(e,t,n){(n||window.top).postMessage(new r(e,t),window.location.origin)};var s=function(){function e(){var e=this;this.messageCallbacks=[],this.lastSendDate=0,this.messageCallback={},window.addEventListener("message",(function(t){return e.handleMessage(t)}))}return e.setInstance=function(e){this.instance=e},e.reset=function(){this.setInstance(new e)},e.prototype.onMessage=function(e){this.messageCallbacks.push(e)},e.prototype.send=function(e,n,o,i,r){if(void 0===n&&(n={}),o){var a=i||"any";this.messageCallback[a]=o}t.sendMessage(e,n,r)},e.prototype.handleMessage=function(e){if(e.origin!==window.location.origin)return!1;if(e.data){var t=e.data,n=t.type.toLowerCase(),o=e.source;return console.log("WindowMessageGateway:incoming message:data",t),!this.handleMessageCallback(n,n,t.payload,o)&&this.handleMessageCallback("any",n,t.payload,o),this.messageCallbacks.forEach((function(e){return e(n,t.payload||{},o)})),!0}},e.prototype.handleMessageCallback=function(e,t,n,o){var i=this.messageCallback[e];return i&&i(t,n,o),void 0!==i},e.instance=new e,e}();t.WindowMessageGateway=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkHelper=void 0;var o,i=n(3),r=n(11);t.LinkHelper={init:function(){r.TabHelper.init(),(o=new i.DomHelper([{name:"links",selector:".link",events:[{name:"mousedown",handler:r.TabHelper.onMouseDown},{name:"focus",handler:r.TabHelper.onFocus}]}])).init()},focusFirstLink:function(){var e=o.domRefs.links[0];e&&e.focus()}}},,,function(e,t,n){"use strict";var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0;var r=n(3),a=n(19),s=n(0),u=n(13),c=n(11),l=n(17),d=n(18),p=n(15),h=n(23),f=n(5),m=n(27),g=function(e){function t(){var t=e.call(this)||this;return t.type=s.ChildFrameType.all,t.switches=0,t.popupManager=l.PopupManager,t.timeoutManager=d.TimeoutManager,t.isMobile=!1,t.qsParams=t.getQsParams(),t.notificationsLinkOnClickLastDateTime=0,t.userMenuLinkOnClickLastDateTime=0,t.orchestration=new a.Orchestration,t.helper=new r.DomHelper([{name:"header",selector:".container-header-wrapper"},{name:"bob",selector:"#bob"},{name:"asbLogo",selector:"button#asb-logo",events:[{name:"click",handler:function(){return t.asbLogoOnClick()}}]},{name:"mainMenuButton",selector:"#main-menu-button",events:[{name:"click",handler:function(){return t.mainMenuLinkOnClick()}},{name:"focus",handler:function(e){return c.TabHelper.setEnabled()}}]},{name:"mainMenuLabel",selector:".menu-link-label"},{name:"backButton",selector:"#back-button",events:[{name:"click",handler:function(){return t.backButtonOnClick()}}]},{name:"notificationsButton",selector:"#notifications-button",events:[{name:"click",handler:function(e){return t.notificationsLinkOnClick(e)}}]},{name:"badge",selector:".notifications-badge"},{name:"meButton",selector:"#me-button",events:[{name:"click",handler:function(){return t.userMenuLinkOnClick()}}]},{name:"logoutButton",selector:"#logout-button",events:[{name:"click",handler:function(){return t.logoutLinkOnClick()}},{name:"focus",handler:function(e){return c.TabHelper.setEnabled()}},{name:"focusout",handler:function(e){return t.logoutLinkOnLostFocus(e)}}]}]),t}return i(t,e),t.prototype.setReferrerCookie=function(){var e=f.getCookie("HeaderReferrer");e&&(document.cookie="HeaderPrevReferrer="+e+";path=/");var t=m.getJunctionInfo();document.cookie="HeaderReferrer="+t.path+";path=/"},t.prototype.checkForHeaderHost=function(){top.__headerHost&&(this.headerHost=top.__headerHost)},t.prototype.init=function(){var e=this;this.isMobile=r.isDevice(),this.isMobile&&document.body.classList.add("mobile"),this.checkForHeaderHost(),this.setReferrerCookie(),this.setSwitches(),this.helper.init(),this.checkModeFnc(),this.subscribeToTimeout(),p.default.init(),h.LinkHelper.init(),c.TabHelper.allowPromiscuousTabbing(),this.orchestration.init(this.switches,{onChildFrameRegistered:function(t){if(e.helper.addClass(e.helper.domRefs.header,"child-frame-"+s.ChildFrameType[t]),(s.ChildFrameType.notifications&&t)===s.ChildFrameType.notifications)try{var n=parseInt(e.getQsBadgeCount());n&&e.setNotificationCount(n)}catch(e){}else(s.ChildFrameType.notifications&&t)===s.ChildFrameType.back&&e.isBack&&e.showBack()}}),u.KeyPressHelper.listenForWindowEvents([function(e){c.TabHelper.onKeyPress(e)},function(t){e.listeningForTabsFor&&"Tab"===t.key&&!t.shiftKey&&(e.orchestration.notifyTabIn(e.listeningForTabsFor),t.preventDefault())}]),this.orchestration.registerChildFrame(this),this.focusPreMainMenuLink()},t.prototype.subscribeToTimeout=function(){top.document.querySelector("body").addEventListener("helix.timeout",(function(){parent&&parent.ASB&&parent.ASB.CommonHeader&&parent.ASB.CommonHeader.onLogout(),window&&window.top&&window.top.window.location.reload()}))},t.prototype.setSwitches=function(){var e=document.querySelector("body").getAttribute("-data-switches");e&&(this.switches=parseInt(e))},t.prototype.getQsParams=function(){var e={};return parent.location.search.replace("?","").split("&").forEach((function(t){var n=t.split("=");try{e[n[0]]=n[1]}catch(e){}})),e},t.prototype.getQsMode=function(){return this.qsParams.mode||""},t.prototype.getQsBadgeCount=function(){return this.qsParams.badge||""},t.prototype.checkModeFnc=function(){var e=parent.location.pathname.split("/");if(e.length>1){var t=e[1];if(0===t.indexOf("fnc")||0===t.indexOf("dev"))this.setMode("full");else{var n=this.getQsMode();n&&this.setMode(n)}}},Object.defineProperty(t.prototype,"isForm",{get:function(){return this.mode.indexOf("form")>=0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFull",{get:function(){return this.mode.indexOf("full")>=0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isBack",{get:function(){return this.mode.indexOf("back")>=0},enumerable:!1,configurable:!0}),t.prototype.setMode=function(e){var t=this;if(e){if(this.mode=e,this.helper.domRefs.header)return this.helper.log("   HEADER: setting header mode to "+e,"debug"),this.helper.removeClass(this.helper.domRefs.header,"form full fullback"),this.helper.addClass(this.helper.domRefs.header,e),this.isFull&&this.orchestration.addHeaderFrames(),void setTimeout((function(){t.helper.addClass(t.helper.domRefs.header,"show"),t.helper.focus(t.helper.domRefs.bob)}),10);setTimeout((function(){return t.setMode(e)}),100)}},t.prototype.onFrameOpened=function(e,t){this.closeAllFrames(),t&s.ChildFrameType.mainMenu?(this.openMainMenu(),this.listenToTabsFor(s.ChildFrameType.mainMenu)):t&s.ChildFrameType.userMenu?(this.openUserMenu(),this.listenToTabsFor(s.ChildFrameType.userMenu)):t&s.ChildFrameType.notifications&&(this.openNotifications(),this.listenToTabsFor(s.ChildFrameType.notifications))},t.prototype.onFrameClosed=function(e,t){this.closeAllFrames(),this.listeningForTabsFor=void 0,t&s.ChildFrameType.mainMenu&&this.focusMainMenuLink()},t.prototype.onTabIn=function(e,t){},t.prototype.onTabOut=function(e,t){t&s.ChildFrameType.mainMenu?this.helper.focus(this.helper.domRefs.mainMenuButton):t&s.ChildFrameType.notifications?this.helper.focus(this.helper.domRefs.notificationsLink):t&s.ChildFrameType.userMenu&&this.helper.focus(this.helper.domRefs.meButton)},t.prototype.onUserContextSet=function(){},t.prototype.listenToTabsFor=function(e){this.listeningForTabsFor=e},t.prototype.closeAllFrames=function(){this.closeMainMenu(),this.closeUserMenu(),this.closeNotifications()},t.prototype.setNotificationCount=function(e){var t="";this.helper.removeClass(this.helper.domRefs.badge,"show"),this.helper.removeClass(this.helper.domRefs.badge,"digits-3"),e>0&&(t=""+e,this.helper.addClass(this.helper.domRefs.badge,"show"),e>99&&(this.helper.addClass(this.helper.domRefs.badge,"digits-3"),t="99+"),this.helper.setText(this.helper.domRefs.badge,t))},t.prototype.backButtonOnClick=function(){this.orchestration.backToOnClick()},t.prototype.focusMainMenuLink=function(e){void 0===e&&(e=!1),e&&this.helper.focus(this.helper.domRefs.logout),this.helper.focus(this.helper.domRefs.mainMenuButton)},t.prototype.focusPreMainMenuLink=function(){this.helper.focus(this.helper.domRefs.bob)},t.prototype.focusNotificationsLink=function(e){void 0===e&&(e=!1),e&&this.helper.focus(this.helper.domRefs.logout),this.helper.focus(this.helper.domRefs.notificationsLink)},t.prototype.focusUserMenuLink=function(e){void 0===e&&(e=!1),e&&this.helper.focus(this.helper.domRefs.logout),this.helper.focus(this.helper.domRefs.meButton)},t.prototype.asbLogoOnClick=function(){this.orchestration.asbLogoOnClick()},t.prototype.mainMenuLinkOnClick=function(){this.orchestration.mainMenuLinkOnClick(),this.isMobile&&this.orchestration.notifyTabIn(s.ChildFrameType.mainMenu)},t.prototype.openMainMenu=function(){this.helper.addClass(this.helper.domRefs.mainMenuButton,"open"),this.helper.setText(this.helper.domRefs.mainMenuLabel,"Close"),this.helper.addAttribute(this.helper.domRefs.mainMenuButton,"aria-expanded","true"),this.focusMainMenuLink(!0)},t.prototype.closeMainMenu=function(){this.helper.removeClass(this.helper.domRefs.mainMenuButton,"open"),this.helper.setText(this.helper.domRefs.mainMenuLabel,"Menu"),this.helper.addAttribute(this.helper.domRefs.mainMenuButton,"aria-expanded","false")},t.prototype.notificationsLinkOnClick=function(e){var t=Date.now(),n=this.notificationsLinkOnClickLastDateTime;this.notificationsLinkOnClickLastDateTime=t,t-n<250||(this.orchestration.notificationsLinkOnClick(),this.isMobile&&this.orchestration.notifyTabIn(s.ChildFrameType.notifications))},t.prototype.openNotifications=function(){this.helper.addClass(this.helper.domRefs.notificationsButton,"open"),this.helper.addAttribute(this.helper.domRefs.notificationsButton,"aria-expanded","true"),this.focusNotificationsLink(!0)},t.prototype.closeNotifications=function(){this.helper.removeClass(this.helper.domRefs.notificationsButton,"open"),this.helper.addAttribute(this.helper.domRefs.notificationsButton,"aria-expanded","false")},t.prototype.userMenuLinkOnClick=function(){var e=Date.now(),t=this.userMenuLinkOnClickLastDateTime;this.userMenuLinkOnClickLastDateTime=e,e-t<250||(this.orchestration.userMenuLinkOnClick(),this.isMobile&&this.orchestration.notifyTabIn(s.ChildFrameType.userMenu))},t.prototype.openUserMenu=function(){this.helper.addClass(this.helper.domRefs.meButton,"open"),this.helper.addAttribute(this.helper.domRefs.meButton,"aria-expanded","true"),this.focusUserMenuLink(!0)},t.prototype.closeUserMenu=function(){this.helper.removeClass(this.helper.domRefs.meButton,"open"),this.helper.addAttribute(this.helper.domRefs.meButton,"aria-expanded","false")},t.prototype.logoutLinkOnClick=function(){this.orchestration.logoutLinkOnClick()},t.prototype.logoutLinkOnLostFocus=function(e){if(!e.relatedTarget)return e.preventDefault(),e.stopPropagation(),this.headerHost?this.headerHost.onTabFromHeader():this.focusNonFoa()||this.focusDefaultIn(parent.document),!1},t.prototype.focusNonFoa=function(){var e=top.document.querySelector("#LeftHandNavigationFrame");if(e){var t=e.contentWindow.document;return this.focusDefaultIn(t),!0}return!1},t.prototype.focusDefaultIn=function(e){var t=e.querySelector("a[role=menuitem]")||e.querySelector("a[href]");t&&setTimeout((function(){t.focus()}),10)},t.prototype.showBack=function(){this.orchestration.notifyFrameOpened(s.ChildFrameType.back)},t.prototype.hideBack=function(){this.orchestration.notifyFrameClosed(s.ChildFrameType.back)},t}(s.ChildFrame);t.Header=g;var y=window.__header=new g;window.addEventListener("DOMContentLoaded",(function(e){y.init()}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getJunctionInfo=void 0,t.getJunctionInfo=function(){var e={junction:"",layout:"",page:"",path:""},t=/^http(?:s)?:\/\/[a-zA-Z\.]+\/([_a-zA-Z\d]*)(\/[_a-zA-Z\d]*)(\/[_a-zA-Z\d]*)?/.exec(top.window.location.href);return t&&(t[1]&&(e.junction=t[1]),t[2]&&(e.layout=t[2]),t[3]&&(e.page=t[3]),e.path=""+e.junction+e.layout+e.path),e}}]);