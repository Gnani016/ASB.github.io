var grHelper={};(function(){var f=window.parent,p,r=[],k=500,e="webappisamdev.asbbank.co.nz",a="fstonline.asbbank.co.nz",o="virtualonline.asbbank.co.nz";qalocation="qaonline.asb.co.nz",prodLocation="online.asb.co.nz";function b(v){var t=window.location.toString();try{if(t.indexOf(e)>-1){f.postMessage(v,"http://localhost");f.postMessage(v,"https://webappisamdev.asbbank.co.nz")}else{if(t.indexOf(a)>-1){f.postMessage(v,"https://fstonline.asbbank.co.nz")}else{if(t.indexOf(o)>-1){f.postMessage(v,"https://virtualonline.asbbank.co.nz")}else{if(t.indexOf(qalocation)>-1){f.postMessage(v,"https://qaonline.asb.co.nz")}else{if(t.indexOf(prodLocation)>-1){f.postMessage(v,"https://online.asb.co.nz")}}}}}}catch(u){}}function g(){var t=_.debounce(q,250);s(t);i(window,"resize",t)}function q(){var t=h();if(t!==p){r.push({height:t,previousHeight:p,time:Date.now()});p=t;if(!j(t)){b({height:t})}}}function j(t){if(r.length){var u=_.filter(r,function(v){return v.previousHeight===t&&v.time>(Date.now()-k)});return u.length>0}return false}var n;function h(){n=n||$("body");return Math.ceil(Math.max(n.outerHeight(true),m()))}function m(){var t=n.find(":visible").map(function(){var u=$(this);if(u.css("position")==="absolute"){return u.offset().top+u.outerHeight()}return 0}).get();return Math.max.apply(null,t)}function s(t){new MutationObserver(t).observe(document.body,{subtree:true,attributes:true,childList:true,characterData:false})}function i(v,t,u){if(v===null||v===undefined){return false}if(_.has(v,"addEventListener")){return v.addEventListener(t,u,false)}else{if(_.has(v,"attachEvent")){return v.attachEvent("on"+t,u)}}}function l(t){if(t.length!=0){b({userResponseValid:true});d(t)}}function d(u){var t=$("[name=secfk]").val();var v={"g-recaptcha-response":u,secfk:t,authnMod:"GrcAuthn",action:"login"};$.ajax({type:"POST",url:"/auth/grclogin",data:v,success:c,xhrFields:{withCredentials:true}})}function c(t){b({verified:true})}grHelper.setupResizeNotification=g;grHelper.sendMessage=b;grHelper.reCaptchaVerified=l})();